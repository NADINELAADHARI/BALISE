/*! For license information please see chunk-6d861b93.55ecfbba.js.LICENSE.txt */
(globalThis.webpackChunkgraphic=globalThis.webpackChunkgraphic||[]).push([[105],{86105:(t,e,n)=>{"use strict";n.d(e,{p6:()=>h});var i=n(18571),r=n(96204),o=n(24318),s=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};function a(t){var e=t.t;t.t=function(n,a,h){var c,l=Object.entries(a||{}).map((function(t){var e=t[0],n=t[1];return(0,i.isValidElement)(n)?e:null})).filter((function(t){return!!t}));if(!l.length)return e(n,a,h);try{var u=t.i18nInstance.instance.options||{},d=(a||{}).ns||u.ns||"translation";d=Array.isArray(d)?d[0]:"translation";var f=function(e){return t.i18nInstance.instance.getResource(e,d,n)},p=u.fallbackLng,g=f(t.language)||function(){var e;switch(p?Array.isArray(p)&&p.length?"array":typeof p:"null"){case"array":p.find((function(t){return e=f(t)}));break;case"function":var i=p(t.language);if(!Array.isArray(i))return console.error("fallbackLng must be return array"),h||n;i.find((function(t){return e=f(t)}))}return void 0===e&&(e=h||n),e}();Array.isArray(g)&&(g=g[0]);var v=new r.C(g,t.language,{},{ignoreTag:!!(null===(c=u.formatOptions)||void 0===c?void 0:c.ignoreTag)});try{var m=v.formatToParts(a);if(1===m.length)return m[0].value;var y=m.reduce((function(t,e){return t.length&&e.type===o.du.literal&&"string"==typeof t[t.length-1]?t[t.length-1]+=e.value:t.push(e.value),t}),[]);return i.createElement.apply(void 0,s([i.Fragment,{}],y,!1))}catch(b){console.warn("[intl-react-plugin] Key ".concat(JSON.stringify(n)," has missing some interpolation, use fallback target text ").concat(JSON.stringify(g)," fallback. More: ").concat(b));var _=e(n,a,h);return(0,i.createElement)(i.Fragment,{},_)}}catch(b){return console.error("[intl-react-plugin] Some error occurred",b),e(n,a,h)}}}i.createContext({i18n:void 0,locale:void 0});var h={type:"intl3rdParty",init:function(t){!function(t){t}(t),a(t)}}},84568:(t,e,n)=>{"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class r{constructor(t){i(this,"type","backend"),i(this,"name","@ies/intl-backend-plugin"),i(this,"_services",void 0),i(this,"_options",void 0),i(this,"_allOptions",void 0),i(this,"_configLng",void 0),this._options=t}_emit(t,e,n,i){const r=(this._options.on||{})[t];"function"==typeof r&&r(e,n),i(null,n)}_getStorageKey(t){const{apiKey:e,namespace:n}=this._options.loadOptions||{};if(e&&n)return`text.${e}.${n}.${t}`}init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._options=Object.assign({},e,this._options),this._allOptions=n,this._services=t,this._services.resourceStore.options.initImmediate=e.initImmediate||!1}read(t,e,i){if(this._configLng||(this._configLng=this._services.resourceStore.options.lng),"string"!=typeof this._configLng)if(this._services.languageDetector&&"function"==typeof this._services.languageDetector.detect)try{this._configLng=this._services.languageDetector.detect()}catch(t){this._configLng="zh-CN"}else this._configLng="zh-CN";if(this._options.simpleLoad&&t!==this._configLng)return this._emit("simpleBlocked",t,{},i);const{initialTexts:r,fallbackTexts:o={}}=this._options;let s={};if("function"==typeof r?s=r(t,this._getStorageKey(t),e):r&&"object"==typeof r&&(s=r[t]||{}),"object"!=typeof s)try{s=JSON.parse(s)}catch(t){s={}}const a=o[t]||{},h=Object.assign({locale:t,namespace:"",apiKey:"",fallbackLang:this._allOptions.fallbackLng||[this._allOptions.lng]},this._options.loadOptions||{});this._emit("receiveInit",t,s,i),(async()=>{let e=this._options.client||null;if(!e)try{const t=n(56889);if("function"==typeof t.default)e=t.default;else{if("function"!=typeof t)throw new Error('Error: can not get any client instance, intl backend plugin will emit "fallback" events');e=t}}catch(e){return this._emit("fallback",t,a,i)}try{e=new e(h)}catch(t){}try{if(!e||"function"!=typeof e.load)throw new Error;const n=await e.load((e=>this._emit("chunk",t,e,i)),{options:h,callback:e=>this._emit("chunk",t,e,i)});this._emit("done",t,n,i)}catch(e){this._emit("fallback",t,a,i)}})()}save(){}create(t,e,n,i){}}i(r,"type","backend"),e.CC=function(){return new r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},56889:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>Gt});var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)};var s=function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s.apply(this,arguments)};function a(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{h(i.next(t))}catch(T){o(T)}}function a(t){try{h(i.throw(t))}catch(T){o(T)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}h((i=i.apply(t,e||[])).next())}))}function h(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(T){o=[6,T],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var c=function(t){function e(e,n,i){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.originError=i,r.name="StarlingError",r.code=e,r.message=n,r.originError=i,Error.captureStackTrace&&Error.captureStackTrace(r,r.constructor),r}return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),l={ERROR_CODE:103,ERROR_MESSAGE:"Request failed, confirm your apiKey and namespace is correct"},u={ERROR_CODE:110,ERROR_MESSAGE:"Check your params, parameter apiKey, namespace and zoneHost is required!"},d={ERROR_CODE:111,ERROR_MESSAGE:"Check your params, parameter request and store is required!"},f={ERROR_CODE:112,ERROR_MESSAGE:"Cache error!"},p={ERROR_CODE:120,ERROR_MESSAGE:"Version is not found, please check your param [version]!"},g={zone:"CN",locale:"zh",timeout:15e3,test:!1,mode:"normal",format:"merged",lazyUpdate:!1,fallbackLang:["zh"],tracker:function(){},cache:!0};var v=function(){function t(t){this.options=t,this.options=t}return t.prototype.getText=function(t,e){return a(this,void 0,void 0,(function(){return h(this,(function(n){switch(n.label){case 0:return[4,this._request(t,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.getTexts=function(t){var e=this;return Promise.all(t.map((function(t){var n=t[0],i=t[1];return e.getText(n,i)})))},t.prototype._request=function(t,e){return a(this,void 0,void 0,(function(){var n,i,r,o,s,a,u,d,f,g,v,m,y,_,b,S;return h(this,(function(h){switch(h.label){case 0:return n=this.options.getReleaseVersion,i=n(t),t&&i&&e?[2,{}]:(r=this.getUrl(t,e),o=this.options,s=o.request,a=o.timeout,[4,s(r,{timeout:a})]);case 1:if(u=h.sent(),d=u.data,f=d.status,g=d.message,200==+f)return[2,this._mapResponse(g)];if(1001==+f)throw m=(v=p).ERROR_CODE,y=v.ERROR_MESSAGE,new c(m,y);throw b=(_=l).ERROR_CODE,S=_.ERROR_MESSAGE,new c(b,S)}}))}))},t.prototype.getUrl=function(t,e){var n=this.options,i=n.apiKey,r=n.locale,o=n.fallbackLang,s=n.zoneHost,a=n.mode,h=n.getReleaseVersion,c=[r].concat(o),l=s+"/check_and_get_text/"+i+"/"+a+"/"+t+"?lang="+c,u=h(t);return u&&(l=s+"/text_by_release_version/"+i+"/"+a+"/"+t+"/"+u+"?lang="+c),"string"==typeof e&&(l+="&version="+e),l},t.prototype._mapResponse=function(t){return t?Object.keys(t).reduce((function(e,n){return e[n.toLowerCase()]=t[n],e}),{}):{}},t}(),m=function(){function t(t){this.options=t,this.options=t}return t.prototype._setCache=function(t,e){try{return this.options.store.set(t,e)}catch(i){var n=f.ERROR_CODE;return void this.options.tracker("cache_error",{code:n,message:i.message,stack:i.stack})}},t.prototype._getCache=function(t){var e=this.options,n=e.store,i=e.cache;try{return i&&n.get(t)}catch(o){var r=f.ERROR_CODE;return void this.options.tracker("cache_error",{code:r,message:o.message,stack:o.stack})}},t.prototype.getVersion=function(t){var e=this.options,n="version."+e.apiKey+"."+t+"."+e.locale,i=(0,e.getReleaseVersion)(t);return i&&(n+="."+i),this.getText(t)?this._getCache(n):null},t.prototype.getVersions=function(t){var e=this;return Promise.all(t.map((function(t){return e.getVersion(t)})))},t.prototype.getText=function(t){var e=this.options,n="text."+e.apiKey+"."+t+"."+e.locale,i=(0,e.getReleaseVersion)(t);return i&&(n+="."+i),this._getCache(n)},t.prototype.getTexts=function(t){var e=this;return Promise.all(t.map((function(t){return e.getText(t)})))},t.prototype.refresh=function(t,e,n,i){return a(this,void 0,void 0,(function(){var r,o,s,a,c,l=this;return h(this,(function(h){switch(h.label){case 0:return r=this.options,o=r.apiKey,s=r.getReleaseVersion,a=r.cache,c=[],e.forEach((function(r,h){var u="text."+o+"."+t[h]+"."+i[h],d="version."+o+"."+t[h]+"."+i[h],f=s(t[h]);f&&(u+="."+f,d+="."+f),a&&(c.push(l._setCache(u,e[h])),c.push(l._setCache(d,n[h])))})),[4,Promise.all(c)];case 1:return h.sent(),[2,e.reduce((function(t,e){return Object.assign(t,e)}),{})]}}))}))},t}();var y=function(){function t(t){void 0===t&&(t=[]),this._list=[],this._list=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),t.prototype.getList=function(){return this._list},t.prototype.getNamespaces=function(){return this._list.map((function(t){return t.namespace}))},t.prototype.addNamespace=function(t){this._list.push(t)},t.prototype.insertTexts=function(t){this._list.forEach((function(e,n){e.texts=t[n]}))},t.prototype.sortByPrior=function(){return this._list.sort((function(t,e){return t.prior-e.prior})),this._list},t.prototype.concat=function(e){return new t(this._list.concat(e.getList()))},t}(),_=function(){function t(t,e,n){this._promiseRefresh=Promise.resolve(null),this.remote=t,this.local=e,this.options=n}return t.prototype._checkVersions=function(t){return a(this,void 0,void 0,(function(){var e,n,i,r,o,s;return h(this,(function(a){switch(a.label){case 0:return e=this.options.locale,[4,this.local.getVersions(t)];case 1:return n=a.sent(),i=t.map((function(t,e){return[t,n[e]]})),[4,this.remote.getTexts(i)];case 2:return r=a.sent(),o=new y,s=new y,t.forEach((function(t,i){var a=r[i],h=a.updated,c=a.version,l=a.data,u=a.lang;h?s.addNamespace({namespace:t,prior:i,version:c,texts:l,lang:u}):o.addNamespace({namespace:t,prior:i,version:n[i],lang:e})})),[2,{equalNs:o,diffNs:s}]}}))}))},t.prototype.waitForRefresh=function(){return this._promiseRefresh},t.prototype._refresh=function(t){var e=t.getList(),n=[],i=[],r=[],o=[];return e.forEach((function(t){n.push(t.namespace),i.push(t.version),r.push(t.texts),o.push(t.lang)})),this.local.refresh(n,r,i,o)},t.prototype._getLocalTexts=function(t){return a(this,void 0,void 0,(function(){var e;return h(this,(function(n){switch(n.label){case 0:return[4,this.local.getTexts(t.getNamespaces())];case 1:return e=n.sent(),t.insertTexts(e),[2,e]}}))}))},t.prototype.load=function(t){return a(this,void 0,void 0,(function(){var e,n,i,r,o;return h(this,(function(s){switch(s.label){case 0:return e=this.options.format,[4,this._checkVersions(t)];case 1:return n=s.sent(),i=n.equalNs,r=n.diffNs,i.length?[4,this._getLocalTexts(i)]:[3,3];case 2:return s.sent(),[3,4];case 3:s.label=4;case 4:return o=this._formatTexts(e,r.concat(i)),r.length?[4,this._refresh(r)]:[3,6];case 5:s.sent(),s.label=6;case 6:return[2,{texts:o,diffNs:r.getNamespaces(),equalNs:i.getNamespaces()}]}}))}))},t.prototype._getCacheText=function(t){return a(this,void 0,void 0,(function(){var e,n,i,r,o,s,a;return h(this,(function(h){switch(h.label){case 0:return e=this.options,n=e.locale,i=e.format,[4,this.local.getTexts(t)];case 1:return r=h.sent(),[4,this.local.getVersions(t)];case 2:return o=h.sent(),s=r.map((function(e,i){if(e)return{namespace:t[i],version:o[i],lang:n,texts:e}})).filter((function(t){return!!t})),a=new y(s),[2,this._formatTexts(i,a)]}}))}))},t.prototype.lazyLoad=function(t){return a(this,void 0,void 0,(function(){var e,n,i;return h(this,(function(r){switch(r.label){case 0:return[4,this._getCacheText(t)];case 1:return e=r.sent(),n=0===Object.keys(e).length,this._promiseRefresh=this.load(t),n?[4,this._promiseRefresh]:[3,3];case 2:i=r.sent(),e=i.texts,r.label=3;case 3:return[2,{texts:e,diffNs:n?i&&i.diffNs:[],equalNs:n?i&&i.equalNs:t}]}}))}))},t.prototype._formatTexts=function(t,e){if("splitted"===t)return e.getList().reduce((function(t,e){var n=e.namespace,i=e.lang,r=e.texts,o=e.version;return t[n]={lang:i,texts:r,version:o},t}),{});var n,i,r=e.sortByPrior().map((function(t){return t.texts}));return n=r,(i?n.concat(i):n).reduce((function(t,e){return Object.assign(t,e)}),{})},t}();"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},writable:!0,configurable:!0});var b,S="client_exception",w="client_load",x="client_cache",k="client_load_time";!function(t){t.AfterLoad="afterLoad"}(b||(b={}));var E=function(){function t(t){this.afterLoadPlugins=[],this.setConfig(t)}return t.prototype._init=function(t){var e=this;this.options=function(t){var e=(t=Object.assign({},g,t)).namespace,n=t.apiKey,i=t.request,r=t.store,o=t.zoneHost;if(t.test&&(t.mode="test"),t.namespace=e=e?Array.isArray(e)?e:[e]:[],t.apiKey=n=n||t.api_key,!i||!r){var s=d,a=s.ERROR_CODE,h=s.ERROR_MESSAGE;throw new c(a,h,null)}if(!n||!e.length||!o){var l=u;throw a=l.ERROR_CODE,h=l.ERROR_MESSAGE,new c(a,h,null)}return t}(t);var n=this.options,i=n.apiKey,r=n.locale,o=n.zoneHost,a=n.request,h=n.timeout,l=n.fallbackLang,f=n.store,p=n.lazyUpdate,y=n.test,b=n.mode,S=n.format,w=n.cache,x={mode:p?"lazy":y?"test":"prod",zone:o,locale:r,apiKey:i};this._tracker=function(t,n){try{e.options.tracker(t,s(s({},x),n))}catch(i){console.log(i)}};var k=this._getReleaseVersionByNamespace.bind(this),E=new v({request:a,timeout:h,apiKey:i,locale:r,zoneHost:o,fallbackLang:l,mode:b,getReleaseVersion:k}),C=new m({apiKey:i,locale:r,store:f,tracker:this._tracker,getReleaseVersion:k,cache:w});this._textManager=new _(E,C,{locale:r,format:S}),this.initPlugin()},t.prototype.initPlugin=function(){var t=this,e=this.options.plugins||[];Array.isArray(e)&&e.every((function(t){return"object"==typeof t}))&&e.forEach((function(e){e.type===b.AfterLoad&&t.afterLoadPlugins.push(e)}))},t.prototype._getReleaseVersionByNamespace=function(t){var e=this.options.namespace,n=this.options.version,i=null;if(Array.isArray(n)){var r=e.findIndex((function(e){return e===t}));i=n[r]}else n&&"object"==typeof n?i=n[t]:"string"==typeof n&&(i=n);return i},t.prototype.setConfig=function(t){var e=Object.assign({},this.options,t);this._init(e)},t.prototype.waitForRefresh=function(){return a(this,void 0,void 0,(function(){var t;return h(this,(function(e){switch(e.label){case 0:return[4,this._textManager.waitForRefresh()];case 1:return[2,(t=e.sent())?t.texts:null]}}))}))},t.prototype._load=function(){return a(this,void 0,void 0,(function(){var t,e,n,i,r;return h(this,(function(o){switch(o.label){case 0:return t=this.options,e=t.namespace,n=t.lazyUpdate,i=e,n?[4,this._textManager.lazyLoad(i)]:[3,2];case 1:return r=o.sent(),[3,4];case 2:return[4,this._textManager.load(i)];case 3:r=o.sent(),o.label=4;case 4:return[2,r]}}))}))},t.prototype.load=function(t,e){return a(this,void 0,void 0,(function(){var n,i,r,o,s,a,c,l,u,d,f,p,g,v,m=this;return h(this,(function(h){switch(h.label){case 0:n=Date.now(),i=this.options.namespace,h.label=1;case 1:return h.trys.push([1,5,,10]),this._tracker(w,{state:"start",version:"0.5.9"}),[4,this._load()];case 2:return r=h.sent(),o=r.diffNs,s=r.equalNs,a=r.texts,c=this.afterLoadPlugins,Array.isArray(c)&&c.length?[4,c.reduce((function(t,e){return t.then((function(t){return"function"==typeof e.process?e.process(t||a,m.options):t}))}),Promise.resolve(a))]:[3,4];case 3:l=h.sent(),a=l||a,h.label=4;case 4:return t&&t(a),this._tracker(k,{time:Date.now()-n}),this._tracker(w,{state:"success",version:"0.5.9"}),u=o.length,d=s.length,f=i.length,p=(d/f).toFixed(2),this._tracker(x,{diffLen:u,diff:o.join(","),equalLen:d,equal:s.join(","),namespaces:s.join(","),namespacesLen:f,ratio:p}),[2,a];case 5:if(g=h.sent(),this._tracker(w,{state:"fail"}),this._tracker(S,{code:g.code,message:g.message,stack:g.stack}),!(g||{}).useWebCache)return[3,9];h.label=6;case 6:return h.trys.push([6,8,,9]),[4,this._textManager._getCacheText(i)];case 7:return v=h.sent(),g.response.data=v&&"object"==typeof v?v:{},[3,9];case 8:return h.sent(),[3,9];case 9:return e?(e(g),[3,10]):[2,Promise.reject(g)];case 10:return[2]}}))}))},t}();var C=new(function(){function t(){}return t.prototype.get=function(t){if(localStorage&&localStorage.getItem)return function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(T){return t||void 0}}(localStorage.getItem(t))},t.prototype.set=function(t,e){localStorage&&localStorage.setItem&&localStorage.setItem(t,function(t){return JSON.stringify(t)}(e))},t}()),A=function(t){function e(e,n,i,r,o,s){var a=t.call(this,e)||this;return a.url=n,a.code=i,a.request=r,a.response=o,a.useWebCache=s,a.url=n,a.code=i,a.request=r,a.response=o,a.useWebCache=!!s,a}return r(e,t),e}(Error);function O(t,e){var n=e.timeout;return new Promise((function(e,i){var r=new XMLHttpRequest;r.open("GET",t),r.overrideMimeType("application/json; charset=utf-8"),r.withCredentials=!1,r.onreadystatechange=function(){if(r&&4===r.readyState&&(0!==r.status||r.responseURL&&0===r.responseURL.indexOf("file:"))){var n=function(t){try{return JSON.parse(t)}catch(e){return{}}}(r.responseText),o=function(t){return t.message&&"object"==typeof t.message?t:null}(n);if(r.status<200||r.status>=300||!o)return function(t,e,n,i){var r=(i||{}).message||"";r=r?", reason is: ".concat(r):"",e(new A("Request failed with status code "+t.status+r,n,null,t,{data:{}},!0))}(r,i,t,n),void(r=null);var s={data:o,status:r.status,statusText:r.statusText,request:r};e(s),r=null}},r.onerror=function(){i(new A("Network Error",t,null,r,{data:{}},!0)),r=null},r.timeout=n,r.ontimeout=function(){i(new A("timeout of "+n+"ms exceeded",t,"ECONNABORTED",r,{data:{}},!0)),r=null},r.send()}))}var R=function(t){function e(e){return e.store||(e.store=C),e.request||(e.request=O),t.call(this,e)||this}return r(e,t),e}(E),T=function(){return(T=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function P(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function D(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(P(arguments[e]));return t}var I,M,G,L,F=function(){function t(){this._hooks={},this._cache=[],this._hooksCache={}}return t.prototype.on=function(t,e){t&&e&&"function"==typeof e&&(this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(e))},t.prototype.once=function(t,e){var n=this;t&&e&&"function"==typeof e&&this.on(t,(function i(r){e(r),n.off(t,i)}))},t.prototype.off=function(t,e){if(t&&this._hooks[t]&&this._hooks[t].length)if(e){var n=this._hooks[t].indexOf(e);-1!==n&&this._hooks[t].splice(n,1)}else this._hooks[t]=[]},t.prototype.emit=function(t,e,n){if(n){if(!t)return;-1!==this._cache.indexOf(n)?this._emit(t,e):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(t)||(this._hooksCache[n][t]=[]),this._hooksCache[n][t].push(e))}else this._emit(t,e)},t.prototype._emit=function(t,e){t&&this._hooks[t]&&this._hooks[t].length&&D(this._hooks[t]).forEach((function(t){try{t(e)}catch(t){}}))},t.prototype.set=function(t){t&&-1===this._cache.indexOf(t)&&this._cache.push(t)},t}(),N=function(t){return null!=t&&"[object Object]"==Object.prototype.toString.call(t)},Z=(I=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return I+=1}),j=function(t){return function(t,e,n){if("string"==typeof t&&"number"==typeof n){var i,r=[];n=n<=25?n:n%25;var o=String.fromCharCode(n+97);i=t.split(o);for(var s=0;s<i.length;s++){var a=parseInt(i[s],n);a=1*a^64;var h=String.fromCharCode(a);r.push(h)}return r.join("")}}(t,0,25)},z=function(t){var e=document.createElement("a");return e.href=t,e},B=function(t){var e={};try{var n=z(t).search;(n=n.slice(1)).split("&").forEach((function(t){var n,i,r=t.split("=");r.length&&(n=r[0],i=r[1]);try{e[n]=decodeURIComponent(void 0===i?"":i)}catch(t){e[n]=i}}))}catch(t){}return e},U=function(t){for(var e=0,n=0,i=(t+="").length,r=0;r<i;r++)((e=31*e+t.charCodeAt(n++))>0x7fffffffffff||e<-0x800000000000)&&(e&=0xffffffffffff);return e<0&&(e+=0x7ffffffffffff),e},K=(function(t,e){var n;n=function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function r(){}function o(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=t({path:"/"},r.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(t){}n=i.write?i.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var h in o)o[h]&&(a+="; "+h,!0!==o[h]&&(a+="="+o[h].split(";")[0]));return document.cookie=e+"="+n+a}}function s(t,n){if("undefined"!=typeof document){for(var r={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var a=o[s].split("="),h=a.slice(1).join("=");n||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var c=e(a[0]);if(h=(i.read||i)(h,c)||e(h),n)try{h=JSON.parse(h)}catch(t){}if(r[c]=h,t===c)break}catch(t){}}return t?r[t]:r}}return r.set=o,r.get=function(t){return s(t,!1)},r.getJSON=function(t){return s(t,!0)},r.remove=function(e,n){o(e,"",t(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))},t.exports=n()}(M={exports:{}}),M.exports),H=function(t,e){try{return K.get(t,{domain:e||document.domain})}catch(t){return""}},W=function(t,e,n,i){try{var r=i||document.domain,o=+new Date+(n||6048e5);K.set(t,e,{expires:new Date(o),path:"/",domain:r})}catch(t){}},V=function(){function t(){this.cache={}}return t.prototype.setItem=function(t,e){this.cache[t]=e},t.prototype.getItem=function(t){return this.cache[t]},t.prototype.removeItem=function(t){this.cache[t]=void 0},t.prototype.getCookie=function(t,e){return H(t,e)},t.prototype.setCookie=function(t,e,n,i){W(t,e,n,i)},t}(),X={getItem:function(t){try{var e=localStorage.getItem(t),n=e;try{e&&"string"==typeof e&&(n=JSON.parse(e))}catch(t){}return n||{}}catch(t){}return{}},setItem:function(t,e){try{var n="string"==typeof e?e:JSON.stringify(e);localStorage.setItem(t,n)}catch(t){}},removeItem:function(t){try{localStorage.removeItem(t)}catch(t){}},getCookie:function(t,e){return H(t,e)},setCookie:function(t,e,n,i){W(t,e,n,i)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(T){return!1}}()},q={getItem:function(t){try{var e=sessionStorage.getItem(t),n=e;try{e&&"string"==typeof e&&(n=JSON.parse(e))}catch(t){}return n||{}}catch(t){}return{}},setItem:function(t,e){try{var n="string"==typeof e?e:JSON.stringify(e);sessionStorage.setItem(t,n)}catch(t){}},removeItem:function(t){try{sessionStorage.removeItem(t)}catch(t){}},getCookie:function(t,e){return H(t,e)},setCookie:function(t,e,n,i){W(t,e,n,i)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(T){return!1}}()},Y=function(){function t(t,e){this._storage=e&&"session"===e?q:!t&&X.isSupportLS?X:new V}return t.prototype.getItem=function(t){return this._storage.getItem(t)},t.prototype.setItem=function(t,e){this._storage.setItem(t,e)},t.prototype.getCookie=function(t,e){return this._storage.getCookie(t,e)},t.prototype.setCookie=function(t,e,n,i){this._storage.setCookie(t,e,n,i)},t.prototype.removeItem=function(t){this._storage.removeItem(t)},t}(),J=function(){function t(t,e,n){this.appid=t,this.domain=e,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return t.prototype.init=function(){var t=window.navigator.userAgent,e=window.navigator.language,n=document.referrer,i=n?z(n).hostname:"",r=B(window.location.href),o=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=function(t,e,n,i){var r=new Y(!1),o=new Y(!1,"session"),s=t?"_tea_utm_cache_"+t:"_tea_utm_cache",a=t?"_$utm_from_url_"+t:"_$utm_from_url",h={},c=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],l={ad_id:Number(e.ad_id)||void 0,campaign_id:Number(e.campaign_id)||void 0,creative_id:Number(e.creative_id)||void 0,utm_source:e.utm_source,utm_medium:e.utm_medium,utm_campaign:e.utm_campaign,utm_term:e.utm_term,utm_content:e.utm_content,tr_shareuser:e.tr_shareuser,tr_admaster:e.tr_admaster,tr_param1:e.tr_param1,tr_param2:e.tr_param2,tr_param3:e.tr_param3,tr_param4:e.tr_param4};try{var u=!1;for(var d in l)l[d]&&(-1!==c.indexOf(d)?(h.hasOwnProperty("tracer_data")||(h.tracer_data={}),h.tracer_data[d]=l[d]):h[d]=l[d],u=!0);if(u)o.setItem(a,"1"),r.setCookie(s,JSON.stringify(h),i,n);else{var f=r.getCookie(s,n);f&&(h=JSON.parse(f))}o.getItem(a)&&(h.hasOwnProperty("tracer_data")||(h.tracer_data={}),h.tracer_data.$utm_from_url=1)}catch(t){return l}return h}(this.appid,r,this.domain,this.cookie_expire);var s=this.browser(),a=this.os();return{browser:s.browser,browser_version:s.browser_version,platform:o,os_name:a.os_name,os_version:a.os_version,userAgent:t,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(a.os_name),language:e,referrer:n,referrer_host:i,utm:this.utm,latest_data:this.last(n,i)}},t.prototype.last=function(t,e){var n="",i="",r="",o=location.hostname,s=!1;if(t&&e&&o!==e){n=t,i=e,s=!0;var a=B(t);a.keyword&&(r=a.keyword)}return{$latest_referrer:n,$latest_referrer_host:i,$latest_search_keyword:r,isLast:s}},t.prototype.browser=function(){var t,e,n="",i=""+parseFloat(this.appVersion),r=this.userAgent;return-1!==r.indexOf("Edge")||-1!==r.indexOf("Edg")?(n="Microsoft Edge",-1!==r.indexOf("Edge")?(t=r.indexOf("Edge"),i=r.substring(t+5)):(t=r.indexOf("Edg"),i=r.substring(t+4))):-1!==(t=r.indexOf("MSIE"))?(n="Microsoft Internet Explorer",i=r.substring(t+5)):-1!==(t=r.indexOf("Lark"))?(n="Lark",i=r.substring(t+5,t+11)):-1!==r.indexOf("Chrome")?-1!==(t=r.indexOf("TTWebView"))?(n="TTWebView",i=r.substring(t+10,t+23)):(-1!==(t=r.indexOf("Chrome"))||-1!==(t=r.indexOf("Chrome")))&&(n="Chrome",i=r.substring(t+7)):-1!==r.indexOf("Safari")?-1!==(t=r.indexOf("Safari"))&&(n="Safari",i=r.substring(t+7),-1!==(t=r.indexOf("Version"))&&(i=r.substring(t+8))):-1!==(t=r.indexOf("Firefox"))&&(n="Firefox",i=r.substring(t+8)),-1!==(e=i.indexOf(";"))&&(i=i.substring(0,e)),-1!==(e=i.indexOf(" "))&&(i=i.substring(0,e)),-1!==(e=i.indexOf(")"))&&(i=i.substring(0,e)),{browser:n,browser_version:i}},t.prototype.os=function(){for(var t="",e="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],i=0;i<n.length;i++){var r=n[i];if(r.r.test(this.userAgent)){"Mac OS X"===(t=r.s)&&this.isNewIpad()&&(t="iOS");break}}var o,s,a=function(t,e){var n=t.exec(e);return n&&n[1]?n[1]:""},h=function(t,e){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+t+")","i").exec(e);return n?n.slice(1)[0]:""};switch(/Windows/.test(t)&&(e=a(/Windows (.*)/,t),t="windows"),t){case"Mac OS X":e=h("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),t="mac";break;case"Android":(s=a(/Android ([\.\_\d]+)/,o=this.userAgent))||(s=a(/Android\/([\.\_\d]+)/,o)),e=s,t="android";break;case"iOS":e=this.isNewIpad()?h("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(e=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?e[1]+"."+e[2]+"."+(0|e[3]):"",t="ios"}return{os_name:t,os_version:e}},t.prototype.getDeviceModel=function(t){var e="";try{if("android"===t)navigator.userAgent.split(";").forEach((function(t){t.indexOf("Build/")>-1&&(e=t.slice(0,t.indexOf("Build/")))}));else if("ios"===t||"mac"===t||"windows"===t)if(this.isNewIpad())e="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),i=n.indexOf(";");e=n.slice(0,i)}}catch(t){return e.trim()}return e.trim()},t.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},t}(),$={sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},Q={va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},tt={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k"},et={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az23z21z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az23z21z4az22z1gz1iz22z1mz1iz4az1az1mz1k"},nt="5.0.39_oversea",it=function(){function t(t,e){this.collector=t,this.config=e,this.eventNameWhiteList=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure"],this.paramsNameWhiteList=["$inactive","$inline","$target_uuid_list","$source_uuid","$is_spider","$source_id","$is_first_time","_staging_flag"],this.regStr=new RegExp("^[a-zA-Z0-9][a-z0-9A-Z_.-]{1,255}$")}return t.prototype.checkVerify=function(t){var e=this;if(!t||!t.length)return!1;var n=t[0];if(!n)return!1;var i=n.events,r=n.header;if(!i||!i.length)return!1;var o=!0;return i.forEach((function(t){if(!t)return o=!1,void(t.checkEvent="\u4e8b\u4ef6\u5f02\u5e38");e.checkEventName(t.event)||(o=!1,t.checkEvent="\u4e8b\u4ef6\u540d\u4e0d\u80fd\u4ee5 $ or __\u5f00\u5934"),e.checkEventParams(t.params)||(o=!1,t.checkParams="\u5c5e\u6027\u540d\u4e0d\u80fd\u4ee5 $ or __\u5f00\u5934")})),this.checkEventParams(r)||(o=!1),o},t.prototype.checkEventName=function(t){return!!t&&this.calculate(t,"event")},t.prototype.checkEventParams=function(t){var e=t;if("string"==typeof t&&(e=JSON.parse(e)),!Object.keys(e).length)return!0;for(var n in e)return!(!this.calculate(n,"params")||"string"==typeof e[n]&&e[n].length>1024&&(console.warn("params: "+n+" can not over 1024 byte, please check;"),1));return!0},t.prototype.calculate=function(t,e){return-1!==("event"===e?this.eventNameWhiteList:this.paramsNameWhiteList).indexOf(t)||!new RegExp("^\\$").test(t)&&!new RegExp("^__").test(t)||(console.warn(("event"===e?"event":"params")+" name: "+t+" can not start with $ or __, pleace check;"),!1)},t}();!function(t){t.Init="init",t.Config="config",t.Start="start",t.Ready="ready",t.TokenComplete="token-complete",t.TokenStorage="token-storage",t.TokenFetch="token-fetch",t.TokenError="token-error",t.ConfigUuid="config-uuid",t.ConfigWebId="config-webid",t.ConfigDomain="config-domain",t.CustomWebId="custom-webid",t.TokenChange="token-change",t.TokenReset="token-reset",t.ConfigTransform="config-transform",t.EnvTransform="env-transform",t.SessionReset="session-reset",t.SessionResetTime="session-reset-time",t.Event="event",t.Events="events",t.EventNow="event-now",t.CleanEvents="clean-events",t.BeconEvent="becon-event",t.SubmitBefore="submit-before",t.SubmitScuess="submit-scuess",t.SubmitAfter="submit-after",t.SubmitError="submit-error",t.SubmitVerify="submit-verify",t.Stay="stay",t.ResetStay="reset-stay",t.StayReady="stay-ready",t.SetStay="set-stay",t.RouteChange="route-change",t.RouteReady="route-ready",t.Ab="ab",t.AbVar="ab-var",t.AbAllVars="ab-all-vars",t.AbConfig="ab-config",t.AbExternalVersion="ab-external-version",t.AbVersionChangeOn="ab-version-change-on",t.AbVersionChangeOff="ab-version-change-off",t.AbOpenLayer="ab-open-layer",t.AbCloseLayer="ab-close-layer",t.AbReady="ab-ready",t.AbComplete="ab-complete",t.AbTimeout="ab-timeout",t.Profile="profile",t.ProfileSet="profile-set",t.ProfileSetOnce="profile-set-once",t.ProfileUnset="profile-unset",t.ProfileIncrement="profile-increment",t.ProfileAppend="profile-append",t.ProfileClear="profile-clear",t.Autotrack="autotrack",t.AutotrackReady="autotrack-ready",t.CepReady="cep-ready",t.TracerReady="tracer-ready",t.sessionRecord="session-record",t.SessionRecordStart="session-record-start",t.SessionRecordPause="session-record-pause",t.SessionRecordEnd="session-record-end",t.SessionRecordReport="session-record-report"}(G||(G={})),function(t){t.DEBUGGER_MESSAGE="debugger-message",t.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",t.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",t.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",t.DEBUGGER_MESSAGE_EVENT="debugger-message-event",t.DEVTOOL_WEB_READY="devtool-web-ready"}(L||(L={}));var rt=G,ot=void 0,st=(new Date).getTimezoneOffset(),at=parseInt(""+-st/60,10),ht=60*st,ct=function(){function t(t,e){this.is_first_time=!0,this.configPersist=!1,this.initConfig=e,this.collect=t;var n=new J(e.app_id,e.cookie_domain||"",e.cookie_expire||6048e5).init();this.eventCheck=new it(t,e);var i="__tea_cache_first_"+e.app_id;this.configKey="__tea_cache_config_"+e.app_id,this.sessionStorage=new Y(!1,"session"),this.localStorage=new Y(!1,"local"),this.channelUrl="tcpy"===e.channel_type||"ttp"===e.channel_type?{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"},e.configPersist&&(this.configPersist=!0,this.storage=1===e.configPersist?this.sessionStorage:this.localStorage);var r=this.localStorage.getItem(i);r&&1==r?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(i,"1")),this.envInfo={user:{user_unique_id:ot,user_type:ot,user_id:ot,user_is_auth:ot,user_is_login:ot,device_id:ot,web_id:ot,ip_addr_id:ot,user_unique_id_type:ot},header:{app_id:ot,app_name:ot,app_install_id:ot,install_id:ot,app_package:ot,app_channel:ot,app_version:ot,ab_version:ot,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:ot,traffic_type:ot,client_ip:ot,device_brand:ot,os_api:ot,access:ot,language:n.language,region:ot,app_language:ot,app_region:ot,creative_id:n.utm.creative_id,ad_id:n.utm.ad_id,campaign_id:n.utm.campaign_id,log_type:ot,rnd:ot,platform:n.platform,sdk_version:nt,sdk_lib:"js",province:ot,city:ot,timezone:at,tz_offset:ht,tz_name:ot,sim_region:ot,carrier:ot,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm.utm_term,utm_content:n.utm.utm_content,utm_source:n.utm.utm_source,utm_medium:n.utm.utm_medium,utm_campaign:n.utm.utm_campaign,tracer_data:JSON.stringify(n.utm.tracer_data),custom:{},wechat_unionid:ot,wechat_openid:ot}},this.ab_version="",this.ab_uuid_cache={},this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(n),this.initDomain(),this.initABData()}return t.prototype.initDomain=function(t){var e=this.initConfig.channel_domain;if(e)this.domain=e;else{var n=t||this.initConfig.channel,i=this.initConfig&&this.initConfig.channel_type?"tcpy"===this.initConfig.channel_type?tt[n]:et[n]:$[n];this.domain=j(i)}},t.prototype.setDomain=function(t){this.customDomain=!0,this.domain=t},t.prototype.getDomain=function(t){return this.customDomain||t&&this.initDomain(t),this.domain},t.prototype.initABData=function(){var t="__tea_sdk_ab_version_"+this.initConfig.app_id,e=null;if(this.initConfig.ab_cross){var n=this.localStorage.getCookie(t,this.initConfig.ab_cookie_domain);e=n?JSON.parse(n):null}else e=this.localStorage.getItem(t);this.setAbCache(e)},t.prototype.setAbCache=function(t){this.ab_cache=t},t.prototype.getAbCache=function(){return this.ab_cache},t.prototype.clearAbCache=function(){this.ab_cache={},this.ab_version=""},t.prototype.setAbVersion=function(t){this.ab_version=t},t.prototype.getAbVersion=function(){return this.ab_version},t.prototype.setAbUuidCache=function(t,e){var n=e||this.envInfo.user.user_unique_id;this.ab_uuid_cache[""+n]||(this.ab_uuid_cache[""+n]=[]),-1===this.ab_uuid_cache[""+n].indexOf(t)&&this.ab_uuid_cache[""+n].push(t)},t.prototype.getAbUuidCache=function(t){return this.ab_uuid_cache[""+t]},t.prototype.getUrl=function(t){var e="";switch(t){case"event":e=this.initConfig.report_url||this.channelUrl.REPORT_URL;break;case"webid":e=this.channelUrl.WEBID_URL;break;case"tobid":e=this.channelUrl.TOB_URL}var n="";return this.initConfig.caller&&(n="?sdk_version="+nt+"&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+e+n},t.prototype.setCustom=function(t){if(t&&t.latest_data&&t.latest_data.isLast)for(var e in delete t.latest_data.isLast,this.isLast=!0,t.latest_data)this.envInfo.header.custom[e]=t.latest_data[e]},t.prototype.setAppid=function(t){this.envInfo.header.app_id=t},t.prototype.set=function(t){var e=this;Object.keys(t).forEach((function(n){void 0!==t[n]&&null!==t[n]||e.delete(n);try{e.eventCheck.calculate(n,"config")}catch(T){}if("traffic_type"===n&&e.isLast&&(e.envInfo.header.custom.$latest_traffic_source_type=t[n]),"evtParams"===n)e.evtParams=T({},e.evtParams||{},t.evtParams||{});else if("_staging_flag"===n)e.evtParams=T({},e.evtParams||{},{_staging_flag:t._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof t[n])e.reportErrorCallback=t[n];else{var i="",r="";if(n.indexOf(".")>-1){var o=n.split(".");i=o[0],r=o[1]}i?"user"===i||"header"===i?e.envInfo[i][r]=t[n]:e.envInfo.header.custom[r]=t[n]:Object.hasOwnProperty.call(e.envInfo.user,n)?["user_type","ip_addr_id"].indexOf(n)>-1?e.envInfo.user[n]=t[n]?Number(t[n]):t[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?e.envInfo.user[n]=t[n]?String(t[n]):t[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?e.envInfo.user[n]=Boolean(t[n]):"device_id"===n&&(e.envInfo.user[n]=t[n]):Object.hasOwnProperty.call(e.envInfo.header,n)?e.envInfo.header[n]=t[n]:e.envInfo.header.custom[n]=t[n]}}))},t.prototype.get=function(t){try{return t?"evtParams"===t?this.evtParams:"reportErrorCallback"===t?this[t]:Object.hasOwnProperty.call(this.envInfo.user,t)?this.envInfo.user[t]:Object.hasOwnProperty.call(this.envInfo.header,t)?this.envInfo.header[t]:JSON.parse(JSON.stringify(this.envInfo[t])):JSON.parse(JSON.stringify(this.envInfo))}catch(t){console.log("get config stringify error "),this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message})}},t.prototype.setStore=function(t){try{if(!this.configPersist)return;var e=this.storage.getItem(this.configKey)||{};if(e&&Object.keys(t).length){var n=Object.assign(t,e);this.storage.setItem(this.configKey,n)}}catch(t){console.log("setStore error"),this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message})}},t.prototype.getStore=function(){try{if(!this.configPersist)return null;var t=this.storage.getItem(this.configKey)||{};return t&&Object.keys(t).length?t:null}catch(t){return this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),null}},t.prototype.delete=function(t){try{if(!this.configPersist)return;var e=this.storage.getItem(this.configKey)||{};e&&Object.hasOwnProperty.call(e,t)&&(delete e[t],this.storage.setItem(this.configKey,e))}catch(t){this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),console.log("delete error")}},t}(),lt=function(){function t(t,e){this.isLog=e||!1,this.name=t||""}return t.prototype.info=function(t){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[instance: "+this.name+"] "+t)},t.prototype.warn=function(t){this.isLog&&console.warn("[instance: "+this.name+"] "+t)},t.prototype.error=function(t){this.isLog&&console.error("[instance: "+this.name+"] "+t)},t.prototype.throw=function(t){throw this.error(this.name),new Error(t)},t}(),ut=function(){function t(){this.spiderBot=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Sogou News Spider","Yisouspider","Googlebot","Headless","Applebot","Bingbot","PetalBot"]}return t.prototype.checkSpider=function(t){if(!t.enable_spider)return!1;var e=window.navigator.userAgent;if(!e)return!0;var n=!1;return this.spiderBot.forEach((function(t){-1!==e.indexOf(t)&&(n=!0)})),n},t}(),dt=function(){function t(t,e){this.collect=t,this.native=e}var e=t.prototype;return e.bridgeInject=function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch(t){return console.log("AppLogBridge is not inject"),!1}},e.bridgeReady=function(){var t=this;return new Promise((function(e,n){try{t.bridgeInject()?AppLogBridge.hasStarted((function(t){console.log("AppLogBridge is started? : "+t),t?e(!0):n(!1)})):n(!1)}catch(t){console.log("AppLogBridge, error:"+JSON.stringify(t.stack)),n(!1)}}))},e.setNativeAppId=function(t){try{AppLogBridge.setNativeAppId(JSON.stringify(t)),console.log("change bridge appid, event report with appid: "+t)}catch(t){console.error("setNativeAppId error")}},e.setConfig=function(t){var e=this;try{Object.keys(t).forEach((function(n){"user_unique_id"===n?e.setUserUniqueId(t[n]):t[n]?e.addHeaderInfo(n,t[n]):e.removeHeaderInfo(n)}))}catch(t){console.error("setConfig error")}},e.setUserUniqueId=function(t){try{AppLogBridge.setUserUniqueId(t)}catch(t){console.error("setUserUniqueId error")}},e.addHeaderInfo=function(t,e){try{AppLogBridge.addHeaderInfo(t,e)}catch(t){console.error("addHeaderInfo error")}},e.setHeaderInfo=function(t){try{AppLogBridge.setHeaderInfo(JSON.stringify(t))}catch(t){console.error("setHeaderInfo error")}},e.removeHeaderInfo=function(t){try{AppLogBridge.removeHeaderInfo(t)}catch(t){console.error("removeHeaderInfo error")}},e.reportPv=function(t){this.onEventV3("predefine_pageview",t)},e.onEventV3=function(t,e){try{AppLogBridge.onEventV3(t,e),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge\u57cb\u70b9\u4e0a\u62a5",time:Date.now(),data:[{events:[{event:t,params:e}]}],code:200,status:"success"})}catch(t){console.error("onEventV3 error")}},e.profileSet=function(t){try{AppLogBridge.profileSet(t)}catch(t){console.error("profileSet error")}},e.profileSetOnce=function(t){try{AppLogBridge.profileSetOnce(t)}catch(t){console.error("profileSetOnce error")}},e.profileIncrement=function(t){try{AppLogBridge.profileIncrement(t)}catch(t){console.error("profileIncrement error")}},e.profileUnset=function(t){try{AppLogBridge.profileUnset(t)}catch(t){console.error("profileUnset error")}},e.profileAppend=function(t){try{AppLogBridge.profileAppend(t)}catch(t){console.error("profileAppend error")}},t}(),ft=500,pt=5005;function gt(t,e,n,i,r,o,s,a,h){try{var c=new XMLHttpRequest,l=a||"POST";c.open(l,""+t,!0),c.setRequestHeader("Content-Type","application/json; charset=utf-8"),s&&c.setRequestHeader("X-MCS-AppKey",""+s),i&&(c.withCredentials=!0),c.onload=function(){if(r){var t=null;if(c.responseText){try{t=JSON.parse(c.responseText)}catch(e){t={}}r(t,e)}}},n&&(c.timeout=n,c.ontimeout=function(){o&&o(e,pt)}),c.onerror=function(){c.abort(),o&&o(e,ft)},h?c.send(e):c.send(JSON.stringify(e))}catch(t){}}var vt=function(t,e,n,i){try{var r,o=t.match(/\/v\d\//);r=o?o[0]:-1!==t.indexOf("/v1/")?"/v1/":"/v2/";var s=t.split(r)[0];if(!s)return void i(t,e,4001);e.forEach((function(r){var o=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(e+="&"+n+"="+encodeURIComponent(JSON.stringify(t[n])));return"&"===e[0]?e.slice(1):e}(r),a=new Image(1,1);a.onload=function(){a=null,n&&n()},a.onerror=function(){a=null,i&&i(t,e,4e3)},a.src=s+"/gif?"+o}))}catch(n){i&&i(t,e,4002,n.message)}},mt=function(t,e,n,i,r,o,s,a){var h=window.navigator.userAgent;if(-1===window.navigator.appName.indexOf("Microsoft Internet Explorer")||-1===h.indexOf("MSIE 8.0")&&-1===h.indexOf("MSIE 9.0")){if(s)return window.navigator&&window.navigator.sendBeacon?void(window.navigator.sendBeacon(t,JSON.stringify(e))?r():o(t,e,4003)):void vt(t,e,r,o)}else vt(t,e,r,o);gt(t,e,n,i,r,o,"","",a)},yt=function(){function t(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return t.prototype.apply=function(t,e){var n=this;this.collect=t,this.config=e,this.configManager=t.configManager,this.eventCheck=new it(t,e),this.cacheStorgae=new Y(!0),this.localStorage=new Y(!1),this.maxReport=e.max_report||10,this.reportTime=e.reportTime||30,this.timeout=e.timeout||1e5,this.enable_ttwebid=e.enable_ttwebid,this.reportUrl=this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.collect.on(rt.Ready,(function(){n.reportAll(!1)})),this.collect.on(rt.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(rt.Event,(function(t){n.event(t)})),this.collect.on(rt.BeconEvent,(function(t){n.beconEvent(t)})),this.collect.on(rt.CleanEvents,(function(){n.reportAll(!1)})),this.linster()},t.prototype.linster=function(){var t=this;window.addEventListener("unload",(function(){t.reportAll(!0)}),!1),function(t){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",t,!1):window.addEventListener("beforeunload",t,!1)}((function(){t.reportAll(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t.reportAll(!0)}),!1)},t.prototype.reportAll=function(t){this.report(t),this.reportBecon()},t.prototype.event=function(t){var e=this;try{var n=D(t,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var i=this.reportTime;this.reportTimeout=setTimeout((function(){e.report(!1),e.reportTimeout=null}),i)}}catch(t){this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message})}},t.prototype.beconEvent=function(t){var e=D(t,this.cacheStorgae.getItem(this.beconKey)||[]);this.cacheStorgae.setItem(this.beconKey,e),this.collect.destroyInstance||this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))},t.prototype.reportBecon=function(){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.beconKey)||[];t&&t.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(t)),!0))}},t.prototype.report=function(t){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.eventKey)||[];e.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(e,t))}},t.prototype.sliceEvent=function(t,e){if(t.length>this.eventLimit)for(var n=0;n<t.length;n+=this.eventLimit){var i;i=t.slice(n,n+this.eventLimit);var r=this.split(this.merge(i));this.send(r,e)}else r=this.split(this.merge(t)),this.send(r,e)},t.prototype.handleRefer=function(){var t="";try{if(this.config.spa||this.config.autotrack){var e=this.localStorage.getItem(this.refer_key)||{};t=e.routeChange?e.refer_key:this.configManager.get("referrer")}else t=this.configManager.get("referrer")}catch(e){t=document.referrer}return t},t.prototype.merge=function(t,e){var n=this,i=this.configManager.get(),r=i.header,o=i.user;r.custom=JSON.stringify(r.custom),r.referrer=this.handleRefer();var s=this.configManager.get("evtParams"),a=this.configManager.get("user_unique_id_type"),h=t.map((function(t){try{Object.keys(s).length&&!e&&(t.params=T({},s,t.params)),a&&(t.params.$user_unique_id_type=a);var i=n.configManager.getAbCache(),r=n.configManager.getAbUuidCache(o.user_unique_id);if(i&&i.uuid&&i.uuid===o.user_unique_id){var h=n.configManager.getAbVersion();if(n.config.enable_ab_uuid){if(r&&r.length){var c=r.join(",");h&&h.includes(c)&&(t.ab_sdk_version=h)}}else h&&(t.ab_sdk_version=h)}return t.session_id=n.collect.sessionManager.getSessionId(),t.params=JSON.stringify(t.params),t}catch(T){return n.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:T.message}),t}})),c=JSON.parse(JSON.stringify({events:h,user:o,header:r}));c.local_time=Math.floor(Date.now()/1e3),c.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,c.verbose=1;var l=[];return l.push(c),l},t.prototype.split=function(t){return t.map((function(t){var e=[];return e.push(t),e}))},t.prototype.send=function(t,e){var n=this;t.length&&(this.config.disable_track_event||t.forEach((function(t){try{var i=JSON.parse(JSON.stringify(t));n.config.filter&&((i=n.config.filter(i))||console.warn("filter must return data !!")),n.collect.eventFilter&&i&&((i=n.collect.eventFilter(i))||console.warn("filterEvent api must return data !!"));var r=i||t,o=JSON.parse(JSON.stringify(r));if(n.eventCheck.checkVerify(o),!r.length)return;n.collect.emit(rt.SubmitBefore,r),n.collect.emit(rt.SubmitVerify,r),mt(n.reportUrl,r,n.timeout,n.enable_ttwebid,(function(t,e){t&&0!==t.e?(n.collect.emit(rt.SubmitError,{type:"f_data",eventData:e,errorCode:t.e,response:t}),n.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u5931\u8d25",time:Date.now(),data:o,code:t.e,failType:"\u6570\u636e\u5f02\u5e38",status:"fail"})):(n.collect.emit(rt.SubmitScuess,{eventData:e,res:t}),n.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:o,code:200,status:"success"}))}),(function(t,e){n.configManager.get("reportErrorCallback")(t,e),n.collect.emit(rt.SubmitError,{type:"f_net",eventData:t,errorCode:e}),n.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u7f51\u7edc\u5f02\u5e38",time:Date.now(),data:o,code:e,failType:"\u7f51\u7edc\u5f02\u5e38",status:"fail"})}),e,!1),n.collect.emit(rt.SubmitAfter,r)}catch(t){console.warn("something error, "+JSON.stringify(t.stack)),n.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message})}})))},t}(),_t=function(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)}().replace(/-/g,"").slice(0,19)},bt=function(){function t(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return t.prototype.apply=function(t,e){var n=this;this.collect=t,this.config=e,this.configManager=this.collect.configManager,this.storage=new Y(!1),this.tokenKey="__tea_cache_tokens_"+e.app_id,this.enable_ttwebid=e.enable_ttwebid,this.enableCustomWebid=e.enable_custom_webid,this.collect.on(rt.ConfigUuid,(function(t){n.setUuid(t)})),this.collect.on(rt.ConfigWebId,(function(t){n.setWebId(t)})),this.enableCookie=e.cross_subdomain,this.expiresTime=e.cookie_expire||6048e5,this.cookieDomain=e.cookie_domain||"",this.checkStorage()},t.prototype.checkStorage=function(){var t=this;if(this.enableCookie){var e=this.storage.getCookie(this.tokenKey,this.cookieDomain);this.cacheToken=e&&"string"==typeof e?JSON.parse(e):{}}else this.cacheToken=this.storage.getItem(this.tokenKey)||{};this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(rt.CustomWebId,(function(){t.tokenReady=!0,t.collect.emit(rt.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},t.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:_t(),user_unique_id:this.configManager.get("user_unique_id")||_t()}):this.remoteWebid()},t.prototype.checkEnv=function(){var t=window.navigator.userAgent;if(-1!==t.indexOf("miniProgram")||-1!==t.indexOf("MiniProgram")){var e=B(window.location.href);return!(!e||!e.Web_ID||(this.complete({web_id:""+e.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+e.Web_ID}),0))}return!1},t.prototype.remoteWebid=function(){var t=this,e=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u53d1\u8d77WEBID\u8bf7\u6c42",logType:"fetch",level:"info",time:Date.now(),data:n});var i=_t();gt(e,n,3e5,!1,(function(e){var n;e&&0===e.e?(n=e.web_id,t.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u6210\u529f",logType:"fetch",level:"info",time:Date.now(),data:e})):(n=i,t.collect.configManager.set({localWebId:i}),t.collect.emit(rt.TokenError),t.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u8fd4\u56de\u503c\u5f02\u5e38",logType:"fetch",level:"warn",time:Date.now(),data:e}),t.collect.logger.warn("appid: "+t.config.app_id+" get webid error, use local webid~")),t.complete({web_id:t.configManager.get("web_id")||n,user_unique_id:t.configManager.get("user_unique_id")||n})}),(function(){t.complete({web_id:t.configManager.get("web_id")||i,user_unique_id:t.configManager.get("user_unique_id")||i}),t.collect.configManager.set({localWebId:i}),t.collect.emit(rt.TokenError),t.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"WEBID\u8bf7\u6c42\u7f51\u7edc\u5f02\u5e38",logType:"fetch",level:"error",time:Date.now(),data:null}),t.collect.logger.warn("appid: "+t.config.app_id+", get webid error, use local webid~")}))},t.prototype.complete=function(t){var e=t.web_id,n=t.user_unique_id;t.timestamp=Date.now(),this.collect.configManager.set({web_id:e,user_unique_id:n}),this.setStorage(t),this.tokenReady=!0,this.collect.emit(rt.TokenComplete)},t.prototype.completeTtWid=function(t){var e=t.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||e)&&this.configManager.set({user_unique_id:n||e}),this.setStorage(t),this.tokenReady=!0,this.collect.emit(rt.TokenComplete)},t.prototype.setUuid=function(t){if(t&&-1===["null","undefined","Null","None"].indexOf(t)){var e=String(t),n=this.configManager.get("user_unique_id"),i=this.cacheToken&&this.cacheToken.user_unique_id;if(e===n&&e===i)return;this.configManager.set({user_unique_id:e}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=e,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(rt.TokenChange,"uuid"),this.collect.emit(rt.SessionReset)}else this.clearUuid()},t.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(rt.TokenReset))},t.prototype.setWebId=function(t){if(t&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==t&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?t:this.cacheToken.user_unique_id,this.cacheToken.web_id=t):(this.cacheToken={},this.cacheToken.web_id=t,this.cacheToken.user_unique_id=t),this.cacheToken.timestamp=Date.now();var e=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==e||(this.configManager.set({user_unique_id:t}),this.collect.emit(rt.TokenChange,"uuid")),e!==t&&(this.configManager.set({web_id:t}),this.collect.emit(rt.TokenChange,"webid")),this.setStorage(this.cacheToken)}},t.prototype.setStorage=function(t){t._type_=this.enableCustomWebid?"custom":"default",delete t["diss".split("").reverse().join("")],this.enableCookie||this.enable_ttwebid?(this.storage.setCookie(this.tokenKey,t,this.expiresTime,this.cookieDomain),this.enable_ttwebid&&(delete t.web_id,this.storage.setItem(this.tokenKey,t))):this.storage.setItem(this.tokenKey,t),this.cacheToken=t},t.prototype.getReady=function(){return this.tokenReady},t.prototype.getTobId=function(){var t=this,e=this.configManager.getUrl("tobid");return new Promise((function(n){gt(e,{app_id:t.config.app_id,user_unique_id:t.configManager.get("user_unique_id"),web_id:t.configManager.get("web_id"),user_unique_id_type:t.configManager.get("user_unique_id_type")},3e4,t.enable_ttwebid,(function(t){t&&0===t.e?n(t.tobid):n("")}),(function(){n("")}))}))},t}(),St=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},wt=function(){function t(){}return t.prototype.apply=function(t,e){var n=this;this.collect=t,this.storage=new Y(!1,"session"),this.sessionKey="__tea_session_id_"+e.app_id,this.expireTime=e.expireTime||18e5,this.disableSession=e.disable_session,this.disableSession||(this.setSessionId(),this.collect.on(rt.SessionReset,(function(){n.resetSessionId()})),this.collect.on(rt.SessionResetTime,(function(){n.updateSessionIdTime()})))},t.prototype.updateSessionIdTime=function(){var t=this.storage.getItem(this.sessionKey);if(t&&t.sessionId){var e=t.timestamp;Date.now()-e>this.expireTime?t={sessionId:St(),timestamp:Date.now()}:t.timestamp=Date.now(),this.storage.setItem(this.sessionKey,t),this.resetExpTime()}},t.prototype.setSessionId=function(){var t=this,e=this.storage.getItem(this.sessionKey);e&&e.sessionId?e.timestamp=Date.now():e={sessionId:St(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e),this.sessionExp=setInterval((function(){t.checkEXp()}),this.expireTime)},t.prototype.getSessionId=function(){var t=this.storage.getItem(this.sessionKey);return this.disableSession?"":t&&t.sessionId?t.sessionId:""},t.prototype.resetExpTime=function(){var t=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){t.checkEXp()}),this.expireTime))},t.prototype.resetSessionId=function(){var t={sessionId:St(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,t)},t.prototype.checkEXp=function(){var t=this.storage.getItem(this.sessionKey);t&&t.sessionId&&Date.now()-t.timestamp+30>=this.expireTime&&(t={sessionId:St(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t))},t}(),xt=function(){function t(t,e){this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,this.collect=t,this.config=e,this.app_id=e.app_id,this.filterEvent=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"],e.enable_debug&&this.load()}return t.prototype.loadScript=function(t){try{var e=document.createElement("script");e.src=t,e.onerror=function(){console.log("load DevTool render fail")},e.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(e)}catch(t){console.log("devTool load fail, "+t.message)}},t.prototype.load=function(){try{this.loadBaseInfo(),this.loadHook();var t=B(window.location.href);if(!t.open_devtool_web||parseInt(t.app_id)!==this.app_id)return;this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(t){console.log("debug fail, "+t.message)}},t.prototype.loadDevTool=function(){this.loadScript("https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/devtool/debug-web.js")},t.prototype.loadBaseInfo=function(){var t=this;this.info=[{title:"\u57fa\u672c\u4fe1\u606f",type:1,infoName:{app_id:this.config.app_id,channel:this.config.channel,\u4e0a\u62a5\u57df\u540d:this.collect.configManager.getDomain(),SDK\u7248\u672c:nt,SDK\u5f15\u5165\u65b9\u5f0f:"npm"}},{title:"\u7528\u6237\u4fe1\u606f",type:2,infoName:{uuid:this.collect.configManager.get("user").user_unique_id||"",web_id:this.collect.configManager.get("user").web_id||"",ssid:"\u70b9\u51fb\u83b7\u53d6SSID"}},{title:"\u516c\u5171\u53c2\u6570\u4fe1\u606f",type:2,infoName:{\u6d4f\u89c8\u5668:this.collect.configManager.get("browser"),\u6d4f\u89c8\u5668\u7248\u672c:this.collect.configManager.get("browser_version"),\u5e73\u53f0:this.collect.configManager.get("platform"),\u8bbe\u5907\u578b\u53f7:this.collect.configManager.get("device_model"),\u64cd\u4f5c\u7cfb\u7edf:this.collect.configManager.get("os_name"),\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c:this.collect.configManager.get("os_version"),\u5c4f\u5e55\u5206\u8fa8\u7387:this.collect.configManager.get("os_version"),\u6765\u6e90:this.collect.configManager.get("referrer"),\u81ea\u5b9a\u4e49\u4fe1\u606f:""}},{title:"\u914d\u7f6e\u4fe1\u606f",type:3,infoName:{\u5168\u57cb\u70b9:!!this.config.autotrack,\u505c\u7559\u65f6\u957f:!!this.config.enable_stay_duration}},{title:"A/B\u914d\u7f6e\u4fe1\u606f",type:4,infoName:{"A/B\u5b9e\u9a8c":!!this.config.enable_ab_test}},{title:"\u5ba2\u6237\u7aef\u4fe1\u606f",type:3,infoName:{\u6253\u901a\u5f00\u5173:!!this.config.Native}}],this.log=[],this.event=[],this.collect.on(rt.Ready,(function(){t.info[1].infoName.uuid=t.collect.configManager.get("user").user_unique_id,t.info[1].infoName.web_id=t.collect.configManager.get("user").web_id,t.info[2].infoName["\u81ea\u5b9a\u4e49\u4fe1\u606f"]=JSON.stringify(t.collect.configManager.get("custom")),t.config.enable_ab_test&&(t.info[4].infoName["\u5df2\u66dd\u5149VID"]=t.collect.configManager.getAbVersion(),t.info[4].infoName["A/B\u57df\u540d"]=t.config.ab_channel_domain||j(Q[t.config.channel]),t.info[4].infoName["\u5168\u90e8\u914d\u7f6e"]=t.collect.configManager.getAbData()),t.config.Native&&(t.info[5].infoName["\u662f\u5426\u6253\u901a"]=!!t.collect.bridgeReport)}))},t.prototype.loadHook=function(){var t=this;this.collect.on(L.DEBUGGER_MESSAGE,(function(e){switch(e.type){case L.DEBUGGER_MESSAGE_SDK:var n={time:e.time,type:e.logType||"sdk",level:e.level,name:e.info,show:!0,levelShow:!0,needDesc:!!e.data};return e.data&&(n.desc={content:JSON.stringify(e.data)}),t.updateLog(n),e.secType&&"AB"===e.secType?(t.info[4].infoName["\u5df2\u66dd\u5149VID"]=t.collect.configManager.getAbVersion(),t.info[4].infoName["\u5168\u90e8\u914d\u7f6e"]=t.collect.configManager.getAbData()):"USER"===e.secType&&(t.info[1].infoName.uuid=t.collect.configManager.get("user").user_unique_id,t.info[1].infoName.web_id=t.collect.configManager.get("user").web_id),void t.updateInfo();case L.DEBUGGER_MESSAGE_EVENT:if(e.data&&e.data.length){var i=e.data[0],r=i.events;if(!r.length)return;r.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.success=e.status,n.type=-1!==t.filterEvent.indexOf(n.event)?"sdk":"cus",n.type=t.collect.bridgeReport?"bridge":n.type,n.info="","fail"===e.status&&(n.info={message:"code: "+e.code+"\uff0c msg: "+e.failType})})),t.updateEvent(i)}return}}))},t.prototype.addLintener=function(){var t=this;window.addEventListener("message",(function(e){if(e.origin===location.origin){if(e&&e.data&&"devtool:web:ready"===e.data.type){if(t.devToolOrigin=e.origin,t.devToolReady=!0,t.sendAlready)return;console.log("inittttt"),t.sendData("devtool:web:init",{info:t.info,log:t.log,event:t.event}),t.sendAlready=!0}e&&e.data&&"devtool:web:ssid"===e.data.type&&t.collect.getToken((function(e){t.info[1].infoName.ssid=e.tobid,t.updateInfo()}))}}))},t.prototype.sendData=function(t,e){try{var n={type:t,payload:e};(window.opener||window.parent).postMessage(n,this.devToolOrigin)}catch(t){}},t.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},t.prototype.updateLog=function(t){this.devToolReady?this.sendData("devtool:web:log",t):this.log.push(t)},t.prototype.updateEvent=function(t){this.devToolReady?this.sendData("devtool:web:event",t):this.event.push(t)},t.prototype.loadDebuggerModule=function(){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.appendChild(document.createTextNode("#debugger-applog-web {\n      position: absolute;\n      width: 90px;\n      height: 30px;\n      background: #23c243;\n      border-radius: 6px;\n      color: #fff;\n      font-size: 12px;\n      bottom: 5%;\n      right: 10%;\n      text-align: center;\n      line-height: 30px;\n      cursor: pointer;\n      z-index:100;\n    }")),t.appendChild(e);var n=document.createElement("div");n.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web">AppLog\u8c03\u8bd5</div>';var i=document.createElement("div");i.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(n),document.getElementsByTagName("body")[0].appendChild(i),document.getElementById("debugger-applog-web").addEventListener("click",(function(){(window.opener||window.parent).postMessage({type:"devtool:web:open-draw"},location.origin)}))},t}(),kt=function(){function t(t){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroyInstance=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.name=t,this.hook=new F,this.remotePlugin=new Map,this.Types=rt,this.adapters.fetch=gt,this.adapters.storage=Y}return t.usePlugin=function(e,n,i){if(n){for(var r=!1,o=0,s=t.plugins.length;o<s;o++)if(t.plugins[o].name===n){t.plugins[o].plugin=e,t.plugins[o].options=i||{},r=!0;break}r||t.plugins.push({name:n,plugin:e,options:i})}else t.plugins.push({plugin:e})},t.prototype.usePlugin=function(t,e,n){t&&("full"===this.loadType&&this.remotePlugin.get(t)?console.info("your sdk version has "+t+" already ~"):e?"string"==typeof e?this.remotePlugin.get(t)||this.remotePlugin.set(t,{src:e,call:n}):this.remotePlugin.get(t)||this.remotePlugin.set(t,{instance:e}):this.remotePlugin.get(t)||this.remotePlugin.set(t,"sdk"))},t.prototype.init=function(e){var n,i,r=this;try{n=JSON.parse(JSON.stringify(e))}catch(t){n=e}if(this.logger=new lt(this.name,n.log),this.inited)this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!");else if(n&&N(n))if(n.app_id&&"number"==typeof(i=n.app_id)&&!isNaN(i))if(!n.app_key||function(t){return"string"==typeof t}(n.app_key)){var o=n.channel_type&&"tcpy"===n.channel_type?["sg","va","in"]:["sg","va"];n.channel_domain||-1!==o.indexOf(n.channel)||(this.logger.warn("channel must "+o.join(" ,")+"!!!"),n.channel="sg"),this.spider=new ut,this.spider.checkSpider(n)?this.logger.warn("The current environment may be a spider, can not report!"):(this.logger=new lt(this.name,n.log),this.appBridge=new dt(this,n.enable_native),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new ct(this,n),this.debugger=new xt(this,n),this.initConfig=n,this.emit(rt.Init),this.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cINIT",data:n,level:"info",time:Date.now()}),n.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.setAppid(n.app_id),this.eventManager=new yt,this.tokenManager=new bt,this.sessionManager=new wt,Promise.all([new Promise((function(t){r.once(rt.TokenComplete,(function(){t(!0)}))})),new Promise((function(t){r.once(rt.Start,(function(){t(!0)}))}))]).then((function(){try{t.plugins.reduce((function(t,e){var n=e.plugin,i=e.options,o=Object.assign(r.initConfig,i),s=new n;return s.apply(r,o),t.push(s),t}),r.pluginInstances)}catch(e){console.warn("load plugin error, "+e.message),r.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}r.sdkReady=!0,r.emit(rt.Ready),r.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u521d\u59cb\u5316\u5b8c\u6210",time:Date.now(),level:"info",data:r.configManager.get("user")}),r.logger.info("appid: "+n.app_id+", userInfo:"+JSON.stringify(r.configManager.get("user"))),r.logger.info("appid: "+n.app_id+", sdk is ready, version is "+nt+", you can report now !!!"),n.disable_auto_pv&&(r.disableAutoPageView=!0);try{("full"===r.loadType&&n.enable_ab_test||n.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){r.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message})}r.pageView(),r.on(rt.TokenChange,(function(t){"webid"===t&&r.pageView(),r.logger.info("appid: "+n.app_id+" token change, new userInfo:"+JSON.stringify(r.configManager.get("user"))),r.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u8bbe\u7f6e\u4e86\u7528\u6237\u4fe1\u606f",time:Date.now(),secType:"USER",level:"info",data:r.configManager.get("user")})})),r.on(rt.TokenReset,(function(){r.logger.info("appid: "+n.app_id+" token reset, new userInfo:"+JSON.stringify(r.configManager.get("user"))),r.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u91cd\u7f6e\u4e86\u7528\u6237\u4fe1\u606f",time:Date.now(),secType:"USER",level:"info",data:r.configManager.get("user")})})),r.on(rt.RouteChange,(function(t){t.init||n.disable_route_report||r.pageView()}))})),this.tokenManager.apply(this,n),this.eventManager.apply(this,n),this.sessionManager.apply(this,n)),this.inited=!0)}else this.logger.warn("app_key param is error, must be string, please check!");else this.logger.warn("app_id param is error, must be number, please check!");else this.logger.warn("init params error,please check")},t.prototype.config=function(t){if(this.inited)if(t&&N(t)){var e;try{e=JSON.parse(JSON.stringify(e))}catch(T){e=t}if(this.bridgeReport)this.appBridge.setConfig(e);else{e._staging_flag&&1===e._staging_flag&&(this.staging=!0),e.disable_auto_pv&&(this.disableAutoPageView=!0,delete e.disable_auto_pv);var n=T({},e);if(this.initConfig&&this.initConfig.configPersist){var i=this.configManager.getStore();i&&(n=Object.assign(i,e)),this.configManager.setStore(e)}n.web_id,n.user_unique_id;var r=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&(n[i[r]]=t[i[r]])}return n}(n,["web_id","user_unique_id"]);n.hasOwnProperty("web_id")&&this.emit(rt.ConfigWebId,n.web_id),n.hasOwnProperty("user_unique_id")&&this.emit(rt.ConfigUuid,n.user_unique_id),this.configManager.set(r),this.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cCONFIG",level:"info",time:Date.now(),data:n})}}else this.logger.warn("config params is error, please check");else this.logger.warn("config must be use after function init")},t.prototype.setDomain=function(t){this.configManager&&this.configManager.setDomain(t),this.emit(rt.ConfigDomain)},t.prototype.getConfig=function(t){return this.configManager.get(t)},t.prototype.send=function(){this.start()},t.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(rt.Start),this.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cSTART",level:"info",time:Date.now()}),this.bridgeReport&&(this.pageView(),this.emit(rt.Ready)))},t.prototype.event=function(t,e){var n=this;try{var i=[];if(Array.isArray(t))t.forEach((function(t){var e=n.processEvent(t[0],t[1]||{});e&&i.push(e)}));else{var r=this.processEvent(t,e);if(!r)return;i.push(r)}this.bridgeReport?i.forEach((function(t){var e=t.event,i=t.params;n.appBridge.onEventV3(e,JSON.stringify(i))})):i.length&&(this.emit(rt.Event,i),this.emit(rt.SessionResetTime))}catch(t){this.logger.warn("something error, please check"),this.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message})}},t.prototype.beconEvent=function(t,e){if(Array.isArray(t))this.logger.warn("beconEvent not support batch report, please check");else{var n=[],i=this.processEvent(t,e||{});i&&(n.push(i),n.length&&(this.emit(rt.BeconEvent,n),this.emit(rt.SessionResetTime)))}},t.prototype.processEvent=function(t,e){void 0===e&&(e={});try{if(!t)return this.logger.warn("eventName is null\uff0c please check"),null;var n=t;/^event\./.test(t)&&(n=t.slice(6));var i=e;"object"!=typeof i&&(i={}),i.profile?delete i.profile:i.event_index=Z();var r=void 0;return i.local_ms?(r=i.local_ms,delete i.local_ms):r=+new Date,{event:n,params:i,local_time_ms:r,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(n){return this.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:n.message}),{event:t,params:e}}},t.prototype.filterEvent=function(t){this.eventFilter=t},t.prototype.on=function(t,e){this.hook.on(t,e)},t.prototype.once=function(t,e){this.hook.once(t,e)},t.prototype.off=function(t,e){this.hook.off(t,e)},t.prototype.emit=function(t,e,n){this.hook.emit(t,e,n)},t.prototype.set=function(t){this.hook.set(t)},t.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},t.prototype.predefinePageView=function(t){if(void 0===t&&(t={}),this.inited){var e={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+(this.configManager&&this.configManager.is_first_time||!1)},n=T({},e,t);this.event("predefine_pageview",n)}else this.logger.warn("predefinePageView should call after init")},t.prototype.clearEventCache=function(){this.emit(rt.CleanEvents)},t.prototype.setWebIDviaUnionID=function(t){if(t){var e=U(t);this.config({web_id:""+e,wechat_unionid:t}),this.emit(rt.CustomWebId)}},t.prototype.setWebId=function(t){this.config({web_id:""+t})},t.prototype.setWebIDviaOpenID=function(t){if(t){var e=U(t);this.config({web_id:""+e,wechat_openid:t}),this.emit(rt.CustomWebId)}},t.prototype.setNativeAppId=function(t){this.bridgeReport&&this.appBridge.setNativeAppId(t)},t.prototype.resetStayDuration=function(t,e,n){this.emit(rt.ResetStay,{url_path:t,title:e,url:n},rt.Stay)},t.prototype.resetStayParams=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=""),void 0===n&&(n=""),this.emit(rt.SetStay,{url_path:t,title:e,url:n},rt.Stay)},t.prototype.getToken=function(t,e){var n=this;if(this.inited){var i=!1,r=function(e){if(!i){i=!0;var r=n.configManager.get().user;return e&&(r.tobid=e,r["diss".split("").reverse().join("")]=e),t(T({},r))}},o=function(){n.tokenManager.getTobId().then((function(t){r(t)}))};this.sdkReady?o():(e&&setTimeout((function(){r()}),e),this.on(rt.Ready,(function(){o()})))}else this.logger.warn("predefinePageView should call after init")},t.prototype.profileSet=function(t){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(t)):this.emit(rt.ProfileSet,t,rt.Profile),this.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileSet",level:"info",time:Date.now(),data:t})},t.prototype.profileSetOnce=function(t){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(t)):this.emit(rt.ProfileSetOnce,t,rt.Profile),this.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileSetOnce",level:"info",time:Date.now(),data:t})},t.prototype.profileIncrement=function(t){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(t)):this.emit(rt.ProfileIncrement,t,rt.Profile),this.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileIncrement",level:"info",time:Date.now(),data:t})},t.prototype.profileUnset=function(t){this.bridgeReport?this.appBridge.profileUnset(t):this.emit(rt.ProfileUnset,t,rt.Profile),this.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileUnset",level:"info",time:Date.now(),data:t})},t.prototype.profileAppend=function(t){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(t)):this.emit(rt.ProfileAppend,t,rt.Profile),this.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"SDK \u6267\u884cprofileAppend",level:"info",time:Date.now(),data:t})},t.prototype.setExternalAbVersion=function(t){this.emit(rt.AbExternalVersion,"string"==typeof t&&t?(""+t).trim():null,rt.Ab)},t.prototype.getVar=function(t,e,n,i){this.emit(rt.AbVar,{name:t,defaultValue:e,callback:n,uuid:i},rt.Ab)},t.prototype.getABconfig=function(t,e){this.emit(rt.AbConfig,{params:t,callback:e},rt.Ab)},t.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},t.prototype.onAbSdkVersionChange=function(t){var e=this;return this.emit(rt.AbVersionChangeOn,t,rt.Ab),function(){e.emit(rt.AbVersionChangeOff,t,rt.Ab)}},t.prototype.offAbSdkVersionChange=function(t){this.emit(rt.AbVersionChangeOff,t,rt.Ab)},t.prototype.openOverlayer=function(){this.emit(rt.AbOpenLayer,"",rt.Ab)},t.prototype.closeOverlayer=function(){this.emit(rt.AbCloseLayer,"",rt.Ab)},t.prototype.getAllVars=function(t){this.emit(rt.AbAllVars,t,rt.Ab)},t.prototype.autoInitializationRangers=function(t){var e,n,i,r,o,s,a,h;n=(e=t).app_id,i=e.channel,r=e.onTokenReady,o=$[i]+"/webid",s=new Y(!1),a="__tea_cache_tokens_"+n,(h=s.getItem(a))&&h.web_id?r(h.web_id):mt(o,{app_key:"",app_id:n,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer},3e3,!1,(function(t){if(t&&0===t.e){r(t.web_id);var e={web_id:t.web_id,user_unique_id:t.web_id,timestamp:Date.now()};s.setItem(a,e)}else r("")}),(function(){r("")}),!0)},t.prototype.destoryInstace=function(){this.destroyInstance||(this.destroyInstance=!0,this.off(rt.TokenComplete))},t.plugins=[],t}(),Et=function(){function t(){}return t.prototype.apply=function(t,e){var n=this,i=t.adapters.fetch;if(e.event_verify_url)if("string"==typeof e.event_verify_url){if(this.url=e.event_verify_url+"/v1/list_test",this.url){var r=t.Types;t.on(r.SubmitBefore,(function(t){i(n.url,t,3e4)}))}}else console.log("please use correct et_test url")},t}(),Ct=function(){function t(){}return t.prototype.apply=function(t,e){var n=this;this.collect=t,this.config=e,this.duration=6e4,this.reportUrl=t.configManager.getDomain()+"/profile/list";var i=t.Types,r=t.adapters.fetch;this.eventCheck=new it(t,e),this.fetch=r,this.cache={},this.collect.on(i.ProfileSet,(function(t){n.setProfile(t)})),this.collect.on(i.ProfileSetOnce,(function(t){n.setOnceProfile(t)})),this.collect.on(i.ProfileUnset,(function(t){n.unsetProfile(t)})),this.collect.on(i.ProfileIncrement,(function(t){n.incrementProfile(t)})),this.collect.on(i.ProfileAppend,(function(t){n.appendProfile(t)})),this.collect.on(i.ProfileClear,(function(){n.cache={}})),this.ready(i.Profile)},t.prototype.ready=function(t){var e=this;if(this.collect.set(t),this.collect.hook._hooksCache.hasOwnProperty(t)){var n=this.collect.hook._hooksCache[t];if(!Object.keys(n).length)return;var i=function(t){n[t].length&&n[t].forEach((function(n){e.collect.hook.emit(t,n)}))};for(var r in n)i(r)}},t.prototype.report=function(t,e){void 0===e&&(e={});try{if(this.config.disable_track_event)return;var n=[];n.push(this.collect.processEvent(t,e));var i=this.collect.eventManager.merge(n);this.fetch(this.reportUrl,i),this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_EVENT,info:"\u57cb\u70b9\u4e0a\u62a5\u6210\u529f",time:Date.now(),data:i,code:200,status:"success"})}catch(t){this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message})}},t.prototype.setProfile=function(t){var e=this.formatParams(t);e&&Object.keys(e).length&&(this.pushCache(e),this.report("__profile_set",T({},e,{profile:!0})))},t.prototype.setOnceProfile=function(t){var e=this.formatParams(t,!0);e&&Object.keys(e).length&&(this.pushCache(e),this.report("__profile_set_once",T({},e,{profile:!0})))},t.prototype.incrementProfile=function(t){t?this.report("__profile_increment",T({},t,{profile:!0})):console.warn("please check the params, must be object!!!")},t.prototype.unsetProfile=function(t){if(t){var e={};e[t]="1",this.report("__profile_unset",T({},e,{profile:!0}))}else console.warn("please check the key, must be string!!!")},t.prototype.appendProfile=function(t){if(t){var e={};for(var n in t)"string"==typeof t[n]||"Array"===Object.prototype.toString.call(t[n]).slice(8,-1)?e[n]=t[n]:console.warn("please check the value of param: "+n+", must be string or array !!!");Object.keys(e).length&&this.report("__profile_append",T({},e,{profile:!0}))}else console.warn("please check the params, must be object!!!")},t.prototype.pushCache=function(t){var e=this;Object.keys(t).forEach((function(n){e.cache[n]={val:e.clone(t[n]),timestamp:Date.now()}}))},t.prototype.formatParams=function(t,e){var n=this;void 0===e&&(e=!1);try{if(!t||"[object Object]"!==Object.prototype.toString.call(t))return void console.warn("please check the params type, must be object !!!");var i={};for(var r in t)"string"==typeof t[r]||"number"==typeof t[r]||"Array"===Object.prototype.toString.call(t[r]).slice(8,-1)?i[r]=t[r]:console.warn("please check the value of params:"+r+", must be string,number,Array !!!");var o=Object.keys(i);if(!o.length)return;if(!this.eventCheck.checkEventParams(i))return;var s=Date.now();return o.filter((function(i){var r=n.cache[i];return e?!r:!(r&&n.compare(r.val,t[i])&&s-r.timestamp<n.duration)})).reduce((function(t,e){return t[e]=i[e],t}),{})}catch(t){this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),console.log("error")}},t.prototype.compare=function(t,e){try{return JSON.stringify(t)===JSON.stringify(e)}catch(t){return this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),!1}},t.prototype.clone=function(e){try{return JSON.parse(JSON.stringify(e))}catch(t){return this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),e}},t.prototype.unReady=function(){console.warn("sdk is not ready, please use this api after start")},t}(),At=function(){function t(){var t=this;this.setInterval=function(){t.clearIntervalFunc=function(t,e){void 0===t&&(t=function(){}),void 0===e&&(e=1e3);var n,i=Date.now()+e;return n=window.setTimeout((function r(){var o=Date.now()-i;t(),i+=e,n=window.setTimeout(r,Math.max(0,e-o))}),e),function(){window.clearTimeout(n)}}((function(){t.isSessionhasEvent&&t.endCurrentSession()}),t.sessionInterval)},this.clearInterval=function(){t.clearIntervalFunc&&t.clearIntervalFunc()}}return t.prototype.apply=function(t,e){var n=this;if(this.collect=t,!e.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var i=this.collect.Types;this.collect.on(i.SessionReset,(function(){n.process()}))}},t.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},t.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var t=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-t>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},t}(),Ot=function(){function t(){}return t.prototype.apply=function(t,e){var n=this;if(this.collect=t,this.config=e,!this.config.channel_domain&&!e.disable_track_event&&!e.disable_sdk_monitor){var i=t.adapters.fetch;this.fetch=i,this.url=t.configManager.getUrl("event");var r=this.collect.Types;this.collect.on(r.Ready,(function(){n.sdkOnload()})),this.collect.on(r.SubmitError,(function(t){var e=t.type,i=t.eventData,r=t.errorCode;"f_data"===e&&n.sdkError(i,r)}))}},t.prototype.sdkOnload=function(){var t=this;try{var e=this.collect.configManager.get(),n=e.header,i=e.user,r=n.app_id,o=n.app_name,s=n.sdk_version,a=i.web_id,h={events:[{event:"onload",params:JSON.stringify({app_id:r,app_name:o||"",sdk_version:s,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC_OVERSEA"}),local_time_ms:Date.now()}],user:{user_unique_id:a},header:{}};setTimeout((function(){t.fetch(t.url,[h],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(t){}},t.prototype.sdkError=function(t,e){var n=this;try{var i=t[0],r=i.user,o=i.header,s=[];t.forEach((function(t){t.events.forEach((function(t){s.push(t)}))}));var a={events:s.map((function(t){return{event:"on_error",params:JSON.stringify({error_code:e,app_id:o.app_id,app_name:o.app_name||"",error_event:t.event,sdk_version:o.sdk_version,local_time_ms:t.local_time_ms,tea_event_index:Date.now(),params:t.params,header:JSON.stringify(o),user:JSON.stringify(r)}),local_time_ms:Date.now()}})),user:{user_unique_id:r.user_unique_id},header:{}};setTimeout((function(){n.fetch(n.url,[a],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(t){}},t}(),Rt={autotrack:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},cep:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/cep.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/cep.js"},object:"LogCep"},tracer:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/tracer.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/tracer.js"},object:"LogTracer"},visual:{src:{sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/visual.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/visual.js"},object:"LogVisual"}},Tt="undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,Pt=function(){function t(){}return t.prototype.apply=function(t,e){this._plugin={},this.config=e,this.collect=t,this.channel=e.channel||"cn",this.loadExtend()},t.prototype.loadExtend=function(){var t=this;try{this.collect.remotePlugin.forEach((function(e,n){if("sdk"===e)if(Rt.hasOwnProperty(n)){var i=Rt[n].object,r=""+Rt[n].src[t.channel];t.exist(n,i,r)}else console.warn("your "+n+" is not exist\uff0cplease check plugin name");else"object"==typeof e&&(e.src?t.exist(n,e.call,e.src):t.process(n,e.instance,"INSTANCE"))}))}catch(t){this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message}),console.log("load extend error")}},t.prototype.exist=function(t,e,n){var i=this;Tt[e]?(this.process(t,Tt[e]),console.log("\u5df2\u6709"+t+"\u63d2\u4ef6\uff0c\u907f\u514d\u91cd\u590d\u52a0\u8f7d~")):this.loadPlugin(t,n,(function(){i.process(t,Tt[e]),console.log(" %c %s %s %s","color: yellow; background-color: black;","\u2013","load plugin:"+t+" success","-")}),(function(){console.log(" %c %s %s %s","color: red; background-color: yellow;","\u2013","load plugin:"+t+" error","-")}))},t.prototype.process=function(t,e,n){try{if(n){var i=new e;i.apply&&i.apply(this.collect,this.config),console.log("excude "+t+" success")}else e&&e(this.collect,this.config)}catch(e){this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:e.message}),console.log("excude "+t+" error, message:"+e.message)}},t.prototype.loadPlugin=function(t,e,n,i){var r=this;try{var o=document.createElement("script");o.src=e,this._plugin[t]||(this._plugin[t]=[]),this._plugin[t].push(n),o.onerror=function(){i(e)},o.onload=function(){r._plugin[t].forEach((function(t){t()}))},document.getElementsByTagName("head")[0].appendChild(o)}catch(t){this.collect.emit(L.DEBUGGER_MESSAGE,{type:L.DEBUGGER_MESSAGE_SDK,info:"\u53d1\u751f\u4e86\u5f02\u5e38",level:"error",time:Date.now(),data:t.message})}},t}();kt.usePlugin(Pt,"extend"),kt.usePlugin(Et,"et"),kt.usePlugin(Ct,"profile"),kt.usePlugin(At,"heartbeat"),kt.usePlugin(Ot,"monitor");var Dt=new kt("default"),It=3053,Mt=3297;var Gt=function(t){function e(e){var n=e.test,i=e.TEAChannelDomain,r=void 0===i?"":i,o=e.mode,s=e.TEAChannel,a=e.TEAChannelType;return e.tracker=r||a||s?function(t){var e=t.isTest,n=t.channel_domain,i=t.channel_type,r=t.channel,o=/snssdk|zijieapi/g.test(n)&&/ttp|tcpy/g.test(i)&&/va|sg|in/g.test(r)?It:Mt;return Dt.init({app_id:o,channel_type:i,channel:r,channel_domain:n}),Dt.config({_staging_flag:e?1:0,enable_et_test:e}),Dt.start(),Dt.event.bind(Dt)}({isTest:n||"test"===o,channel_domain:r,channel_type:a,channel:s}):function(){},t.call(this,e)||this}return r(e,t),e}(R)},27175:(t,e,n)=>{"use strict";n.d(e,{oc:()=>yt,ZP:()=>_t});var i=n(70224),r=n(97227),o=n(11791),s=n(84537),a=n(58332),h=n(92419),c=n(10212),l=n(14501),u={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},d=new(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.Z)(this,t),this.init(e,n)}return(0,s.Z)(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||u,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,i){return i&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,(0,r.Z)({},{prefix:"".concat(this.prefix,":").concat(e,":")},this.options))}}]),t}()),f=function(){function t(){(0,o.Z)(this,t),this.observers={}}return(0,s.Z)(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.observers[t]&&[].concat(this.observers[t]).forEach((function(t){t.apply(void 0,n)}));this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(e){e.apply(e,[t].concat(n))}))}}]),t}();function p(){var t,e,n=new Promise((function(n,i){t=n,e=i}));return n.resolve=t,n.reject=e,n}function g(t){return null==t?"":""+t}function v(t,e,n){function i(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function r(){return!t||"string"==typeof t}for(var o="string"!=typeof e?[].concat(e):e.split(".");o.length>1;){if(r())return{};var s=i(o.shift());!t[s]&&n&&(t[s]=new n),t=Object.prototype.hasOwnProperty.call(t,s)?t[s]:{}}return r()?{}:{obj:t,k:i(o.shift())}}function m(t,e,n){var i=v(t,e,Object);i.obj[i.k]=n}function y(t,e){var n=v(t,e),i=n.obj,r=n.k;if(i)return i[r]}function _(t,e,n){var i=y(t,n);return void 0!==i?i:y(e,n)}function b(t,e,n){for(var i in e)"__proto__"!==i&&"constructor"!==i&&(i in t?"string"==typeof t[i]||t[i]instanceof String||"string"==typeof e[i]||e[i]instanceof String?n&&(t[i]=e[i]):b(t[i],e[i],n):t[i]=e[i]);return t}function S(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function x(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return w[t]})):t}var k="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,E=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(0,o.Z)(this,e),n=(0,a.Z)(this,(0,h.Z)(e).call(this)),k&&f.call((0,c.Z)(n)),n.data=t||{},n.options=i,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return(0,l.Z)(e,t),(0,s.Z)(e,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=[t,e];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(r?n.split(r):n)),t.indexOf(".")>-1&&(o=t.split(".")),y(this.data,o)}},{key:"addResource",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var s=[t,e];n&&(s=s.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(i=e,e=(s=t.split("."))[1]),this.addNamespaces(e),m(this.data,s,i),r.silent||this.emit("added",t,e,n,i)}},{key:"addResources",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var r in n)"string"!=typeof n[r]&&"[object Array]"!==Object.prototype.toString.apply(n[r])||this.addResource(t,e,r,n[r],{silent:!0});i.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[t,e];t.indexOf(".")>-1&&(i=n,n=e,e=(a=t.split("."))[1]),this.addNamespaces(e);var h=y(this.data,a)||{};i?b(h,n,o):h=(0,r.Z)({},h,n),m(this.data,a,h),s.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?(0,r.Z)({},{},this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"toJSON",value:function(){return this.data}}]),e}(f),C={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,i,r){var o=this;return t.forEach((function(t){o.processors[t]&&(e=o.processors[t].process(e,n,i,r))})),e}},A={},O=function(t){function e(t){var n,i,r,s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.Z)(this,e),n=(0,a.Z)(this,(0,h.Z)(e).call(this)),k&&f.call((0,c.Z)(n)),i=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r=t,s=(0,c.Z)(n),i.forEach((function(t){r[t]&&(s[t]=r[t])})),n.options=l,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=d.create("translator"),n}return(0,l.Z)(e,t),(0,s.Z)(e,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var i=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,r=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var o=t.match(this.interpolator.nestingRegexp);if(o&&o.length>0)return{key:t,namespaces:r};var s=t.split(n);(n!==i||n===i&&this.options.ns.indexOf(s[0])>-1)&&(r=s.shift()),t=s.join(i)}return"string"==typeof r&&(r=[r]),{key:t,namespaces:r}}},{key:"translate",value:function(t,n,o){var s=this;if("object"!==(0,i.Z)(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);var a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,h=this.extractFromKey(t[t.length-1],n),c=h.key,l=h.namespaces,u=l[l.length-1],d=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&"cimode"===d.toLowerCase()){if(f){var p=n.nsSeparator||this.options.nsSeparator;return u+p+c}return c}var g=this.resolve(t,n),v=g&&g.res,m=g&&g.usedKey||c,y=g&&g.exactUsedKey||c,_=Object.prototype.toString.apply(v),b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject;if(S&&v&&("string"!=typeof v&&"boolean"!=typeof v&&"number"!=typeof v)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(_)<0&&("string"!=typeof b||"[object Array]"!==_)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,v,n):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");if(a){var w="[object Array]"===_,x=w?[]:{},k=w?y:m;for(var E in v)if(Object.prototype.hasOwnProperty.call(v,E)){var C="".concat(k).concat(a).concat(E);x[E]=this.translate(C,(0,r.Z)({},n,{joinArrays:!1,ns:l})),x[E]===C&&(x[E]=v[E])}v=x}}else if(S&&"string"==typeof b&&"[object Array]"===_)(v=v.join(b))&&(v=this.extendTranslation(v,t,n,o));else{var A=!1,O=!1,R=void 0!==n.count&&"string"!=typeof n.count,T=e.hasDefaultValue(n),P=R?this.pluralResolver.getSuffix(d,n.count):"",D=n["defaultValue".concat(P)]||n.defaultValue;!this.isValidLookup(v)&&T&&(A=!0,v=D),this.isValidLookup(v)||(O=!0,v=c);var I=T&&D!==v&&this.options.updateMissing;if(O||A||I){if(this.logger.log(I?"updateKey":"missingKey",d,u,c,I?D:v),a){var M=this.resolve(c,(0,r.Z)({},n,{keySeparator:!1}));M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var G=[],L=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&L&&L[0])for(var F=0;F<L.length;F++)G.push(L[F]);else"all"===this.options.saveMissingTo?G=this.languageUtils.toResolveHierarchy(n.lng||this.language):G.push(n.lng||this.language);var N=function(t,e,i){s.options.missingKeyHandler?s.options.missingKeyHandler(t,u,e,I?i:v,I,n):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(t,u,e,I?i:v,I,n),s.emit("missingKey",t,u,e,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?G.forEach((function(t){s.pluralResolver.getSuffixes(t).forEach((function(e){N([t],c+e,n["defaultValue".concat(e)]||D)}))})):N(G,c,D))}v=this.extendTranslation(v,t,n,g,o),O&&v===c&&this.options.appendNamespaceToMissingKey&&(v="".concat(u,":").concat(c)),O&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(v))}return v}},{key:"extendTranslation",value:function(t,e,n,i,o){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,n,i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init((0,r.Z)({},n,{interpolation:(0,r.Z)({},this.options.interpolation,n.interpolation)}));var a,h=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(h){var c=t.match(this.interpolator.nestingRegexp);a=c&&c.length}var l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=(0,r.Z)({},this.options.interpolation.defaultVariables,l)),t=this.interpolator.interpolate(t,l,n.lng||this.language,n),h){var u=t.match(this.interpolator.nestingRegexp);a<(u&&u.length)&&(n.nest=!1)}!1!==n.nest&&(t=this.interpolator.nest(t,(function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return o&&o[0]===i[0]&&!n.context?(s.logger.warn("It seems you are nesting recursively key: ".concat(i[0]," in key: ").concat(e[0])),null):s.translate.apply(s,i.concat([e]))}),n)),n.interpolation&&this.interpolator.reset()}var d=n.postProcess||this.options.postProcess,f="string"==typeof d?[d]:d;return null!=t&&f&&f.length&&!1!==n.applyPostProcessor&&(t=C.handle(f,t,e,this.options&&this.options.postProcessPassResolved?(0,r.Z)({i18nResolved:i},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,i,r,o,s=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!s.isValidLookup(e)){var h=s.extractFromKey(t,a),c=h.key;n=c;var l=h.namespaces;s.options.fallbackNS&&(l=l.concat(s.options.fallbackNS));var u=void 0!==a.count&&"string"!=typeof a.count,d=void 0!==a.context&&"string"==typeof a.context&&""!==a.context,f=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);l.forEach((function(t){s.isValidLookup(e)||(o=t,!A["".concat(f[0],"-").concat(t)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(o)&&(A["".concat(f[0],"-").concat(t)]=!0,s.logger.warn('key "'.concat(n,'" for languages "').concat(f.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((function(n){if(!s.isValidLookup(e)){r=n;var o,h,l=c,f=[l];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(f,c,n,t,a);else u&&(o=s.pluralResolver.getSuffix(n,a.count)),u&&d&&f.push(l+o),d&&f.push(l+="".concat(s.options.contextSeparator).concat(a.context)),u&&f.push(l+=o);for(;h=f.pop();)s.isValidLookup(e)||(i=h,e=s.getResource(n,t,h,a))}})))}))}})),{res:e,usedKey:n,exactUsedKey:i,usedLng:r,usedNS:o}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,i):this.resourceStore.getResource(t,e,n,i)}}],[{key:"hasDefaultValue",value:function(t){var e="defaultValue";for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,12)&&void 0!==t[n])return!0;return!1}}]),e}(f);function R(t){return t.charAt(0).toUpperCase()+t.slice(1)}var T=function(){function t(e){(0,o.Z)(this,t),this.options=e,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=d.create("languageUtils")}return(0,s.Z)(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=R(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=R(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=R(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isWhitelisted",value:function(t){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(t)}},{key:"isSupportedCode",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var e,n=this;return t?(t.forEach((function(t){if(!e){var i=n.formatLanguageCode(t);n.options.supportedLngs&&!n.isSupportedCode(i)||(e=i)}})),!e&&this.options.supportedLngs&&t.forEach((function(t){if(!e){var i=n.getLanguagePartFromCode(t);if(n.isSupportedCode(i))return e=i;e=n.options.supportedLngs.find((function(t){if(0===t.indexOf(i))return t}))}})),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e):null}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),"string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,i=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],o=function(t){t&&(n.isSupportedCode(t)?r.push(t):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"==typeof t&&o(this.formatLanguageCode(t)),i.forEach((function(t){r.indexOf(t)<0&&o(n.formatLanguageCode(t))})),r}}]),t}(),P=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],D={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1&&t%100!=11?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0==t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1==t?0:2==t?1:(t<0||t>10)&&t%10==0?2:3)}};var I=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.Z)(this,t),this.languageUtils=e,this.options=i,this.logger=d.create("pluralResolver"),this.rules=(n={},P.forEach((function(t){t.lngs.forEach((function(e){n[e]={numbers:t.nr,plurals:D[t.fc]}}))})),n)}return(0,s.Z)(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=this.getRule(t);return e&&e.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){return this.getSuffixes(t).map((function(t){return e+t}))}},{key:"getSuffixes",value:function(t){var e=this,n=this.getRule(t);return n?n.numbers.map((function(n){return e.getSuffix(t,n)})):[]}},{key:"getSuffix",value:function(t,e){var n=this,i=this.getRule(t);if(i){var r=i.noAbs?i.plurals(e):i.plurals(Math.abs(e)),o=i.numbers[r];this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var s=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===i.numbers.length&&1===i.numbers[0]?s():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}return this.logger.warn("no plural rule found for: ".concat(t)),""}}]),t}(),M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.Z)(this,t),this.logger=d.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return(0,s.Z)(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:x,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?S(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?S(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?S(e.nestingPrefix):e.nestingPrefixEscaped||S("$t("),this.nestingSuffix=e.nestingSuffix?S(e.nestingSuffix):e.nestingSuffixEscaped||S(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=void 0!==e.alwaysFormat&&e.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,i){var r,o,s,a=this,h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(t){return t.replace(/\$/g,"$$$$")}var l=function(t){if(t.indexOf(a.formatSeparator)<0){var r=_(e,h,t);return a.alwaysFormat?a.format(r,void 0,n):r}var o=t.split(a.formatSeparator),s=o.shift().trim(),c=o.join(a.formatSeparator).trim();return a.format(_(e,h,s),c,n,i)};this.resetRegExp();var u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i&&i.interpolation&&i.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(t){return c(t)}},{regex:this.regexp,safeValue:function(t){return a.escapeValue?c(a.escape(t)):c(t)}}].forEach((function(e){for(s=0;r=e.regex.exec(t);){if(void 0===(o=l(r[1].trim())))if("function"==typeof u){var n=u(t,r,i);o="string"==typeof n?n:""}else{if(d){o=r[0];continue}a.logger.warn("missed to pass in variable ".concat(r[1]," for interpolating ").concat(t)),o=""}else"string"==typeof o||a.useRawValueToEscape||(o=g(o));if(t=t.replace(r[0],e.safeValue(o)),e.regex.lastIndex=0,++s>=a.maxReplaces)break}})),t}},{key:"nest",value:function(t,e){var n,i,o=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,r.Z)({},s);function h(t,e){var n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;var i=t.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(i[1]);t=i[0],o=(o=this.interpolate(o,a)).replace(/'/g,'"');try{a=JSON.parse(o),e&&(a=(0,r.Z)({},e,a))}catch(s){return this.logger.warn("failed parsing options string in nesting for key ".concat(t),s),"".concat(t).concat(n).concat(o)}return delete a.defaultValue,t}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(t);){var c=[],l=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map((function(t){return t.trim()}));n[1]=u.shift(),c=u,l=!0}if((i=e(h.call(this,n[1].trim(),a),a))&&n[0]===t&&"string"!=typeof i)return i;"string"!=typeof i&&(i=g(i)),i||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),i=""),l&&(i=c.reduce((function(t,e){return o.format(t,e,s.lng,s)}),i.trim())),t=t.replace(n[0],i),this.regexp.lastIndex=0}return t}}]),t}();var G=function(t){function e(t,n,i){var r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,o.Z)(this,e),r=(0,a.Z)(this,(0,h.Z)(e).call(this)),k&&f.call((0,c.Z)(r)),r.backend=t,r.store=n,r.services=i,r.languageUtils=i.languageUtils,r.options=s,r.logger=d.create("backendConnector"),r.state={},r.queue=[],r.backend&&r.backend.init&&r.backend.init(i,s.backend,s),r}return(0,l.Z)(e,t),(0,s.Z)(e,[{key:"queueLoad",value:function(t,e,n,i){var r=this,o=[],s=[],a=[],h=[];return t.forEach((function(t){var i=!0;e.forEach((function(e){var a="".concat(t,"|").concat(e);!n.reload&&r.store.hasResourceBundle(t,e)?r.state[a]=2:r.state[a]<0||(1===r.state[a]?s.indexOf(a)<0&&s.push(a):(r.state[a]=1,i=!1,s.indexOf(a)<0&&s.push(a),o.indexOf(a)<0&&o.push(a),h.indexOf(e)<0&&h.push(e)))})),i||a.push(t)})),(o.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:i}),{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:h}}},{key:"loaded",value:function(t,e,n){var i=t.split("|"),r=i[0],o=i[1];e&&this.emit("failedLoading",r,o,e),n&&this.store.addResourceBundle(r,o,n),this.state[t]=e?-1:2;var s={};this.queue.forEach((function(n){var i,a,h,c,l,u;i=n.loaded,a=o,c=v(i,[r],Object),l=c.obj,u=c.k,l[u]=l[u]||[],h&&(l[u]=l[u].concat(a)),h||l[u].push(a),function(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(t){s[t]||(s[t]=[]),n.loaded[t].length&&n.loaded[t].forEach((function(e){s[t].indexOf(e)<0&&s[t].push(e)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,s=arguments.length>5?arguments[5]:void 0;return t.length?this.backend[n](t,e,(function(a,h){a&&h&&r<5?setTimeout((function(){i.read.call(i,t,e,n,r+1,2*o,s)}),o):s(a,h)})):s(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var o=this.queueLoad(t,e,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(function(i,s){i&&e.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(r," failed"),i),!i&&s&&e.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(r),s),e.loaded(t,i,s)}))}},{key:"saveMissing",value:function(t,e,n,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(t,e,n,i,null,(0,r.Z)({},s,{isUpdate:o})),t&&t[0]&&this.store.addResource(t[0],e,n,i))}}]),e}(f);function L(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&(t.whitelist&&t.whitelist.indexOf("cimode")<0&&(t.whitelist=t.whitelist.concat(["cimode"])),t.supportedLngs=t.whitelist),t.nonExplicitWhitelist&&(t.nonExplicitSupportedLngs=t.nonExplicitWhitelist),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function F(){}const N=new(function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if((0,o.Z)(this,e),t=(0,a.Z)(this,(0,h.Z)(e).call(this)),k&&f.call((0,c.Z)(t)),t.options=L(n),t.services={},t.logger=d,t.modules={external:[]},i&&!t.isInitialized&&!n.isClone){if(!t.options.initImmediate)return t.init(n,i),(0,a.Z)(t,(0,c.Z)(t));setTimeout((function(){t.init(n,i)}),0)}return t}return(0,l.Z)(e,t),(0,s.Z)(e,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function o(t){return t?"function"==typeof t?new t:t:null}if("function"==typeof e&&(n=e,e={}),e.whitelist&&!e.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),e.nonExplicitWhitelist&&!e.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=(0,r.Z)({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===(0,i.Z)(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===(0,i.Z)(t[2])||"object"===(0,i.Z)(t[3])){var n=t[3]||t[2];Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,n,i){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}},this.options,L(e)),this.format=this.options.interpolation.format,n||(n=F),!this.options.isClone){this.modules.logger?d.init(o(this.modules.logger),this.options):d.init(null,this.options);var s=new T(this.options);this.store=new E(this.options.resources,this.options);var a=this.services;a.logger=d,a.resourceStore=this.store,a.languageUtils=s,a.pluralResolver=new I(s,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new M(this.options),a.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},a.backendConnector=new G(o(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e].concat(i))})),this.modules.languageDetector&&(a.languageDetector=o(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=o(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new O(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.emit.apply(t,[e].concat(i))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&"dev"!==h[0]&&(this.options.lng=h[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments),t}}));var c=p(),l=function(){var e=function(e,i){t.isInitialized&&t.logger.warn("init: i18next is already initialized. You should call init just once!"),t.isInitialized=!0,t.options.isClone||t.logger.log("initialized",t.options),t.emit("initialized",t.options),c.resolve(i),n(e,i)};if(t.languages&&"v1"!==t.options.compatibilityAPI&&!t.isInitialized)return e(null,t.t.bind(t));t.changeLanguage(t.options.lng,e)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),c}},{key:"loadResources",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,i="string"==typeof t?t:this.language;if("function"==typeof t&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase())return n();var r=[],o=function(t){t&&e.services.languageUtils.toResolveHierarchy(t).forEach((function(t){r.indexOf(t)<0&&r.push(t)}))};if(i)o(i);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(t){return o(t)}));this.options.preload&&this.options.preload.forEach((function(t){return o(t)})),this.services.backendConnector.load(r,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(t,e,n){var i=p();return t||(t=this.languages),e||(e=this.options.ns),n||(n=F),this.services.backendConnector.reload(t,e,(function(t){i.resolve(),n(t)})),i}},{key:"use",value:function(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&C.addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"changeLanguage",value:function(t,e){var n=this;this.isLanguageChangingTo=t;var i=p();this.emit("languageChanging",t);var r=function(t){var r="string"==typeof t?t:n.services.languageUtils.getBestMatchFromCodes(t);r&&(n.language||(n.language=r,n.languages=n.services.languageUtils.toResolveHierarchy(r)),n.translator.language||n.translator.changeLanguage(r),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(r)),n.loadResources(r,(function(t){!function(t,r){r?(n.language=r,n.languages=n.services.languageUtils.toResolveHierarchy(r),n.translator.changeLanguage(r),n.isLanguageChangingTo=void 0,n.emit("languageChanged",r),n.logger.log("languageChanged",r)):n.isLanguageChangingTo=void 0,i.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(t,r)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(r):r(t):r(this.services.languageDetector.detect()),i}},{key:"getFixedT",value:function(t,e){var n=this,o=function t(e,o){var s;if("object"!==(0,i.Z)(o)){for(var a=arguments.length,h=new Array(a>2?a-2:0),c=2;c<a;c++)h[c-2]=arguments[c];s=n.options.overloadTranslationOptionHandler([e,o].concat(h))}else s=(0,r.Z)({},o);return s.lng=s.lng||t.lng,s.lngs=s.lngs||t.lngs,s.ns=s.ns||t.ns,n.t(e,s)};return"string"==typeof t?o.lng=t:o.lngs=t,o.ns=e,o}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var i=this.languages[0],r=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;var s=function(t,n){var i=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===i||2===i};if(n.precheck){var a=n.precheck(this,s);if(void 0!==a)return a}return!!this.hasResourceBundle(i,t)||(!this.services.backendConnector.backend||!(!s(i,t)||r&&!s(o,t)))}},{key:"loadNamespaces",value:function(t,e){var n=this,i=p();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){i.resolve(),e&&e(t)})),i):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=p();"string"==typeof t&&(t=[t]);var i=this.options.preload||[],r=t.filter((function(t){return i.indexOf(t)<0}));return r.length?(this.options.preload=i.concat(r),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){if(t||(t=this.languages&&this.languages.length>0?this.languages[0]:this.language),!t)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,o=(0,r.Z)({},this.options,n,{isClone:!0}),s=new e(o);return["store","services","language"].forEach((function(e){s[e]=t[e]})),s.services=(0,r.Z)({},this.services),s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s.translator=new O(s.services,s.options),s.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];s.emit.apply(s,[t].concat(n))})),s.init(o,i),s.translator.options=s.options,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}}]),e}(f));const Z=n(96204).C;var j,z=function(){return z=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},z.apply(this,arguments)};function B(t,e,n){function i(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function r(){return!t||"string"==typeof t}void 0===n&&(n=null);for(var o="string"!=typeof e?[].concat(e):e.split(".");o.length>1;){if(r())return{};var s=i(o.shift());!t[s]&&n&&(t[s]=new n),t=t[s]}return r()?{}:{obj:t,k:i(o.shift())}}!function(t){t.keepRaw="keepRaw",t.replaceAnyway="replaceAnyway"}(j||(j={}));j.replaceAnyway;var U={memoize:!1,memoizeFallback:!1,bindI18n:!1,bindI18nStore:!1,onParseError:j.replaceAnyway},K=function(){function t(){this.mem={}}return t.staticInit=function(e){t._i18nextInstance=e},t.prototype.init=function(e,n){var i=this;void 0===e&&(e=t._i18nextInstance);var r={};if((null==e?void 0:e.options)&&(e.options.i18nFormat&&(r=e.options.i18nFormat),r.onParseError=e.options.onParseError,r.missingInterpolationHandler=e.options.missingInterpolationHandler,r.icuConfig=e.options.icuConfig,r.ignoreWarning=!!e.options.ignoreWarning),this.options=Object.assign(U,n,r),this.formats=this.options.formats,e){var o=this.options,s=o.bindI18n,a=o.bindI18nStore,h=o.memoize;e.IntlMessageFormat=Z,this.IntlMessageFormat=Z,e.ICU=this,h&&(s&&e.on(s,(function(){return i.clearCache()})),a&&e.store.on(a,(function(){return i.clearCache()})))}this.options.localeData&&("[object Array]"===Object.prototype.toString.apply(this.options.localeData)?this.options.localeData.forEach((function(t){return i.addLocaleData(t)})):this.addLocaleData(this.options.localeData))},t.prototype.addLocaleData=function(t){("[object Array]"===Object.prototype.toString.apply(t)?t:[t]).forEach((function(t){t&&t.locale&&Z.__addLocaleData(t)}))},t.prototype.addUserDefinedFormats=function(t){this.formats=this.formats?z(z({},this.formats),t):t},t.prototype.checkMissingInterpolation=function(t,e,n,i,r){if(!1===(this.options.icuConfig||{}).strict)return n;for(var o={},s=0,a=t;s<a.length;s++){var h=a[s];if(1===h.type){var c=h.value;if(null===n[c]||void 0===n[c]){if("function"==typeof this.options.missingInterpolationHandler){var l=this.options.missingInterpolationHandler({key:r,text:e,locale:i,interpolation:{key:c,val:n[c]}});if("string"==typeof l){o[c]=l;continue}}switch(this.options.onParseError){case j.keepRaw:throw new Error;case j.replaceAnyway:o[c]="{"+c+"}";continue}if("function"==typeof this.options.onParseError){console.warn("[DEPRECATED] onParseError is deprecated, please use 'missingInterpolationHandler' instead of");var u=this.options.onParseError(e,c,i,this.IntlMessageFormat);if(!0===u)throw new Error;o[c]="string"==typeof u?u:"{"+c+"}"}else this.options.ignoreWarning||console.warn('[Starling ICU Warning] The interpolation parameter "{'+c+'}" is missing in the translation text "'+e+'" for the key "'+r+"\"\nSuggestions: check whether the value is null or undefined. Try using empty string '' as fallback! e.g I18n.t('key', { apple: count || '' })"),o[c]="{"+c+"}"}}}return Object.assign({},n,o)},t.prototype.parse=function(t,e,n,i,r,o){var s,a,h,c,l=o&&o.resolved&&o.resolved.res,u=this.options.memoize&&n+"."+i+"."+r.replace(/\./g,"###");!l&&e.thirdParamFallback&&e.fallbackText&&(t=e.fallbackText),this.options.memoize&&(s=function(t,e){var n=B(t,e),i=n.obj,r=n.k;if(i)return i[r]}(this.mem,u));try{return s||(s=new this.IntlMessageFormat(t,n,this.formats,(this.options.icuConfig||{}).formatOptions),this.options.memoize&&(this.options.memoizeFallback||!o||l)&&(a=this.mem,h=s,(c=B(a,u,Object)).obj[c.k]=h)),s.format(this.checkMissingInterpolation(s.getAst(),t,e||{},n,r))}catch(d){return t}},t.prototype.addLookupKeys=function(t,e,n,i,r){return t},t.prototype.clearCache=function(){this.mem={}},t.type="i18nFormat",t._i18nextInstance=null,t}(),H=(K.name,function(){return H=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},H.apply(this,arguments)}),W=/^\s*\[\[__starling_(\d+)_(.*)__\]\]\s*$/;"undefined"!=typeof window&&(window.__STARLING_INCONTEXT_GLOBAL__HOOK__=H({},window.__STARLING_INCONTEXT_GLOBAL__HOOK__||{payload:{}}));var V={name:"inContext",type:"postProcessor",process:function(t,e,n,i){if(window&&document.getElementById("INCONTEXT-KEY-MATCH")&&!n.__STARLING_INCONTEXT_FLAG__){window.__STARLING_INCONTEXT_GLOBAL_I18N__||(window.__STARLING_INCONTEXT_GLOBAL_I18N__=i),delete n.keySeparator,delete n.lngs;var r=0;if(e=e.toString(),W.test(e))(o=e.match(W))[0],r=o[1],e=o[2];if(W.test(t)){var o;(o=t.match(W))[0];o[1];t=o[2]}if(window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[e]){var s=window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[e].findIndex((function(t){return JSON.stringify(t.options)===JSON.stringify(n)}));s>-1?(window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[e][s].default=t,r=s):r=window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[e].push({options:n,default:t})-1}else window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[e]=[{options:n,default:t}],r=0;return"[[__starling_"+r+"_"+e+"__]]"}return t}};function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Y(t,e,n){return e&&q(t.prototype,e),n&&q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function J(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||$(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){if(t){if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}for(var tt=["AFN","EUR","ALL","DZD","USD","AOA","XCD","ARS","AMD","AWG","AUD","AZN","BSD","BHD","BDT","BBD","BYN","BZD","XOF","BMD","INR","BTN","BOB","BOV","BAM","BWP","NOK","BRL","BND","BGN","BIF","CVE","KHR","XAF","CAD","KYD","CLP","CLF","CNY","COP","COU","KMF","CDF","NZD","CRC","HRK","CUP","CUC","ANG","CZK","DKK","DJF","DOP","EGP","SVC","ERN","ETB","FKP","FJD","XPF","GMD","GEL","GHS","GIP","GTQ","GBP","GNF","GYD","HTG","HNL","HKD","HUF","ISK","IDR","XDR","IRR","IQD","ILS","JMD","JPY","JOD","KZT","KES","KPW","KRW","KWD","KGS","LAK","LBP","LSL","ZAR","LRD","LYD","CHF","MOP","MKD","MGA","MWK","MYR","MVR","MRO","MUR","XUA","MXN","MXV","MDL","MNT","MAD","MZN","MMK","NAD","NPR","NIO","NGN","OMR","PKR","PAB","PGK","PYG","PEN","PHP","PLN","QAR","RON","RUB","RWF","SHP","WST","STD","SAR","RSD","SCR","SLL","SGD","XSU","SBD","SOS","SSP","LKR","SDG","SRD","SZL","SEK","CHE","CHW","SYP","TWD","TJS","TZS","THB","TOP","TTD","TND","TRY","TMT","UGX","UAH","AED","USN","UYU","UYI","UZS","VUV","VEF","VND","YER","ZMW","ZWL","XBA","XBB","XBC","XBD","XTS","XXX","XAU","XPD","XPT","XAG"],et={},nt=0;nt<tt.length;nt++)et[tt[nt]]={style:"currency",currency:tt[nt]};var it={number:et},rt="languageTransformer";function ot(t){return function(e){return e.type===t}}function st(t,e){var n=t;return(e||[]).map((function(e){n=e.process(t)||n})),n}var at,ht={lng:"zh-CN",fallbackLng:["en-US"],inContext:!0},ct=[K,V],lt=function(){function t(e,n){var i=this;X(this,t),this._waitingToAddResourceBundle=[],this.t=function(t,e,n){var r=Array.isArray(t)?Array.from(t).map((function(){return" "})).join(""):Array(t.length).fill(" "),o=Object.assign({keySeparator:r,nsSeparator:r},e);return"thirdParamFallback"in i.config&&i.config.thirdParamFallback&&(o.thirdParamFallback=!0),i.instance.t(t,n,o)},this._handlePlugins(n),this._handleConfigs(e),this.instance=N.createInstance(),this.instance.isInitialized=!1}return Y(t,[{key:"_handlePlugins",value:function(t){this.plugins=Array.isArray(t)?t.concat(ct):ct}},{key:"_handleConfigs",value:function(t){this.userLng=(null==t?void 0:t.lng)||null,this.config=Object.assign({},ht,t||{})}},{key:"language",get:function(){return(this.instance||{}).language}},{key:"createInstance",value:function(){var t=this;return new Promise((function(e,n){"undefined"!=typeof window&&!window.CocosEngine&&t.config.inContext&&(t.config.postProcess=[].concat(["inContext"],t.config.postProcess||[])),t.plugins.map((function(e){"IES_INTL_ICU_PLUGIN"===e.name&&e.staticInit(t.instance),t.instance.use(e)}));var i=t.config;t.config.formats=Object.assign({},t.config.formats,it);var r=st(i.lng,t.plugins.filter(ot(rt)));t.instance.init(Object.assign({},i,{lng:r,i18nFormat:{formats:t.config.formats}}),(function(i,r){try{var o,s=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=$(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(t._waitingToAddResourceBundle);try{for(s.s();!(o=s.n()).done;){var a,h=o.value;(a=t.instance).addResourceBundle.apply(a,J(h))}}catch(i){s.e(i)}finally{s.f()}t._waitingToAddResourceBundle=[]}catch(i){}i||(t._updateLanguages(),e({t:r,err:i})),t.init=!0,n({t:r,err:i})}))}))}},{key:"_updateLanguages",value:function(){this.languages=this.instance?Array.from(new Set([this.instance.language].concat(J(this.instance.languages)))):null}},{key:"getLanguages",value:function(){return this.languages}},{key:"changeLanguage",value:function(t,e){var n=this;this.config.lng=t,this.instance.changeLanguage(t,(function(t,i){t||n._updateLanguages(),e&&e(t,i)}))}},{key:"changeLanguageWithPromise",value:function(t){var e=this;return new Promise((function(n,i){e.config.lng=t,e.instance.changeLanguage(t,(function(t,r){t&&i({err:t,t:r}),e._updateLanguages(),n({err:t,t:r})}))}))}},{key:"getDir",value:function(t){return this.instance.dir(t)}},{key:"addResourceBundle",value:function(t,e,n,i,r){return this.instance.isInitialized?this.instance.addResourceBundle(t,e,n,i,r):(this._waitingToAddResourceBundle.push([t,e,n,!!i,!!r]),this.instance)}}]),t}(),ut="Starling_intl:",dt=function(){for(var t,e="".concat(ut," [WARNING]"),n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(t=console).warn.apply(t,[e].concat(i))},ft=function(){for(var t,e="".concat(ut," [ERROR]"),n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(t=console).error.apply(t,[e].concat(i))};function pt(t,e,n){return n?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function gt(){}function vt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(i){return Promise.reject(i)}}}!function(t){t.intl3rdParty="intl3rdParty",t.backend="backend",t.logger="logger",t.languageDetector="languageDetector",t.postProcessor="postProcessor",t.i18nFormat="i18nFormat",t["3rdParty"]="3rdParty"}(at||(at={}));var mt=function(){function t(){var e=this;X(this,t),this.t=function(t,n,i){return e.ignoreWarning||e.i18nInstance&&e.i18nInstance.init?!t||"string"==typeof t&&!t.trim()?"":e.i18nInstance.t(t,n,i):(ft("The instance has not been initialized: i18n.t('".concat(t,"'").concat(n?","+JSON.stringify(n):"",");")),null!=i?i:Array.isArray(t)?t[0]:t)},this.plugins=[],this.i18nInstance=new lt}return Y(t,[{key:"use",value:function(t){return this.plugins.includes(t)?(dt("Plugin: ".concat(t.name," has beeninit installed.")),this):(this.plugins.push(t),this)}},{key:"init",value:function(t,e){try{var n=this;return n.ignoreWarning=t.ignoreWarning,n.i18nInstance._handleConfigs(t),n.i18nInstance._handlePlugins(n.plugins),pt(function(t,e){try{var n=t()}catch(i){return e(i)}return n&&n.then?n.then(void 0,e):n}((function(){return pt(n.i18nInstance.createInstance(),(function(t){var i,r=t.err,o=t.t,s=n.plugins.filter((function(t){return t.type===at.intl3rdParty}));return pt((i=s.map(vt((function(t){if(t&&"function"==typeof t.init)return function(t,e){if(!e)return t&&t.then?t.then(gt):Promise.resolve()}((t.init instanceof Promise?t.init:vt((function(e){return Promise.resolve(t.init(e))})))(n))}))),new Promise((function(t,e){if(Array.isArray(i)||(i=Array.from(i)),i.length<=0)return t([]);var n=[];i=i.map((function(r,o){return function(){("function"==typeof r?new Promise(r):Promise.resolve(r)).then((function(e){n[o]=e,o===i.length-1?t(n):i[o+1]()}),e)}})),i[0]()}))),(function(){return"function"==typeof e&&e(r,o),{err:r,t:o}}))}))}),(function(t){return ft("The instance init error: ".concat(t)),{err:t,t:function(t){return t}}})))}catch(i){return Promise.reject(i)}}},{key:"language",get:function(){return(this.i18nInstance||{}).language}},{key:"setLang",value:function(t,e){var n=st(t,this.plugins.filter(ot(rt)));this.i18nInstance.changeLanguage(n,e)}},{key:"getLanguages",value:function(){return this.i18nInstance.getLanguages()}},{key:"setLangWithPromise",value:function(t){var e=st(t,this.plugins.filter(ot(rt)));return this.i18nInstance.changeLanguageWithPromise(e)}},{key:"dir",value:function(t){return this.i18nInstance.getDir(t)}},{key:"addResourceBundle",value:function(t,e,n,i,r){return this.i18nInstance.addResourceBundle(t,e,n,i,r)}}]),t}(),yt=new mt;const _t=yt},32020:(t,e,n)=>{"use strict";var i=n(36190),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function h(t){return i.isMemo(t)?s:a[t.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=s;var c=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,i){if("string"!=typeof n){if(p){var r=f(n);r&&r!==p&&t(e,r,i)}var s=l(n);u&&(s=s.concat(u(n)));for(var a=h(e),g=h(n),v=0;v<s.length;++v){var m=s[v];if(!(o[m]||i&&i[m]||g&&g[m]||a&&a[m])){var y=d(n,m);try{c(e,m,y)}catch(_){}}}}return e}},28161:(t,e,n)=>{"use strict";n.d(e,{Z:()=>x});var i="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function r(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on".concat(e),(function(){n(window.event)}))}function o(t,e){for(var n=e.slice(0,e.length-1),i=0;i<n.length;i++)n[i]=t[n[i].toLowerCase()];return n}function s(t){"string"!=typeof t&&(t="");for(var e=(t=t.replace(/\s/g,"")).split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}for(var a={backspace:8,"\u232b":8,tab:9,clear:12,enter:13,"\u21a9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21ea":20,",":188,".":190,"/":191,"`":192,"-":i?173:189,"=":i?61:187,";":i?59:186,"'":222,"[":219,"]":221,"\\":220},h={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},c={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},l={16:!1,18:!1,17:!1,91:!1},u={},d=1;d<20;d++)a["f".concat(d)]=111+d;var f=[],p=!1,g="all",v=[],m=function(t){return a[t.toLowerCase()]||h[t.toLowerCase()]||t.toUpperCase().charCodeAt(0)};function y(t){g=t||"all"}function _(){return g||"all"}var b=function(t){var e=t.key,n=t.scope,i=t.method,r=t.splitKey,a=void 0===r?"+":r;s(e).forEach((function(t){var e=t.split(a),r=e.length,s=e[r-1],c="*"===s?"*":m(s);if(u[c]){n||(n=_());var l=r>1?o(h,e):[];u[c]=u[c].filter((function(t){return!((!i||t.method===i)&&t.scope===n&&function(t,e){for(var n=t.length>=e.length?t:e,i=t.length>=e.length?e:t,r=!0,o=0;o<n.length;o++)-1===i.indexOf(n[o])&&(r=!1);return r}(t.mods,l))}))}}))};function S(t,e,n,i){var r;if(e.element===i&&(e.scope===n||"all"===e.scope)){for(var o in r=e.mods.length>0,l)Object.prototype.hasOwnProperty.call(l,o)&&(!l[o]&&e.mods.indexOf(+o)>-1||l[o]&&-1===e.mods.indexOf(+o))&&(r=!1);(0!==e.mods.length||l[16]||l[18]||l[17]||l[91])&&!r&&"*"!==e.shortcut||!1===e.method(t,e)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function w(t,e){var n=u["*"],i=t.keyCode||t.which||t.charCode;if(x.filter.call(this,t)){if(93!==i&&224!==i||(i=91),-1===f.indexOf(i)&&229!==i&&f.push(i),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(e){var n=c[e];t[e]&&-1===f.indexOf(n)?f.push(n):!t[e]&&f.indexOf(n)>-1?f.splice(f.indexOf(n),1):"metaKey"===e&&t[e]&&3===f.length&&(t.ctrlKey||t.shiftKey||t.altKey||(f=f.slice(f.indexOf(n))))})),i in l){for(var r in l[i]=!0,h)h[r]===i&&(x[r]=!0);if(!n)return}for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(l[o]=t[c[o]]);t.getModifierState&&(!t.altKey||t.ctrlKey)&&t.getModifierState("AltGraph")&&(-1===f.indexOf(17)&&f.push(17),-1===f.indexOf(18)&&f.push(18),l[17]=!0,l[18]=!0);var s=_();if(n)for(var a=0;a<n.length;a++)n[a].scope===s&&("keydown"===t.type&&n[a].keydown||"keyup"===t.type&&n[a].keyup)&&S(t,n[a],s,e);if(i in u)for(var d=0;d<u[i].length;d++)if(("keydown"===t.type&&u[i][d].keydown||"keyup"===t.type&&u[i][d].keyup)&&u[i][d].key){for(var p=u[i][d],g=p.splitKey,v=p.key.split(g),y=[],b=0;b<v.length;b++)y.push(m(v[b]));y.sort().join("")===f.sort().join("")&&S(t,p,s,e)}}}function x(t,e,n){f=[];var i=s(t),a=[],c="all",d=document,g=0,y=!1,_=!0,b="+",S=!1;for(void 0===n&&"function"==typeof e&&(n=e),"[object Object]"===Object.prototype.toString.call(e)&&(e.scope&&(c=e.scope),e.element&&(d=e.element),e.keyup&&(y=e.keyup),void 0!==e.keydown&&(_=e.keydown),void 0!==e.capture&&(S=e.capture),"string"==typeof e.splitKey&&(b=e.splitKey)),"string"==typeof e&&(c=e);g<i.length;g++)a=[],(t=i[g].split(b)).length>1&&(a=o(h,t)),(t="*"===(t=t[t.length-1])?"*":m(t))in u||(u[t]=[]),u[t].push({keyup:y,keydown:_,scope:c,mods:a,shortcut:i[g],method:n,key:i[g],splitKey:b,element:d});void 0!==d&&!function(t){return v.indexOf(t)>-1}(d)&&window&&(v.push(d),r(d,"keydown",(function(t){w(t,d)}),S),p||(p=!0,r(window,"focus",(function(){f=[]}),S)),r(d,"keyup",(function(t){w(t,d),function(t){var e=t.keyCode||t.which||t.charCode,n=f.indexOf(e);if(n>=0&&f.splice(n,1),t.key&&"meta"===t.key.toLowerCase()&&f.splice(0,f.length),93!==e&&224!==e||(e=91),e in l)for(var i in l[e]=!1,h)h[i]===e&&(x[i]=!1)}(t)}),S))}var k={getPressedKeyString:function(){return f.map((function(t){return e=t,Object.keys(a).find((function(t){return a[t]===e}))||function(t){return Object.keys(h).find((function(e){return h[e]===t}))}(t)||String.fromCharCode(t);var e}))},setScope:y,getScope:_,deleteScope:function(t,e){var n,i;for(var r in t||(t=_()),u)if(Object.prototype.hasOwnProperty.call(u,r))for(n=u[r],i=0;i<n.length;)n[i].scope===t?n.splice(i,1):i++;_()===t&&y(e||"all")},getPressedKeyCodes:function(){return f.slice(0)},isPressed:function(t){return"string"==typeof t&&(t=m(t)),-1!==f.indexOf(t)},filter:function(t){var e=t.target||t.srcElement,n=e.tagName,i=!0;return!e.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||e.readOnly)||(i=!1),i},trigger:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(u).forEach((function(n){u[n].filter((function(n){return n.scope===e&&n.shortcut===t})).forEach((function(t){t&&t.method&&t.method()}))}))},unbind:function(t){if(void 0===t)Object.keys(u).forEach((function(t){return delete u[t]}));else if(Array.isArray(t))t.forEach((function(t){t.key&&b(t)}));else if("object"==typeof t)t.key&&b(t);else if("string"==typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n[0],o=n[1];"function"==typeof r&&(o=r,r=""),b({key:t,scope:r,method:o,splitKey:"+"})}},keyMap:a,modifier:h,modifierMap:c};for(var E in k)Object.prototype.hasOwnProperty.call(k,E)&&(x[E]=k[E]);if("undefined"!=typeof window){var C=window.hotkeys;x.noConflict=function(t){return t&&window.hotkeys===x&&(window.hotkeys=C),x},window.hotkeys=x}},33977:(t,e)=>{e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,h=(1<<a)-1,c=h>>1,l=-7,u=n?r-1:0,d=n?-1:1,f=t[e+u];for(u+=d,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+t[e+u],u+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=i;l>0;s=256*s+t[e+u],u+=d,l-=8);if(0===o)o=1-c;else{if(o===h)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=c}return(f?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,h,c=8*o-r-1,l=(1<<c)-1,u=l>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+u>=1?d/h:d*Math.pow(2,1-u))*h>=2&&(s++,h/=2),s+u>=l?(a=0,s=l):s+u>=1?(a=(e*h-1)*Math.pow(2,r),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[n+f]=255&a,f+=p,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[n+f]=255&s,f+=p,s/=256,c-=8);t[n+f-p]|=128*g}},6505:()=>{!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=window.document,e=[];i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i.prototype.observe=function(t){if(!this._observationTargets.some((function(e){return e.element==t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},i.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},i.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]}))},i.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(window,"resize",this._checkForIntersections,!0),r(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(window,"resize",this._checkForIntersections,!0),o(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(i){var r=i.element,o=s(r),a=this._rootContainsTarget(r),h=i.entry,c=t&&a&&this._computeTargetAndRootIntersection(r,e),l=i.entry=new n({time:window.performance&&performance.now&&performance.now(),target:r,boundingClientRect:o,rootBounds:e,intersectionRect:c});h?t&&a?this._hasCrossedThreshold(h,l)&&this._queuedEntries.push(l):h&&h.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(e,n){if("none"!=window.getComputedStyle(e).display){for(var i,r,o,a,c,l,u,d,f=s(e),p=h(e),g=!1;!g;){var v=null,m=1==p.nodeType?window.getComputedStyle(p):{};if("none"==m.display)return;if(p==this.root||p==t?(g=!0,v=n):p!=t.body&&p!=t.documentElement&&"visible"!=m.overflow&&(v=s(p)),v&&(i=v,r=f,o=void 0,a=void 0,c=void 0,l=void 0,u=void 0,d=void 0,o=Math.max(i.top,r.top),a=Math.min(i.bottom,r.bottom),c=Math.max(i.left,r.left),l=Math.min(i.right,r.right),d=a-o,!(f=(u=l-c)>=0&&d>=0&&{top:o,bottom:a,left:c,right:l,width:u,height:d})))break;p=h(p)}return f}},i.prototype._getRootRect=function(){var e;if(this.root)e=s(this.root);else{var n=t.documentElement,i=t.body;e={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},i.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100})),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,i=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==n||o==i||o<n!=o<i)return!0}},i.prototype._rootIsInDom=function(){return!this.root||a(t,this.root)},i.prototype._rootContainsTarget=function(e){return a(this.root||t,e)},i.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},i.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=i,window.IntersectionObserverEntry=n}function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function i(t,e){var n,i,r,o=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout((function(){n(),r=null}),i))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" ")}function r(t,e,n,i){"function"==typeof t.addEventListener?t.addEventListener(e,n,i||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function o(t,e,n,i){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,i||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function s(t){var e;try{e=t.getBoundingClientRect()}catch(n){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function a(t,e){for(var n=e;n;){if(n==t)return!0;n=h(n)}return!1}function h(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e}}()},96204:(t,e,n)=>{"use strict";n.d(e,{C:()=>c});var i=n(58856),r=n(40109),o=n(79419),s=n(24318);function a(t,e){return e?Object.keys(t).reduce((function(n,r){var o,s;return n[r]=(o=t[r],(s=e[r])?(0,i.pi)((0,i.pi)((0,i.pi)({},o||{}),s||{}),Object.keys(o).reduce((function(t,e){return t[e]=(0,i.pi)((0,i.pi)({},o[e]),s[e]||{}),t}),{})):o),n}),(0,i.pi)({},t)):t}function h(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}var c=function(){function t(e,n,r,c){void 0===n&&(n=t.defaultLocale);var l,u=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(t){var e=u.formatToParts(t);if(1===e.length)return e[0].value;var n=e.reduce((function(t,e){return t.length&&e.type===s.du.literal&&"string"==typeof t[t.length-1]?t[t.length-1]+=e.value:t.push(e.value),t}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(t){return(0,s.FK)(u.ast,u.locales,u.formatters,u.formats,t,void 0,u.message)},this.resolvedOptions=function(){var t;return{locale:(null===(t=u.resolvedLocale)||void 0===t?void 0:t.toString())||Intl.NumberFormat.supportedLocalesOf(u.locales)[0]}},this.getAst=function(){return u.ast},this.locales=n,this.resolvedLocale=t.resolveLocale(n),"string"==typeof e){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var d=c||{},f=(d.formatters,(0,i._T)(d,["formatters"]));this.ast=t.__parse(e,(0,i.pi)((0,i.pi)({},f),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=a(t.formats,r),this.formatters=c&&c.formatters||(void 0===(l=this.formatterCache)&&(l={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:(0,o.H)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.NumberFormat).bind.apply(t,(0,i.ev)([void 0],e,!1)))}),{cache:h(l.number),strategy:o.A.variadic}),getDateTimeFormat:(0,o.H)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.DateTimeFormat).bind.apply(t,(0,i.ev)([void 0],e,!1)))}),{cache:h(l.dateTime),strategy:o.A.variadic}),getPluralRules:(0,o.H)((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.PluralRules).bind.apply(t,(0,i.ev)([void 0],e,!1)))}),{cache:h(l.pluralRules),strategy:o.A.variadic})})}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(t){if(void 0!==Intl.Locale){var e=Intl.NumberFormat.supportedLocalesOf(t);return e.length>0?new Intl.Locale(e[0]):new Intl.Locale("string"==typeof t?t:t[0])}},t.__parse=r.Qc,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}()},24318:(t,e,n)=>{"use strict";n.d(e,{du:()=>s,FK:()=>d});var i,r=n(40109),o=n(58856);!function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"}(i||(i={}));var s,a=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.code=n,r.originalMessage=i,r}return(0,o.ZT)(e,t),e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),h=function(t){function e(e,n,r,o){return t.call(this,'Invalid values for "'.concat(e,'": "').concat(n,'". Options are "').concat(Object.keys(r).join('", "'),'"'),i.INVALID_VALUE,o)||this}return(0,o.ZT)(e,t),e}(a),c=function(t){function e(e,n,r){return t.call(this,'Value for "'.concat(e,'" must be of type ').concat(n),i.INVALID_VALUE,r)||this}return(0,o.ZT)(e,t),e}(a),l=function(t){function e(e,n){return t.call(this,'The intl string context variable "'.concat(e,'" was not provided to the string "').concat(n,'"'),i.MISSING_VALUE,n)||this}return(0,o.ZT)(e,t),e}(a);function u(t){return"function"==typeof t}function d(t,e,n,o,f,p,g){if(1===t.length&&(0,r.O4)(t[0]))return[{type:s.literal,value:t[0].value}];for(var v=[],m=0,y=t;m<y.length;m++){var _=y[m];if((0,r.O4)(_))v.push({type:s.literal,value:_.value});else if((0,r.yx)(_))"number"==typeof p&&v.push({type:s.literal,value:n.getNumberFormat(e).format(p)});else{var b=_.value;if(!f||!(b in f))throw new l(b,g);var S=f[b];if((0,r.VG)(_))S&&"string"!=typeof S&&"number"!=typeof S||(S="string"==typeof S||"number"==typeof S?String(S):""),v.push({type:"string"==typeof S?s.literal:s.object,value:S});else if((0,r.rp)(_)){var w="string"==typeof _.style?o.date[_.style]:(0,r.Ii)(_.style)?_.style.parsedOptions:void 0;v.push({type:s.literal,value:n.getDateTimeFormat(e,w).format(S)})}else if((0,r.pe)(_)){w="string"==typeof _.style?o.time[_.style]:(0,r.Ii)(_.style)?_.style.parsedOptions:o.time.medium;v.push({type:s.literal,value:n.getDateTimeFormat(e,w).format(S)})}else if((0,r.uf)(_)){(w="string"==typeof _.style?o.number[_.style]:(0,r.Wh)(_.style)?_.style.parsedOptions:void 0)&&w.scale&&(S*=w.scale||1),v.push({type:s.literal,value:n.getNumberFormat(e,w).format(S)})}else{if((0,r.HI)(_)){var x=_.children,k=_.value,E=f[k];if(!u(E))throw new c(k,"function",g);var C=E(d(x,e,n,o,f,p).map((function(t){return t.value})));Array.isArray(C)||(C=[C]),v.push.apply(v,C.map((function(t){return{type:"string"==typeof t?s.literal:s.object,value:t}})))}if((0,r.Wi)(_)){if(!(A=_.options[S]||_.options.other))throw new h(_.value,S,Object.keys(_.options),g);v.push.apply(v,d(A.value,e,n,o,f))}else if((0,r.Jo)(_)){var A;if(!(A=_.options["=".concat(S)])){if(!Intl.PluralRules)throw new a('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',i.MISSING_INTL_API,g);var O=n.getPluralRules(e,{type:_.pluralType}).select(S-(_.offset||0));A=_.options[O]||_.options.other}if(!A)throw new h(_.value,S,Object.keys(_.options),g);v.push.apply(v,d(A.value,e,n,o,f,S-(_.offset||0)))}else;}}}return function(t){return t.length<2?t:t.reduce((function(t,e){var n=t[t.length-1];return n&&n.type===s.literal&&e.type===s.literal?n.value+=e.value:t.push(e),t}),[])}(v)}!function(t){t[t.literal=0]="literal",t[t.object=1]="object"}(s||(s={}))},69772:t=>{t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},66966:(t,e,n)=>{"use strict";var i=n(44014);var r={Uri:{createUriRegex:function(t){if("object"!=typeof(t=t||{})||Array.isArray(t))throw new Error("options must be an object");var e="";if(t.scheme){if(Array.isArray(t.scheme)||(t.scheme=[t.scheme]),t.scheme.length<=0)throw new Error("scheme must have at least 1 scheme specified");for(var n=0;n<t.scheme.length;++n){var r=t.scheme[n];if(!(r instanceof RegExp||"string"==typeof r))throw new Error("scheme must only contain Regular Expressions or Strings");if(e+=e?"|":"",r instanceof RegExp)e+=r.source;else{if(!/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(r))throw new Error("scheme at position "+n+" must be a valid scheme");e+=r.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}}}var o="(?:"+(e||i.scheme)+")";return new RegExp("^(?:"+o+":"+i.hierPart+")(?:\\?"+i.query+")?(?:#"+i.fragment+")?$")},uriRegex:new RegExp(i.uri)}};r.Uri.isValid=function(t){return r.Uri.uriRegex.test(t)},t.exports={createUriRegex:r.Uri.createUriRegex,uriRegex:r.Uri.uriRegex,isValid:r.Uri.isValid}},98498:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=__webpack_require__.g:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t){return function(e){return new Md5(!0).update(e)[t]()}},createMethod=function(){var t=createOutputMethod("hex");NODE_JS&&(t=nodeWrap(t)),t.create=function(){return new Md5},t.update=function(e){return t.create().update(e)};for(var e=0;e<OUTPUT_TYPES.length;++e){var n=OUTPUT_TYPES[e];t[n]=createOutputMethod(n)}return t},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(t){if("string"==typeof t)return crypto.createHash("md5").update(t,"utf8").digest("hex");if(null==t)throw ERROR;return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash("md5").update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod};function Md5(t){if(t)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if("string"!==n){if("object"!==n)throw ERROR;if(null===t)throw ERROR;if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw ERROR;e=!0}for(var i,r,o=0,s=t.length,a=this.blocks,h=this.buffer8;o<s;){if(this.hashed&&(this.hashed=!1,a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)if(ARRAY_BUFFER)for(r=this.start;o<s&&r<64;++o)h[r++]=t[o];else for(r=this.start;o<s&&r<64;++o)a[r>>2]|=t[o]<<SHIFT[3&r++];else if(ARRAY_BUFFER)for(r=this.start;o<s&&r<64;++o)(i=t.charCodeAt(o))<128?h[r++]=i:i<2048?(h[r++]=192|i>>6,h[r++]=128|63&i):i<55296||i>=57344?(h[r++]=224|i>>12,h[r++]=128|i>>6&63,h[r++]=128|63&i):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++o)),h[r++]=240|i>>18,h[r++]=128|i>>12&63,h[r++]=128|i>>6&63,h[r++]=128|63&i);else for(r=this.start;o<s&&r<64;++o)(i=t.charCodeAt(o))<128?a[r>>2]|=i<<SHIFT[3&r++]:i<2048?(a[r>>2]|=(192|i>>6)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]):i<55296||i>=57344?(a[r>>2]|=(224|i>>12)<<SHIFT[3&r++],a[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++o)),a[r>>2]|=(240|i>>18)<<SHIFT[3&r++],a[r>>2]|=(128|i>>12&63)<<SHIFT[3&r++],a[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[e>>2]|=EXTRA[3&e],e>=56&&(this.hashed||this.hash(),t[0]=t[16],t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.bytes<<3,t[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var t,e,n,i,r,o,s=this.blocks;this.first?e=((e=((t=((t=s[0]-680876937)<<7|t>>>25)-271733879<<0)^(n=((n=(-271733879^(i=((i=(-1732584194^2004318071&t)+s[1]-117830708)<<12|i>>>20)+t<<0)&(-271733879^t))+s[2]-1126478375)<<17|n>>>15)+i<<0)&(i^t))+s[3]-1316259209)<<22|e>>>10)+n<<0:(t=this.h0,e=this.h1,n=this.h2,e=((e+=((t=((t+=((i=this.h3)^e&(n^i))+s[0]-680876936)<<7|t>>>25)+e<<0)^(n=((n+=(e^(i=((i+=(n^t&(e^n))+s[1]-389564586)<<12|i>>>20)+t<<0)&(t^e))+s[2]+606105819)<<17|n>>>15)+i<<0)&(i^t))+s[3]-1044525330)<<22|e>>>10)+n<<0),e=((e+=((t=((t+=(i^e&(n^i))+s[4]-176418897)<<7|t>>>25)+e<<0)^(n=((n+=(e^(i=((i+=(n^t&(e^n))+s[5]+1200080426)<<12|i>>>20)+t<<0)&(t^e))+s[6]-1473231341)<<17|n>>>15)+i<<0)&(i^t))+s[7]-45705983)<<22|e>>>10)+n<<0,e=((e+=((t=((t+=(i^e&(n^i))+s[8]+1770035416)<<7|t>>>25)+e<<0)^(n=((n+=(e^(i=((i+=(n^t&(e^n))+s[9]-1958414417)<<12|i>>>20)+t<<0)&(t^e))+s[10]-42063)<<17|n>>>15)+i<<0)&(i^t))+s[11]-1990404162)<<22|e>>>10)+n<<0,e=((e+=((t=((t+=(i^e&(n^i))+s[12]+1804603682)<<7|t>>>25)+e<<0)^(n=((n+=(e^(i=((i+=(n^t&(e^n))+s[13]-40341101)<<12|i>>>20)+t<<0)&(t^e))+s[14]-1502002290)<<17|n>>>15)+i<<0)&(i^t))+s[15]+1236535329)<<22|e>>>10)+n<<0,e=((e+=((i=((i+=(e^n&((t=((t+=(n^i&(e^n))+s[1]-165796510)<<5|t>>>27)+e<<0)^e))+s[6]-1069501632)<<9|i>>>23)+t<<0)^t&((n=((n+=(t^e&(i^t))+s[11]+643717713)<<14|n>>>18)+i<<0)^i))+s[0]-373897302)<<20|e>>>12)+n<<0,e=((e+=((i=((i+=(e^n&((t=((t+=(n^i&(e^n))+s[5]-701558691)<<5|t>>>27)+e<<0)^e))+s[10]+38016083)<<9|i>>>23)+t<<0)^t&((n=((n+=(t^e&(i^t))+s[15]-660478335)<<14|n>>>18)+i<<0)^i))+s[4]-405537848)<<20|e>>>12)+n<<0,e=((e+=((i=((i+=(e^n&((t=((t+=(n^i&(e^n))+s[9]+568446438)<<5|t>>>27)+e<<0)^e))+s[14]-1019803690)<<9|i>>>23)+t<<0)^t&((n=((n+=(t^e&(i^t))+s[3]-187363961)<<14|n>>>18)+i<<0)^i))+s[8]+1163531501)<<20|e>>>12)+n<<0,e=((e+=((i=((i+=(e^n&((t=((t+=(n^i&(e^n))+s[13]-1444681467)<<5|t>>>27)+e<<0)^e))+s[2]-51403784)<<9|i>>>23)+t<<0)^t&((n=((n+=(t^e&(i^t))+s[7]+1735328473)<<14|n>>>18)+i<<0)^i))+s[12]-1926607734)<<20|e>>>12)+n<<0,e=((e+=((o=(i=((i+=((r=e^n)^(t=((t+=(r^i)+s[5]-378558)<<4|t>>>28)+e<<0))+s[8]-2022574463)<<11|i>>>21)+t<<0)^t)^(n=((n+=(o^e)+s[11]+1839030562)<<16|n>>>16)+i<<0))+s[14]-35309556)<<23|e>>>9)+n<<0,e=((e+=((o=(i=((i+=((r=e^n)^(t=((t+=(r^i)+s[1]-1530992060)<<4|t>>>28)+e<<0))+s[4]+1272893353)<<11|i>>>21)+t<<0)^t)^(n=((n+=(o^e)+s[7]-155497632)<<16|n>>>16)+i<<0))+s[10]-1094730640)<<23|e>>>9)+n<<0,e=((e+=((o=(i=((i+=((r=e^n)^(t=((t+=(r^i)+s[13]+681279174)<<4|t>>>28)+e<<0))+s[0]-358537222)<<11|i>>>21)+t<<0)^t)^(n=((n+=(o^e)+s[3]-722521979)<<16|n>>>16)+i<<0))+s[6]+76029189)<<23|e>>>9)+n<<0,e=((e+=((o=(i=((i+=((r=e^n)^(t=((t+=(r^i)+s[9]-640364487)<<4|t>>>28)+e<<0))+s[12]-421815835)<<11|i>>>21)+t<<0)^t)^(n=((n+=(o^e)+s[15]+530742520)<<16|n>>>16)+i<<0))+s[2]-995338651)<<23|e>>>9)+n<<0,e=((e+=((i=((i+=(e^((t=((t+=(n^(e|~i))+s[0]-198630844)<<6|t>>>26)+e<<0)|~n))+s[7]+1126891415)<<10|i>>>22)+t<<0)^((n=((n+=(t^(i|~e))+s[14]-1416354905)<<15|n>>>17)+i<<0)|~t))+s[5]-57434055)<<21|e>>>11)+n<<0,e=((e+=((i=((i+=(e^((t=((t+=(n^(e|~i))+s[12]+1700485571)<<6|t>>>26)+e<<0)|~n))+s[3]-1894986606)<<10|i>>>22)+t<<0)^((n=((n+=(t^(i|~e))+s[10]-1051523)<<15|n>>>17)+i<<0)|~t))+s[1]-2054922799)<<21|e>>>11)+n<<0,e=((e+=((i=((i+=(e^((t=((t+=(n^(e|~i))+s[8]+1873313359)<<6|t>>>26)+e<<0)|~n))+s[15]-30611744)<<10|i>>>22)+t<<0)^((n=((n+=(t^(i|~e))+s[6]-1560198380)<<15|n>>>17)+i<<0)|~t))+s[13]+1309151649)<<21|e>>>11)+n<<0,e=((e+=((i=((i+=(e^((t=((t+=(n^(e|~i))+s[4]-145523070)<<6|t>>>26)+e<<0)|~n))+s[11]-1120210379)<<10|i>>>22)+t<<0)^((n=((n+=(t^(i|~e))+s[2]+718787259)<<15|n>>>17)+i<<0)|~t))+s[9]-343485551)<<21|e>>>11)+n<<0,this.first?(this.h0=t+1732584193<<0,this.h1=e-271733879<<0,this.h2=n-1732584194<<0,this.h3=i+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+i<<0)},Md5.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3;return HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3;return[255&t,t>>8&255,t>>16&255,t>>24&255,255&e,e>>8&255,e>>16&255,e>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(16),e=new Uint32Array(t);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,t},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var t,e,n,i="",r=this.array(),o=0;o<15;)t=r[o++],e=r[o++],n=r[o++],i+=BASE64_ENCODE_CHAR[t>>>2]+BASE64_ENCODE_CHAR[63&(t<<4|e>>>4)]+BASE64_ENCODE_CHAR[63&(e<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return t=r[o],i+=BASE64_ENCODE_CHAR[t>>>2]+BASE64_ENCODE_CHAR[t<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()},18398:(t,e,n)=>{var i=n(70019).stringify,r=n(88967);t.exports=function(t){return{parse:r(t),stringify:i}},t.exports.parse=r(),t.exports.stringify=i},88967:(t,e,n)=>{var i=null;const r=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,o=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;t.exports=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=t){if(!0===t.strict&&(e.strict=!0),!0===t.storeAsString&&(e.storeAsString=!0),e.alwaysParseAsBig=!0===t.alwaysParseAsBig&&t.alwaysParseAsBig,e.useNativeBigInt=!0===t.useNativeBigInt&&t.useNativeBigInt,void 0!==t.constructorAction){if("error"!==t.constructorAction&&"ignore"!==t.constructorAction&&"preserve"!==t.constructorAction)throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);e.constructorAction=t.constructorAction}if(void 0!==t.protoAction){if("error"!==t.protoAction&&"ignore"!==t.protoAction&&"preserve"!==t.protoAction)throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`);e.protoAction=t.protoAction}}var s,a,h,c,l={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},u=function(t){throw{name:"SyntaxError",message:t,at:s,text:h}},d=function(t){return t&&t!==a&&u("Expected '"+t+"' instead of '"+a+"'"),a=h.charAt(s),s+=1,a},f=function(){var t,r="";for("-"===a&&(r="-",d("-"));a>="0"&&a<="9";)r+=a,d();if("."===a)for(r+=".";d()&&a>="0"&&a<="9";)r+=a;if("e"===a||"E"===a)for(r+=a,d(),"-"!==a&&"+"!==a||(r+=a,d());a>="0"&&a<="9";)r+=a,d();if(t=+r,isFinite(t))return null==i&&(i=n(18907)),r.length>15?e.storeAsString?r:e.useNativeBigInt?BigInt(r):new i(r):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(t):new i(t):t;u("Bad number")},p=function(){var t,e,n,i="";if('"'===a)for(var r=s;d();){if('"'===a)return s-1>r&&(i+=h.substring(r,s-1)),d(),i;if("\\"===a){if(s-1>r&&(i+=h.substring(r,s-1)),d(),"u"===a){for(n=0,e=0;e<4&&(t=parseInt(d(),16),isFinite(t));e+=1)n=16*n+t;i+=String.fromCharCode(n)}else{if("string"!=typeof l[a])break;i+=l[a]}r=s}}u("Bad string")},g=function(){for(;a&&a<=" ";)d()};return c=function(){switch(g(),a){case"{":return function(){var t,n=Object.create(null);if("{"===a){if(d("{"),g(),"}"===a)return d("}"),n;for(;a;){if(t=p(),g(),d(":"),!0===e.strict&&Object.hasOwnProperty.call(n,t)&&u('Duplicate key "'+t+'"'),!0===r.test(t)?"error"===e.protoAction?u("Object contains forbidden prototype property"):"ignore"===e.protoAction?c():n[t]=c():!0===o.test(t)?"error"===e.constructorAction?u("Object contains forbidden constructor property"):"ignore"===e.constructorAction?c():n[t]=c():n[t]=c(),g(),"}"===a)return d("}"),n;d(","),g()}}u("Bad object")}();case"[":return function(){var t=[];if("["===a){if(d("["),g(),"]"===a)return d("]"),t;for(;a;){if(t.push(c()),g(),"]"===a)return d("]"),t;d(","),g()}}u("Bad array")}();case'"':return p();case"-":return f();default:return a>="0"&&a<="9"?f():function(){switch(a){case"t":return d("t"),d("r"),d("u"),d("e"),!0;case"f":return d("f"),d("a"),d("l"),d("s"),d("e"),!1;case"n":return d("n"),d("u"),d("l"),d("l"),null}u("Unexpected '"+a+"'")}()}},function(t,e){var n;return h=t+"",s=0,a=" ",n=c(),g(),a&&u("Syntax error"),"function"==typeof e?function t(n,i){var r,o=n[i];return o&&"object"==typeof o&&Object.keys(o).forEach((function(e){void 0!==(r=t(o,e))?o[e]=r:delete o[e]})),e.call(n,i,o)}({"":n},""):n}}},70019:(t,e,n)=>{var i=n(18907),r=t.exports;!function(){"use strict";var t,e,n,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function a(t){return o.lastIndex=0,o.test(t)?'"'+t.replace(o,(function(t){var e=s[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function h(r,o){var s,c,l,u,d,f=t,p=o[r],g=null!=p&&(p instanceof i||i.isBigNumber(p));switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(r)),"function"==typeof n&&(p=n.call(o,r,p)),typeof p){case"string":return g?p:a(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":case"bigint":return String(p);case"object":if(!p)return"null";if(t+=e,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(u=p.length,s=0;s<u;s+=1)d[s]=h(s,p)||"null";return l=0===d.length?"[]":t?"[\n"+t+d.join(",\n"+t)+"\n"+f+"]":"["+d.join(",")+"]",t=f,l}if(n&&"object"==typeof n)for(u=n.length,s=0;s<u;s+=1)"string"==typeof n[s]&&(l=h(c=n[s],p))&&d.push(a(c)+(t?": ":":")+l);else Object.keys(p).forEach((function(e){var n=h(e,p);n&&d.push(a(e)+(t?": ":":")+n)}));return l=0===d.length?"{}":t?"{\n"+t+d.join(",\n"+t)+"\n"+f+"}":"{"+d.join(",")+"}",t=f,l}}"function"!=typeof r.stringify&&(r.stringify=function(i,r,o){var s;if(t="",e="","number"==typeof o)for(s=0;s<o;s+=1)e+=" ";else"string"==typeof o&&(e=o);if(n=r,r&&"function"!=typeof r&&("object"!=typeof r||"number"!=typeof r.length))throw new Error("JSON.stringify");return h("",{"":i})})}()},62889:(t,e,n)=>{"use strict";function i(t){return new Promise(((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)}))}function r(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=i(n);return(t,n)=>r.then((i=>n(i.transaction(e,t).objectStore(e))))}let o;function s(){return o||(o=r("keyval-store","keyval")),o}function a(t,e=s()){return e("readonly",(e=>i(e.get(t))))}function h(t,e,n=s()){return n("readwrite",(n=>(n.put(e,t),i(n.transaction))))}function c(t,e=s()){return e("readwrite",(e=>(t.forEach((t=>e.put(t[1],t[0]))),i(e.transaction))))}function l(t,e=s()){return e("readonly",(e=>Promise.all(t.map((t=>i(e.get(t)))))))}function u(t,e=s()){return e("readwrite",(e=>(e.delete(t),i(e.transaction))))}function d(t=s()){return t("readwrite",(t=>(t.clear(),i(t.transaction))))}n.d(e,{IV:()=>u,MT:()=>r,U2:()=>a,ZH:()=>d,t8:()=>h,vw:()=>c,yS:()=>l})},1504:(t,e,n)=>{"use strict";function i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}n.d(e,{Z:()=>r});var r=function t(e,n){function r(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=i({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var a in o)o[a]&&(s+="; "+a,!0!==o[a]&&(s+="="+o[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+s}}return Object.create({set:r,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],i={},r=0;r<n.length;r++){var o=n[r].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(i[a]=e.read(s,a),t===a)break}catch(h){}}return t?i[t]:i}},remove:function(t,e){r(t,"",i({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,i({},this.attributes,e))},withConverter:function(e){return t(i({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},45714:(t,e,n)=>{"use strict";n.d(e,{f:()=>s});var i=n(68678),r=n(74051),o=i.zA.performance&&i.zA.performance.now?function(){return i.zA.performance.now()}:function(){return(new Date).getTime()};class s{constructor(t,e){this.id=s.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:o(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){var e=[];return e=t?t.length>0?t:[t]:[],this.layers=e,this}getLayers(){return this.layers}addLayer(t){var e,n=this.layers,i=n.length;for(e=0;e<i;e++)if(n[e]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){var t,e=s.animations,n=e.length;for(t=0;t<n;t++)if(e[t].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=o(),s._addAnimation(this),this}stop(){return s._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){var e,n=t.id,i=this.animations,r=i.length;for(e=0;e<r;e++)if(i[e].id===n){this.animations.splice(e,1);break}}static _runFrames(){var t,e,n,i,r,s,a,h,c={},l=this.animations;for(i=0;i<l.length;i++)if(e=(t=l[i]).layers,n=t.func,t._updateFrameObject(o()),s=e.length,!n||!1!==n.call(t,t.frame))for(r=0;r<s;r++)void 0!==(a=e[r])._id&&(c[a._id]=a);for(h in c)c.hasOwnProperty(h)&&c[h].batchDraw()}static _animationLoop(){var t=s;t.animations.length?(t._runFrames(),r.Z.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,r.Z.requestAnimFrame(this._animationLoop))}}s.animations=[],s.animIdCounter=0,s.animRunning=!1},45677:(t,e,n)=>{"use strict";n.d(e,{RF:()=>l,Xz:()=>c,hh:()=>u});var i,r=n(74051),o=n(54268),s=n(68678),a=n(95780),h=n(40059);class c{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||s.So.pixelRatio||function(){if(i)return i;var t=r.Z.createCanvasElement(),e=t.getContext("2d");return i=(s.So._global.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1),r.Z.releaseCanvas(t),i}();this.pixelRatio=e,this._canvas=r.Z.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch(n){try{return this._canvas.toDataURL()}catch(i){return r.Z.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}a.F.addGetterSetter(c,"pixelRatio",void 0,(0,h.Kg)());class l extends c{constructor(t={width:0,height:0}){super(t),this.context=new o.xn(this),this.setSize(t.width,t.height)}}class u extends c{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new o.jR(this),this.setSize(t.width,t.height)}}},27484:(t,e,n)=>{"use strict";n.d(e,{W:()=>s});var i=n(95780),r=n(13881),o=n(40059);class s extends r.N{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const e=this.children||[];var n=[];return e.forEach((function(e){t(e)&&n.push(e)})),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach((t=>{t.parent=null,t.index=0,t.remove()})),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach((t=>{t.parent=null,t.index=0,t.destroy()})),this.children=[],this._requestDraw(),this}add(...t){if(0===t.length)return this;if(t.length>1){for(var e=0;e<t.length;e++)this.add(t[e]);return this}const n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){var n=[];return this._descendants((i=>{const r=i._isMatch(t);return r&&n.push(i),!(!r||!e)})),n}_descendants(t){let e=!1;const n=this.getChildren();for(const i of n){if(e=t(i),e)return!0;if(i.hasChildren()&&(e=i._descendants(t),e))return!0}return!1}toObject(){var t=r.N.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach((e=>{t.children.push(e.toObject())})),t}isAncestorOf(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){var e=r.N.prototype.clone.call(this,t);return this.getChildren().forEach((function(t){e.add(t.clone())})),e}getAllIntersections(t){var e=[];return this.find("Shape").forEach((function(n){n.isVisible()&&n.intersects(t)&&e.push(n)})),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),this.isCached()||null===(e=this.children)||void 0===e||e.forEach((function(e){e._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;null===(t=this.children)||void 0===t||t.forEach((function(t,e){t.index=e})),this._requestDraw()}drawScene(t,e){var n=this.getLayer(),i=t||n&&n.getCanvas(),r=i&&i.getContext(),o=this._getCanvasCache(),s=o&&o.scene,a=i&&i.isCache;if(!this.isVisible()&&!a)return this;if(s){r.save();var h=this.getAbsoluteTransform(e).getMatrix();r.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",i,e);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;var n=this.getLayer(),i=t||n&&n.hitCanvas,r=i&&i.getContext(),o=this._getCanvasCache();if(o&&o.hit){r.save();var s=this.getAbsoluteTransform(e).getMatrix();r.transform(s[0],s[1],s[2],s[3],s[4],s[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",i,e);return this}_drawChildren(t,e,n){var i,r=e&&e.getContext(),o=this.clipWidth(),s=this.clipHeight(),a=this.clipFunc(),h=o&&s||a;const c=n===this;if(h){r.save();var l=this.getAbsoluteTransform(n),u=l.getMatrix();if(r.transform(u[0],u[1],u[2],u[3],u[4],u[5]),r.beginPath(),a)a.call(this,r,this);else{var d=this.clipX(),f=this.clipY();r.rect(d,f,o,s)}r.clip(),u=l.copy().invert().getMatrix(),r.transform(u[0],u[1],u[2],u[3],u[4],u[5])}var p=!c&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;p&&(r.save(),r._applyGlobalCompositeOperation(this)),null===(i=this.children)||void 0===i||i.forEach((function(i){i[t](e,n)})),p&&r.restore(),h&&r.restore()}getClientRect(t){var e,n,i,r,o,s=(t=t||{}).skipTransform,a=t.relativeTo,h={x:1/0,y:1/0,width:0,height:0},c=this;null===(e=this.children)||void 0===e||e.forEach((function(e){if(e.visible()){var s=e.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===s.width&&0===s.height||(void 0===n?(n=s.x,i=s.y,r=s.x+s.width,o=s.y+s.height):(n=Math.min(n,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x+s.width),o=Math.max(o,s.y+s.height)))}}));for(var l=this.find("Shape"),u=!1,d=0;d<l.length;d++){if(l[d]._isVisible(this)){u=!0;break}}return h=u&&void 0!==n?{x:n,y:i,width:r-n,height:o-i}:{x:0,y:0,width:0,height:0},s?h:this._transformedRect(h,a)}}i.F.addComponentsGetterSetter(s,"clip",["x","y","width","height"]),i.F.addGetterSetter(s,"clipX",void 0,(0,o.Kg)()),i.F.addGetterSetter(s,"clipY",void 0,(0,o.Kg)()),i.F.addGetterSetter(s,"clipWidth",void 0,(0,o.Kg)()),i.F.addGetterSetter(s,"clipHeight",void 0,(0,o.Kg)()),i.F.addGetterSetter(s,"clipFunc")},54268:(t,e,n)=>{"use strict";n.d(e,{_y:()=>s,jR:()=>h,xn:()=>a});var i=n(74051),r=n(68678);var o=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class s{constructor(t){this.canvas=t,r.So.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){var n,r,o,s,a=this.traceArr,h=a.length,c="";for(n=0;n<h;n++)(o=(r=a[n]).method)?(s=r.args,c+=o,t?c+="()":i.Z._isArray(s[0])?c+="(["+s.join(",")+"])":(e&&(s=s.map((t=>"number"==typeof t?Math.floor(t):t))),c+="("+s.join(",")+")")):(c+=r.property,t||(c+="="+r.val)),c+=";";return c}clearTrace(){this.traceArr=[]}_trace(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)}_applyOpacity(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){var e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}setAttr(t,e){this._context[t]=e}arc(t,e,n,i,r,o){this._context.arc(t,e,n,i,r,o)}arcTo(t,e,n,i,r){this._context.arcTo(t,e,n,i,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,n,i,r,o){this._context.bezierCurveTo(t,e,n,i,r,o)}clearRect(t,e,n,i){this._context.clearRect(t,e,n,i)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(t,e){var n=arguments;return 2===n.length?this._context.createImageData(t,e):1===n.length?this._context.createImageData(t):void 0}createLinearGradient(t,e,n,i){return this._context.createLinearGradient(t,e,n,i)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,n,i,r,o){return this._context.createRadialGradient(t,e,n,i,r,o)}drawImage(t,e,n,i,r,o,s,a,h){var c=arguments,l=this._context;3===c.length?l.drawImage(t,e,n):5===c.length?l.drawImage(t,e,n,i,r):9===c.length&&l.drawImage(t,e,n,i,r,o,s,a,h)}ellipse(t,e,n,i,r,o,s,a){this._context.ellipse(t,e,n,i,r,o,s,a)}isPointInPath(t,e,n,i){return n?this._context.isPointInPath(n,t,e,i):this._context.isPointInPath(t,e,i)}fill(t){t?this._context.fill(t):this._context.fill()}fillRect(t,e,n,i){this._context.fillRect(t,e,n,i)}strokeRect(t,e,n,i){this._context.strokeRect(t,e,n,i)}fillText(t,e,n,i){i?this._context.fillText(t,e,n,i):this._context.fillText(t,e,n)}measureText(t){return this._context.measureText(t)}getImageData(t,e,n,i){return this._context.getImageData(t,e,n,i)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,n,i){this._context.rect(t,e,n,i)}putImageData(t,e,n){this._context.putImageData(t,e,n)}quadraticCurveTo(t,e,n,i){this._context.quadraticCurveTo(t,e,n,i)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,n,i,r,o){this._context.setTransform(t,e,n,i,r,o)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,n,i){this._context.strokeText(t,e,n,i)}transform(t,e,n,i,r,o){this._context.transform(t,e,n,i,r,o)}translate(t,e){this._context.translate(t,e)}_enableTrace(){var t,e,n=this,r=o.length,s=this.setAttr,a=function(t){var r,o=n[t];n[t]=function(){return e=function(t){var e,n,r=[],o=t.length,s=i.Z;for(e=0;e<o;e++)n=t[e],s._isNumber(n)?n=Math.round(1e3*n)/1e3:s._isString(n)||(n+=""),r.push(n);return r}(Array.prototype.slice.call(arguments,0)),r=o.apply(n,arguments),n._trace({method:t,args:e}),r}};for(t=0;t<r;t++)a(o[t]);n.setAttr=function(){s.apply(n,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),n._trace({property:t,val:e})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||"source-over"===e||this.setAttr("globalCompositeOperation",e)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(t){Object.defineProperty(s.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})}));class a extends s{constructor(t){super(t),this._context=t._canvas.getContext("2d")}_fillColor(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){var e=t.fill(),n=t.getFillPriority();if(e&&"color"===n)this._fillColor(t);else{var i=t.getFillPatternImage();if(i&&"pattern"===n)this._fillPattern(t);else{var r=t.getFillLinearGradientColorStops();if(r&&"linear-gradient"===n)this._fillLinearGradient(t);else{var o=t.getFillRadialGradientColorStops();o&&"radial-gradient"===n?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):r?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}}}}_strokeLinearGradient(t){var e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,n.x,n.y);if(i){for(var o=0;o<i.length;o+=2)r.addColorStop(i[o],i[o+1]);this.setAttr("strokeStyle",r)}}_stroke(t){var e=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var e,n,i,r=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",o=null!==(n=t.getShadowBlur())&&void 0!==n?n:5,s=null!==(i=t.getShadowOffset())&&void 0!==i?i:{x:0,y:0},a=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=a.x*h,l=a.y*h;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(l))),this.setAttr("shadowOffsetX",s.x*c),this.setAttr("shadowOffsetY",s.y*l)}}class h extends s{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t);var i=t.hitStrokeWidth(),r="auto"===i?t.strokeWidth():i;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}},89669:(t,e,n)=>{"use strict";n.d(e,{DD:()=>o});var i=n(68678),r=n(74051);const o={get isDragging(){var t=!1;return o._dragElements.forEach((e=>{"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){var t;return o._dragElements.forEach((e=>{t=e.node})),t},_dragElements:new Map,_drag(t){const e=[];o._dragElements.forEach(((n,i)=>{const{node:o}=n,s=o.getStage();s.setPointersPositions(t),void 0===n.pointerId&&(n.pointerId=r.Z._getFirstPointerId(t));const a=s._changedPointerPositions.find((t=>t.id===n.pointerId));if(a){if("dragging"!==n.dragStatus){var h=o.dragDistance();if(Math.max(Math.abs(a.x-n.startPointerPos.x),Math.abs(a.y-n.startPointerPos.y))<h)return;if(o.startDrag({evt:t}),!o.isDragging())return}o._setDragPosition(t,n),e.push(o)}})),e.forEach((e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)}))},_endDragBefore(t){const e=[];o._dragElements.forEach((n=>{const{node:r}=n,s=r.getStage();t&&s.setPointersPositions(t);if(!s._changedPointerPositions.find((t=>t.id===n.pointerId)))return;"dragging"!==n.dragStatus&&"stopped"!==n.dragStatus||(o.justDragged=!0,i.So._mouseListenClick=!1,i.So._touchListenClick=!1,i.So._pointerListenClick=!1,n.dragStatus="stopped");const a=n.node.getLayer()||n.node instanceof i.So.Stage&&n.node;a&&-1===e.indexOf(a)&&e.push(a)})),e.forEach((t=>{t.draw()}))},_endDragAfter(t){o._dragElements.forEach(((e,n)=>{"stopped"===e.dragStatus&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),"dragging"!==e.dragStatus&&o._dragElements.delete(n)}))}};i.So.isBrowser&&(window.addEventListener("mouseup",o._endDragBefore,!0),window.addEventListener("touchend",o._endDragBefore,!0),window.addEventListener("mousemove",o._drag),window.addEventListener("touchmove",o._drag),window.addEventListener("mouseup",o._endDragAfter,!1),window.addEventListener("touchend",o._endDragAfter,!1))},95780:(t,e,n)=>{"use strict";n.d(e,{F:()=>a});var i=n(74051),r=n(40059),o="get",s="set";const a={addGetterSetter(t,e,n,i,r){a.addGetter(t,e,n),a.addSetter(t,e,i,r),a.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){var r=o+i.Z._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var t=this.attrs[e];return void 0===t?n:t}},addSetter(t,e,n,r){var o=s+i.Z._capitalize(e);t.prototype[o]||a.overWriteSetter(t,e,n,r)},overWriteSetter(t,e,n,r){var o=s+i.Z._capitalize(e);t.prototype[o]=function(t){return n&&null!=t&&(t=n.call(this,t,e)),this._setAttr(e,t),r&&r.call(this),this}},addComponentsGetterSetter(t,e,n,h,c){var l,u,d=n.length,f=i.Z._capitalize,p=o+f(e),g=s+f(e);t.prototype[p]=function(){var t={};for(l=0;l<d;l++)t[u=n[l]]=this.getAttr(e+f(u));return t};var v=(0,r.uZ)(n);t.prototype[g]=function(t){var i,r=this.attrs[e];for(i in h&&(t=h.call(this,t)),v&&v.call(this,t,e),t)t.hasOwnProperty(i)&&this._setAttr(e+f(i),t[i]);return t||n.forEach((t=>{this._setAttr(e+f(t),void 0)})),this._fireChangeEvent(e,r,t),c&&c.call(this),this},a.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var n=i.Z._capitalize(e),r=s+n,a=o+n;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[a]()}},addDeprecatedGetterSetter(t,e,n,r){i.Z.error("Adding deprecated "+e);var s=o+i.Z._capitalize(e),h=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[s]=function(){i.Z.error(h);var t=this.attrs[e];return void 0===t?n:t},a.addSetter(t,e,r,(function(){i.Z.error(h)})),a.addOverloadedGetterSetter(t,e)},backCompat(t,e){i.Z.each(e,(function(e,n){var r=t.prototype[n],a=o+i.Z._capitalize(e),h=s+i.Z._capitalize(e);function c(){r.apply(this,arguments),i.Z.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[e]=c,t.prototype[a]=c,t.prototype[h]=c}))},afterSetFilter(){this._filterUpToDate=!1}}},68678:(t,e,n)=>{"use strict";n.d(e,{DA:()=>s,So:()=>o,zA:()=>r});var i=Math.PI/180;const r="undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},o={_global:r,version:"8.4.2",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle:t=>o.angleDeg?t*i:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>o.DD.isDragging,isDragReady:()=>!!o.DD.node,releaseCanvasOnDestroy:!0,document:r.document,_injectGlobal(t){r.Konva=t}},s=t=>{o[t.prototype.getClassName()]=t};o._injectGlobal(o)},3856:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(74051),r=n(27484),o=n(68678);class s extends r.W{_validateAdd(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&i.Z.throw("You may only add groups and shapes to groups.")}}s.prototype.nodeType="Group",(0,o.DA)(s)},81287:(t,e,n)=>{"use strict";n.d(e,{m:()=>f});var i=n(74051),r=n(27484),o=n(13881),s=n(95780),a=n(45677),h=n(40059),c=n(19926),l=n(68678),u=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],d=u.length;class f extends r.W{constructor(t){super(t),this.canvas=new a.RF,this.hitCanvas=new a.hh({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){o.N.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!o.N.prototype.moveUp.call(this))return!1;var t=this.getStage();return!(!t||!t.content)&&(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(o.N.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(o.N.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return o.N.prototype.remove.call(this),t&&t.parentNode&&i.Z._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&i.Z.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),o.N.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){const t=this.visible();this.canvas._canvas.style.display=t?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){i.Z.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){i.Z.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,i.Z.requestAnimFrame((()=>{this.draw(),this._waitingForDraw=!1}))),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(let i=0;i<d;i++){const r=u[i],o=this._getIntersection({x:t.x+r.x*e,y:t.y+r.y*e}),s=o.shape;if(s)return s;if(n=!!o.antialiased,!o.antialiased)break}if(!n)return null;e+=1}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,r=n[3];if(255===r){const t=i.Z._rgbToHex(n[0],n[1],n[2]),e=c.J["#"+t];return e?{shape:e}:{antialiased:!0}}return r>0?{antialiased:!0}:{}}drawScene(t,e){var n=this.getLayer(),i=t||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),r.W.prototype.drawScene.call(this,i,e),this._fire("draw",{node:this}),this}drawHit(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),r.W.prototype.drawHit.call(this,i,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){i.Z.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return i.Z.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}destroy(){return i.Z.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}f.prototype.nodeType="Layer",(0,l.DA)(f),s.F.addGetterSetter(f,"imageSmoothingEnabled",!0),s.F.addGetterSetter(f,"clearBeforeDraw",!0),s.F.addGetterSetter(f,"hitGraphEnabled",!0,(0,h.I0)())},13881:(t,e,n)=>{"use strict";n.d(e,{N:()=>k});var i=n(74051),r=n(95780),o=n(45677),s=n(68678),a=n(89669),h=n(40059),c="absoluteOpacity",l="allEventListeners",u="absoluteTransform",d="absoluteScale",f="canvas",p="listening",g="mouseenter",v="mouseleave",m="Shape",y=" ",_="stage",b="transform",S="visible",w=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(y);let x=1;class k{constructor(t){this._id=x++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){t!==b&&t!==u||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}_getCache(t,e){var n=this._cache.get(t);return(void 0===n||(t===b||t===u)&&!0===n.dirty)&&(n=e.call(this),this._cache.set(t,n)),n}_calculate(t,e,n){if(!this._attachedDepsListeners.get(t)){const n=e.map((t=>t+"Change.konva")).join(y);this.on(n,(()=>{this._clearCache(t)})),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(f)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===u&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(f)){const{scene:t,filter:e,hit:n}=this._cache.get(f);i.Z.releaseCanvas(t,e,n),this._cache.delete(f)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var e=t||{},n={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var r=Math.ceil(e.width||n.width),s=Math.ceil(e.height||n.height),a=e.pixelRatio,h=void 0===e.x?Math.floor(n.x):e.x,l=void 0===e.y?Math.floor(n.y):e.y,u=e.offset||0,p=e.drawBorder||!1,g=e.hitCanvasPixelRatio||1;if(r&&s){r+=2*u+1,s+=2*u+1,h-=u,l-=u;var v=new o.RF({pixelRatio:a,width:r,height:s}),m=new o.RF({pixelRatio:a,width:0,height:0}),y=new o.hh({pixelRatio:g,width:r,height:s}),_=v.getContext(),b=y.getContext();return y.isCache=!0,v.isCache=!0,this._cache.delete(f),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(v.getContext()._context.imageSmoothingEnabled=!1,m.getContext()._context.imageSmoothingEnabled=!1),_.save(),b.save(),_.translate(-h,-l),b.translate(-h,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(d),this.drawScene(v,this),this.drawHit(y,this),this._isUnderCache=!1,_.restore(),b.restore(),p&&(_.save(),_.beginPath(),_.rect(0,0,r,s),_.closePath(),_.setAttr("strokeStyle","red"),_.setAttr("lineWidth",5),_.stroke(),_.restore()),this._cache.set(f,{scene:v,filter:m,hit:y,x:h,y:l}),this._requestDraw(),this}i.Z.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(f)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){var n,i,r,o,s=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],a=this.getAbsoluteTransform(e);return s.forEach((function(t){var e=a.point(t);void 0===n&&(n=r=e.x,i=o=e.y),n=Math.min(n,e.x),i=Math.min(i,e.y),r=Math.max(r,e.x),o=Math.max(o,e.y)})),{x:n,y:i,width:r-n,height:o-i}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);var n=this._getCachedSceneCanvas(),i=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/i,n.height/i),t.restore()}_drawCachedHitCanvas(t){var e=this._getCanvasCache(),n=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t,e,n,r,o=this.filters(),s=this._getCanvasCache(),a=s.scene,h=s.filter,c=h.getContext();if(o){if(!this._filterUpToDate){var l=a.pixelRatio;h.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio);try{for(t=o.length,c.clear(),c.drawImage(a._canvas,0,0,a.getWidth()/l,a.getHeight()/l),e=c.getImageData(0,0,h.getWidth(),h.getHeight()),n=0;n<t;n++)"function"==typeof(r=o[n])?(r.call(this,e),c.putImageData(e,0,0)):i.Z.error("Filter should be type of function, but got "+typeof r+" instead. Please check correct filters")}catch(u){i.Z.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return h}return a}on(t,e){if(this._cache&&this._cache.delete(l),3===arguments.length)return this._delegate.apply(this,arguments);var n,i,r,o,s=t.split(y),a=s.length;for(n=0;n<a;n++)r=(i=s[n].split("."))[0],o=i[1]||"",this.eventListeners[r]||(this.eventListeners[r]=[]),this.eventListeners[r].push({name:o,handler:e});return this}off(t,e){var n,i,r,o,s,a=(t||"").split(y),h=a.length;if(this._cache&&this._cache.delete(l),!t)for(i in this.eventListeners)this._off(i);for(n=0;n<h;n++)if(o=(r=a[n].split("."))[0],s=r[1],o)this.eventListeners[o]&&this._off(o,s,e);else for(i in this.eventListeners)this._off(i,s,e);return this}dispatchEvent(t){var e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,n){var r=this;this.on(t,(function(t){for(var o=t.target.findAncestors(e,!0,r),s=0;s<o.length;s++)(t=i.Z.cloneObject(t)).currentTarget=o[s],n.call(o[s],t)}))}remove(){return this.isDragging()&&this.stopDrag(),a.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(_),this._clearSelfAndDescendantCache(S),this._clearSelfAndDescendantCache(p)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){var e="get"+i.Z._capitalize(t);return i.Z._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges((()=>{var e,n;if(!t)return this;for(e in t)"children"!==e&&(n="set"+i.Z._capitalize(e),i.Z._isFunction(this[n])?this[n](t[e]):this._setAttr(e,t[e]))})),this}isListening(){return this._getCache(p,this._isListening)}_isListening(t){if(!this.listening())return!1;const e=this.getParent();return!e||e===t||this===t||e._isListening(t)}isVisible(){return this._getCache(S,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const e=this.getParent();return!e||e===t||this===t||e._isVisible(t)}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);var n=this.getLayer(),i=!1;a.DD._dragElements.forEach((t=>{"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===n)&&(i=!0)}));var r=!e&&!s.So.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t,e,n,i,r=this.getDepth(),o=this,s=0;return"Stage"!==o.nodeType&&function a(h){for(t=[],e=h.length,n=0;n<e;n++)i=h[n],s++,i.nodeType!==m&&(t=t.concat(i.getChildren().slice())),i._id===o._id&&(n=e);t.length>0&&t[0].getDepth()<=r&&a(t)}(o.getStage().getChildren()),s}getDepth(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(b),this._clearSelfAndDescendantCache(u)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges((()=>{this.x(t.x),this.y(t.y)})),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var e=this.getAbsoluteTransform().copy();return e.invert(),e.point(t)}getAbsolutePosition(t){let e=!1,n=this.parent;for(;n;){if(n.isCached()){e=!0;break}n=n.parent}e&&!t&&(t=!0);var r=this.getAbsoluteTransform(t).getMatrix(),o=new i.w,s=this.offset();return o.m=r.slice(),o.translate(s.x,s.y),o.getTranslation()}setAbsolutePosition(t){var e=this._clearTransform();this.attrs.x=e.x,this.attrs.y=e.y,delete e.x,delete e.y,this._clearCache(b);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(t.x,t.y),t={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(e),this.setPosition({x:t.x,y:t.y}),this._clearCache(b),this._clearSelfAndDescendantCache(u),this}_setTransform(t){var e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var e=t.x,n=t.y,i=this.x(),r=this.y();return void 0!==e&&(i+=e),void 0!==n&&(r+=n),this.setPosition({x:i,y:r}),this}_eachAncestorReverse(t,e){var n,i,r=[],o=this.getParent();if(!e||e._id!==this._id){for(r.unshift(this);o&&(!e||o._id!==e._id);)r.unshift(o),o=o.parent;for(n=r.length,i=0;i<n;i++)t(r[i])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return i.Z.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return i.Z.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return i.Z.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return i.Z.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(t){if(!this.parent)return i.Z.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&i.Z.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(c,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t,e,n,r,o={},s=this.getAttrs();for(t in o.attrs={},s)e=s[t],i.Z.isObject(e)&&!i.Z._isPlainObject(e)&&!i.Z._isArray(e)||(n="function"==typeof this[t]&&this[t],delete s[t],r=n?n.call(this):null,s[t]=e,r!==e&&(o.attrs[t]=e));return o.className=this.getClassName(),i.Z._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,n){var i=[];e&&this._isMatch(t)&&i.push(this);for(var r=this.parent;r;){if(r===n)return i;r._isMatch(t)&&i.push(r),r=r.parent}return i}isAncestorOf(t){return!1}findAncestor(t,e,n){return this.findAncestors(t,e,n)[0]}_isMatch(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,n,r=t.replace(/ /g,"").split(","),o=r.length;for(e=0;e<o;e++)if(n=r[e],i.Z.isValidSelector(n)||(i.Z.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),i.Z.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),i.Z.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(_,this._getStage)}_getStage(){var t=this.getParent();return t?t.getStage():void 0}fire(t,e={},n){return e.target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(u,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var e;if(t)return e=new i.w,this._eachAncestorReverse((function(t){var n=t.transformsEnabled();"all"===n?e.multiply(t.getTransform()):"position"===n&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;e=this._cache.get(u)||new i.w,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var n=this.transformsEnabled();if("all"===n)e.multiply(this.getTransform());else if("position"===n){const t=this.attrs.x||0,n=this.attrs.y||0,i=this.attrs.offsetX||0,r=this.attrs.offsetY||0;e.translate(t-i,n-r)}return e.dirty=!1,e}getAbsoluteScale(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();const n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(b,this._getTransform)}_getTransform(){var t,e,n=this._cache.get(b)||new i.w;n.reset();var r=this.x(),o=this.y(),a=s.So.getAngle(this.rotation()),h=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,c=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,l=this.attrs.skewX||0,u=this.attrs.skewY||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return 0===r&&0===o||n.translate(r,o),0!==a&&n.rotate(a),0===l&&0===u||n.skew(l,u),1===h&&1===c||n.scale(h,c),0===d&&0===f||n.translate(-1*d,-1*f),n.dirty=!1,n}clone(t){var e,n,r,o,s,a=i.Z.cloneObject(this.attrs);for(e in t)a[e]=t[e];var h=new this.constructor(a);for(e in this.eventListeners)for(r=(n=this.eventListeners[e]).length,o=0;o<r;o++)(s=n[o]).name.indexOf("konva")<0&&(h.eventListeners[e]||(h.eventListeners[e]=[]),h.eventListeners[e].push(s));return h}_toKonvaCanvas(t){t=t||{};var e=this.getClientRect(),n=this.getStage(),i=void 0!==t.x?t.x:Math.floor(e.x),r=void 0!==t.y?t.y:Math.floor(e.y),s=t.pixelRatio||1,a=new o.RF({width:t.width||Math.ceil(e.width)||(n?n.width():0),height:t.height||Math.ceil(e.height)||(n?n.height():0),pixelRatio:s}),h=a.getContext();return!1===t.imageSmoothingEnabled&&(h._context.imageSmoothingEnabled=!1),h.save(),(i||r)&&h.translate(-1*i,-1*r),this.drawScene(a),h.restore(),a}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){var e=(t=t||{}).mimeType||null,n=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(e,n);return t.callback&&t.callback(i),i}toImage(t){return new Promise(((e,n)=>{try{const n=null==t?void 0:t.callback;n&&delete t.callback,i.Z._urlToImage(this.toDataURL(t),(function(t){e(t),null==n||n(t)}))}catch(r){n(r)}}))}toBlob(t){return new Promise(((e,n)=>{try{const n=null==t?void 0:t.callback;n&&delete t.callback,this.toCanvas(t).toBlob((t=>{e(t),null==n||n(t)}))}catch(i){n(i)}}))}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():s.So.dragDistance}_off(t,e,n){var i,r,o,s=this.eventListeners[t];for(i=0;i<s.length;i++)if(r=s[i].name,o=s[i].handler,!("konva"===r&&"konva"!==e||e&&r!==e||n&&n!==o)){if(s.splice(i,1),0===s.length){delete this.eventListeners[t];break}i--}}_fireChangeEvent(t,e,n){this._fire(t+"Change",{oldVal:e,newVal:n})}addName(t){if(!this.hasName(t)){var e=this.name(),n=e?e+" "+t:t;this.name(n)}return this}hasName(t){if(!t)return!1;const e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)}removeName(t){var e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.name(e.join(" "))),this}setAttr(t,e){var n=this["set"+i.Z._capitalize(t)];return i.Z._isFunction(n)?n.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(s.So.autoDrawEnabled){const t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}_setAttr(t,e){var n=this.attrs[t];(n!==e||i.Z.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,e),this._requestDraw())}_setComponentAttr(t,e,n){var i;void 0!==n&&((i=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,i,n))}_fireAndBubble(t,e,n){if(e&&this.nodeType===m&&(e.target=this),!((t===g||t===v)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n))){this._fire(t,e);var i=(t===g||t===v)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!i&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){let e=this._cache.get(l);if(!e){e={};let t=Object.getPrototypeOf(this);for(;t;)if(t.eventListeners){for(var n in t.eventListeners){const i=t.eventListeners[n],r=e[n]||[];e[n]=i.concat(r)}t=Object.getPrototypeOf(t)}else t=Object.getPrototypeOf(t);this._cache.set(l,e)}return e[t]}_fire(t,e){(e=e||{}).currentTarget=this,e.type=t;const n=this._getProtoListeners(t);if(n)for(var i=0;i<n.length;i++)n[i].handler.call(this,e);const r=this.eventListeners[t];if(r)for(i=0;i<r.length;i++)r[i].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var e=t?t.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition(),r=n._getPointerById(e)||n._changedPointerPositions[0]||i;a.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-i.x,y:r.y-i.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){a.DD._dragElements.has(this._id)||this._createDragElement(t);a.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const n=this.getStage()._getPointerById(e.pointerId);if(n){var r={x:n.x-e.offset.x,y:n.y-e.offset.y},o=this.dragBoundFunc();if(void 0!==o){const e=o.call(this,r,t);e?r=e:i.Z.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===r.x&&this._lastPos.y===r.y||(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}}stopDrag(t){const e=a.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),a.DD._endDragBefore(t),a.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=a.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){if((!(void 0!==t.evt.button)||s.So.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var e=!1;a.DD._dragElements.forEach((t=>{this.isAncestorOf(t.node)&&(e=!0)})),e||this._createDragElement(t)}}))}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=a.DD._dragElements.get(this._id),e=t&&"dragging"===t.dragStatus,n=t&&"ready"===t.dragStatus;e?this.stopDrag():n&&a.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const n={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return i.Z.haveIntersection(n,this.getClientRect())}static create(t,e){return i.Z._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){var n,r,o,a=k.prototype.getClassName.call(t),h=t.children;e&&(t.attrs.container=e),s.So[a]||(i.Z.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape");if(n=new(0,s.So[a])(t.attrs),h)for(r=h.length,o=0;o<r;o++)n.add(k._createNode(h[o]));return n}}k.prototype.nodeType="Node",k.prototype._attrsAffectingSize=[],k.prototype.eventListeners={},k.prototype.on.call(k.prototype,w,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(b),this._clearSelfAndDescendantCache(u))})),k.prototype.on.call(k.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(S)})),k.prototype.on.call(k.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(p)})),k.prototype.on.call(k.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(c)}));const E=r.F.addGetterSetter;E(k,"zIndex"),E(k,"absolutePosition"),E(k,"position"),E(k,"x",0,(0,h.Kg)()),E(k,"y",0,(0,h.Kg)()),E(k,"globalCompositeOperation","source-over",(0,h.sY)()),E(k,"opacity",1,(0,h.Kg)()),E(k,"name","",(0,h.sY)()),E(k,"id","",(0,h.sY)()),E(k,"rotation",0,(0,h.Kg)()),r.F.addComponentsGetterSetter(k,"scale",["x","y"]),E(k,"scaleX",1,(0,h.Kg)()),E(k,"scaleY",1,(0,h.Kg)()),r.F.addComponentsGetterSetter(k,"skew",["x","y"]),E(k,"skewX",0,(0,h.Kg)()),E(k,"skewY",0,(0,h.Kg)()),r.F.addComponentsGetterSetter(k,"offset",["x","y"]),E(k,"offsetX",0,(0,h.Kg)()),E(k,"offsetY",0,(0,h.Kg)()),E(k,"dragDistance",null,(0,h.Kg)()),E(k,"width",0,(0,h.Kg)()),E(k,"height",0,(0,h.Kg)()),E(k,"listening",!0,(0,h.I0)()),E(k,"preventDefault",!0,(0,h.I0)()),E(k,"filters",null,(function(t){return this._filterUpToDate=!1,t})),E(k,"visible",!0,(0,h.I0)()),E(k,"transformsEnabled","all",(0,h.sY)()),E(k,"size"),E(k,"dragBoundFunc"),E(k,"draggable",!1,(0,h.I0)()),r.F.backCompat(k,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},14194:(t,e,n)=>{"use strict";n.d(e,{I5:()=>c,Xg:()=>l,q0:()=>h,rl:()=>s,yM:()=>a});var i=n(68678);const r=new Map,o=void 0!==i.So._global.PointerEvent;function s(t){return r.get(t)}function a(t){return{evt:t,pointerId:t.pointerId}}function h(t,e){return r.get(t)===e}function c(t,e){l(t);e.getStage()&&(r.set(t,e),o&&e._fire("gotpointercapture",a(new PointerEvent("gotpointercapture"))))}function l(t,e){const n=r.get(t);if(!n)return;const i=n.getStage();i&&i.content,r.delete(t),o&&n._fire("lostpointercapture",a(new PointerEvent("lostpointercapture")))}},19926:(t,e,n)=>{"use strict";n.d(e,{J:()=>v,b:()=>m});var i=n(68678),r=n(74051),o=n(95780),s=n(13881),a=n(40059),h=n(14194),c="hasShadow",l="shadowRGBA",u="patternImage",d="linearGradient",f="radialGradient";let p;function g(){return p||(p=r.Z.createCanvasElement().getContext("2d"),p)}const v={};class m extends s.N{constructor(t){let e;for(super(t);e=r.Z.getRandomColor(),!e||e in v;);this.colorKey=e,v[e]=this}getContext(){return r.Z.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Z.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(u,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=g().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const e=new r.w;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(i.So.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=e.getMatrix(),o="undefined"==typeof DOMMatrix?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);t.setTransform(o)}return t}}_getLinearGradient(){return this._getCache(d,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var e=g(),n=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),r=e.createLinearGradient(n.x,n.y,i.x,i.y),o=0;o<t.length;o+=2)r.addColorStop(t[o],t[o+1]);return r}}_getRadialGradient(){return this._getCache(f,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var e=g(),n=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),r=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),o=0;o<t.length;o+=2)r.addColorStop(t[o],t[o+1]);return r}}getShadowRGBA(){return this._getCache(l,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var t=r.Z.colorToRGBA(this.shadowColor());return t?"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")":void 0}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())))}hasHitStroke(){const t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e,null,!0),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return s.N.prototype.destroy.call(this),delete v[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!this.getStage())return!1;if(!(null===(e=this.attrs.perfectDrawEnabled)||void 0===e||e))return!1;const n=t||this.hasFill(),i=this.hasStroke(),r=1!==this.getAbsoluteOpacity();if(n&&i&&r)return!0;const o=this.hasShadow(),s=this.shadowForStrokeEnabled();return!!(n&&i&&o&&s)}setStrokeHitEnabled(t){r.Z.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){const e=t.skipTransform,n=t.relativeTo,i=this.getSelfRect(),r=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=i.width+r,s=i.height+r,a=!t.skipShadow&&this.hasShadow(),h=a?this.shadowOffsetX():0,c=a?this.shadowOffsetY():0,l=o+Math.abs(h),u=s+Math.abs(c),d=a&&this.shadowBlur()||0,f={width:l+2*d,height:u+2*d,x:-(r/2+d)+Math.min(h,0)+i.x,y:-(r/2+d)+Math.min(c,0)+i.y};return e?f:this._transformedRect(f,n)}drawScene(t,e){var n,i,r=this.getLayer(),o=t||r.getCanvas(),s=o.getContext(),a=this._getCanvasCache(),h=this.getSceneFunc(),c=this.hasShadow(),l=o.isCache,u=e===this;if(!this.isVisible()&&!u)return this;if(a){s.save();var d=this.getAbsoluteTransform(e).getMatrix();return s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!h)return this;if(s.save(),this._useBufferCanvas()&&!l){(i=(n=this.getStage().bufferCanvas).getContext()).clear(),i.save(),i._applyLineJoin(this);var f=this.getAbsoluteTransform(e).getMatrix();i.transform(f[0],f[1],f[2],f[3],f[4],f[5]),h.call(this,i,this),i.restore();var p=n.pixelRatio;c&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(n._canvas,0,0,n.width/p,n.height/p)}else{if(s._applyLineJoin(this),!u){f=this.getAbsoluteTransform(e).getMatrix();s.transform(f[0],f[1],f[2],f[3],f[4],f[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}c&&s._applyShadow(this),h.call(this,s,this)}return s.restore(),this}drawHit(t,e,n=!1){if(!this.shouldDrawHit(e,n))return this;var i=this.getLayer(),o=t||i.hitCanvas,s=o&&o.getContext(),a=this.hitFunc()||this.sceneFunc(),h=this._getCanvasCache(),c=h&&h.hit;if(this.colorKey||r.Z.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){s.save();var l=this.getAbsoluteTransform(e).getMatrix();return s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore(),this}if(!a)return this;s.save(),s._applyLineJoin(this);if(!(this===e)){var u=this.getAbsoluteTransform(e).getMatrix();s.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return a.call(this,s,this),s.restore(),this}drawHitFromCache(t=0){var e,n,i,o,s,a=this._getCanvasCache(),h=this._getCachedSceneCanvas(),c=a.hit,l=c.getContext(),u=c.getWidth(),d=c.getHeight();l.clear(),l.drawImage(h._canvas,0,0,u,d);try{for(i=(n=(e=l.getImageData(0,0,u,d)).data).length,o=r.Z._hexToRgb(this.colorKey),s=0;s<i;s+=4)n[s+3]>t?(n[s]=o.r,n[s+1]=o.g,n[s+2]=o.b,n[s+3]=255):n[s+3]=0;l.putImageData(e,0,0)}catch(f){r.Z.error("Unable to draw hit graph from cached scene canvas. "+f.message)}return this}hasPointerCapture(t){return h.q0(t,this)}setPointerCapture(t){h.I5(t,this)}releaseCapture(t){h.Xg(t,this)}}m.prototype._fillFunc=function(t){t.fill()},m.prototype._strokeFunc=function(t){t.stroke()},m.prototype._fillFuncHit=function(t){t.fill()},m.prototype._strokeFuncHit=function(t){t.stroke()},m.prototype._centroid=!1,m.prototype.nodeType="Shape",(0,i.DA)(m),m.prototype.eventListeners={},m.prototype.on.call(m.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(c)})),m.prototype.on.call(m.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",(function(){this._clearCache(l)})),m.prototype.on.call(m.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",(function(){this._clearCache(u)})),m.prototype.on.call(m.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",(function(){this._clearCache(d)})),m.prototype.on.call(m.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",(function(){this._clearCache(f)})),o.F.addGetterSetter(m,"stroke",void 0,(0,a.if)()),o.F.addGetterSetter(m,"strokeWidth",2,(0,a.Kg)()),o.F.addGetterSetter(m,"fillAfterStrokeEnabled",!1),o.F.addGetterSetter(m,"hitStrokeWidth","auto",(0,a.hi)()),o.F.addGetterSetter(m,"strokeHitEnabled",!0,(0,a.I0)()),o.F.addGetterSetter(m,"perfectDrawEnabled",!0,(0,a.I0)()),o.F.addGetterSetter(m,"shadowForStrokeEnabled",!0,(0,a.I0)()),o.F.addGetterSetter(m,"lineJoin"),o.F.addGetterSetter(m,"lineCap"),o.F.addGetterSetter(m,"sceneFunc"),o.F.addGetterSetter(m,"hitFunc"),o.F.addGetterSetter(m,"dash"),o.F.addGetterSetter(m,"dashOffset",0,(0,a.Kg)()),o.F.addGetterSetter(m,"shadowColor",void 0,(0,a.sY)()),o.F.addGetterSetter(m,"shadowBlur",0,(0,a.Kg)()),o.F.addGetterSetter(m,"shadowOpacity",1,(0,a.Kg)()),o.F.addComponentsGetterSetter(m,"shadowOffset",["x","y"]),o.F.addGetterSetter(m,"shadowOffsetX",0,(0,a.Kg)()),o.F.addGetterSetter(m,"shadowOffsetY",0,(0,a.Kg)()),o.F.addGetterSetter(m,"fillPatternImage"),o.F.addGetterSetter(m,"fill",void 0,(0,a.if)()),o.F.addGetterSetter(m,"fillPatternX",0,(0,a.Kg)()),o.F.addGetterSetter(m,"fillPatternY",0,(0,a.Kg)()),o.F.addGetterSetter(m,"fillLinearGradientColorStops"),o.F.addGetterSetter(m,"strokeLinearGradientColorStops"),o.F.addGetterSetter(m,"fillRadialGradientStartRadius",0),o.F.addGetterSetter(m,"fillRadialGradientEndRadius",0),o.F.addGetterSetter(m,"fillRadialGradientColorStops"),o.F.addGetterSetter(m,"fillPatternRepeat","repeat"),o.F.addGetterSetter(m,"fillEnabled",!0),o.F.addGetterSetter(m,"strokeEnabled",!0),o.F.addGetterSetter(m,"shadowEnabled",!0),o.F.addGetterSetter(m,"dashEnabled",!0),o.F.addGetterSetter(m,"strokeScaleEnabled",!0),o.F.addGetterSetter(m,"fillPriority","color"),o.F.addComponentsGetterSetter(m,"fillPatternOffset",["x","y"]),o.F.addGetterSetter(m,"fillPatternOffsetX",0,(0,a.Kg)()),o.F.addGetterSetter(m,"fillPatternOffsetY",0,(0,a.Kg)()),o.F.addComponentsGetterSetter(m,"fillPatternScale",["x","y"]),o.F.addGetterSetter(m,"fillPatternScaleX",1,(0,a.Kg)()),o.F.addGetterSetter(m,"fillPatternScaleY",1,(0,a.Kg)()),o.F.addComponentsGetterSetter(m,"fillLinearGradientStartPoint",["x","y"]),o.F.addComponentsGetterSetter(m,"strokeLinearGradientStartPoint",["x","y"]),o.F.addGetterSetter(m,"fillLinearGradientStartPointX",0),o.F.addGetterSetter(m,"strokeLinearGradientStartPointX",0),o.F.addGetterSetter(m,"fillLinearGradientStartPointY",0),o.F.addGetterSetter(m,"strokeLinearGradientStartPointY",0),o.F.addComponentsGetterSetter(m,"fillLinearGradientEndPoint",["x","y"]),o.F.addComponentsGetterSetter(m,"strokeLinearGradientEndPoint",["x","y"]),o.F.addGetterSetter(m,"fillLinearGradientEndPointX",0),o.F.addGetterSetter(m,"strokeLinearGradientEndPointX",0),o.F.addGetterSetter(m,"fillLinearGradientEndPointY",0),o.F.addGetterSetter(m,"strokeLinearGradientEndPointY",0),o.F.addComponentsGetterSetter(m,"fillRadialGradientStartPoint",["x","y"]),o.F.addGetterSetter(m,"fillRadialGradientStartPointX",0),o.F.addGetterSetter(m,"fillRadialGradientStartPointY",0),o.F.addComponentsGetterSetter(m,"fillRadialGradientEndPoint",["x","y"]),o.F.addGetterSetter(m,"fillRadialGradientEndPointX",0),o.F.addGetterSetter(m,"fillRadialGradientEndPointY",0),o.F.addGetterSetter(m,"fillPatternRotation",0),o.F.backCompat(m,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})},85846:(t,e,n)=>{"use strict";n.d(e,{H:()=>L,U:()=>G});var i=n(74051),r=n(95780),o=n(27484),s=n(68678),a=n(45677),h=n(89669),c=n(14194),l="mouseleave",u="mouseover",d="mouseenter",f="mousemove",p="mousedown",g="mouseup",v="pointermove",m="pointerdown",y="pointerup",_="pointercancel",b="pointerout",S="pointerleave",w="pointerover",x="pointerenter",k="contextmenu",E="touchstart",C="touchend",A="touchmove",O="touchcancel",R="wheel",T=[[d,"_pointerenter"],[p,"_pointerdown"],[f,"_pointermove"],[g,"_pointerup"],[l,"_pointerleave"],[E,"_pointerdown"],[A,"_pointermove"],[C,"_pointerup"],[O,"_pointercancel"],[u,"_pointerover"],[R,"_wheel"],[k,"_contextmenu"],[m,"_pointerdown"],[v,"_pointermove"],[y,"_pointerup"],[_,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const P={mouse:{[b]:"mouseout",[S]:l,[w]:u,[x]:d,[v]:f,[m]:p,[y]:g,[_]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[b]:"touchout",[S]:"touchleave",[w]:"touchover",[x]:"touchenter",[v]:A,[m]:E,[y]:C,[_]:O,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[b]:b,[S]:S,[w]:w,[x]:x,[v]:v,[m]:m,[y]:y,[_]:_,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},D=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",I=t=>{const e=D(t);return"pointer"===e?s.So.pointerEventsEnabled&&P.pointer:"touch"===e?P.touch:"mouse"===e?P.mouse:void 0};function M(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&i.Z.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const G=[];class L extends o.W{constructor(t){super(M(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),G.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(()=>{M(this.attrs)})),this._checkVisibility()}_validateAdd(t){const e="Layer"===t.getType(),n="FastLayer"===t.getType();e||n||i.Z.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if("string"==typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var n;n="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(n)}if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this}clone(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),o.W.prototype.clone.call(this,t)}destroy(){super.destroy();var t=this.content;t&&i.Z._isInDocument(t)&&this.container().removeChild(t);var e=G.indexOf(this);return e>-1&&G.splice(e,1),i.Z.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(i.Z.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(t){return this._pointerPositions.find((e=>e.id===t))}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new a.RF({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),n=e.getContext()._context,i=this.children;return(t.x||t.y)&&n.translate(-1*t.x,-1*t.y),i.forEach((function(e){if(e.isVisible()){var i=e._toKonvaCanvas(t);n.drawImage(i._canvas,t.x,t.y,i.getWidth()/i.getPixelRatio(),i.getHeight()/i.getPixelRatio())}})),e}getIntersection(t){if(!t)return null;var e,n=this.children;for(e=n.length-1;e>=0;e--){const i=n[e].getIntersection(t);if(i)return i}return null}_resizeDOM(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach((n=>{n.setSize({width:t,height:e}),n.draw()}))}add(t,...e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(t);var r=this.children.length;return r>5&&i.Z.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),s.So.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return c.q0(t,this)}setPointerCapture(t){c.I5(t,this)}releaseCapture(t){c.Xg(t,this)}getLayers(){return this.children}_bindContentEvents(){s.So.isBrowser&&T.forEach((([t,e])=>{this.content.addEventListener(t,(t=>{this[e](t)}),{passive:!1})}))}_pointerenter(t){this.setPointersPositions(t);const e=I(t.type);this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=I(t.type);this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=I(t.type),n=D(t.type);if(e){this.setPointersPositions(t);var i=this._getTargetShape(n),r=!h.DD.isDragging||s.So.hitOnDragEnabled;i&&r?(i._fireAndBubble(e.pointerout,{evt:t}),i._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(t){const e=I(t.type),n=D(t.type);if(e){this.setPointersPositions(t);var i=!1;this._changedPointerPositions.forEach((r=>{var o=this.getIntersection(r);h.DD.justDragged=!1,s.So["_"+n+"ListenClick"]=!0;if(!(o&&o.isListening()))return;s.So.capturePointerEventsEnabled&&o.setPointerCapture(r.id),this[n+"ClickStartShape"]=o,o._fireAndBubble(e.pointerdown,{evt:t,pointerId:r.id}),i=!0;const a=t.type.indexOf("touch")>=0;o.preventDefault()&&t.cancelable&&a&&t.preventDefault()})),i||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){const e=I(t.type),n=D(t.type);if(!e)return;if(h.DD.isDragging&&h.DD.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t),!(!h.DD.isDragging||s.So.hitOnDragEnabled))return;var i={};let r=!1;var o=this._getTargetShape(n);this._changedPointerPositions.forEach((s=>{const a=c.rl(s.id)||this.getIntersection(s),h=s.id,l={evt:t,pointerId:h};var u=o!==a;if(u&&o&&(o._fireAndBubble(e.pointerout,Object.assign({},l),a),o._fireAndBubble(e.pointerleave,Object.assign({},l),a)),a){if(i[a._id])return;i[a._id]=!0}a&&a.isListening()?(r=!0,u&&(a._fireAndBubble(e.pointerover,Object.assign({},l),o),a._fireAndBubble(e.pointerenter,Object.assign({},l),o),this[n+"targetShape"]=a),a._fireAndBubble(e.pointermove,Object.assign({},l))):o&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:h}),this[n+"targetShape"]=null)})),r||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=I(t.type),n=D(t.type);if(!e)return;this.setPointersPositions(t);const i=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"];var o={};let a=!1;this._changedPointerPositions.forEach((l=>{const u=c.rl(l.id)||this.getIntersection(l);if(u){if(u.releaseCapture(l.id),o[u._id])return;o[u._id]=!0}const d=l.id,f={evt:t,pointerId:d};let p=!1;s.So["_"+n+"InDblClickWindow"]?(p=!0,clearTimeout(this[n+"DblTimeout"])):h.DD.justDragged||(s.So["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout((function(){s.So["_"+n+"InDblClickWindow"]=!1}),s.So.dblClickWindow),u&&u.isListening()?(a=!0,this[n+"ClickEndShape"]=u,u._fireAndBubble(e.pointerup,Object.assign({},f)),s.So["_"+n+"ListenClick"]&&i&&i===u&&(u._fireAndBubble(e.pointerclick,Object.assign({},f)),p&&r&&r===u&&u._fireAndBubble(e.pointerdblclick,Object.assign({},f)))):(this[n+"ClickEndShape"]=null,s.So["_"+n+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:d}),p&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:d}))})),a||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.So["_"+n+"ListenClick"]=!1,t.cancelable&&"touch"!==n&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(k,{evt:t}):this._fire(k,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(R,{evt:t}):this._fire(R,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=c.rl(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(y,c.yM(t)),c.Xg(t.pointerId)}_lostpointercapture(t){c.Xg(t.pointerId)}setPointersPositions(t){var e=this._getContentPosition(),n=null,r=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,(t=>{this._pointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})})),Array.prototype.forEach.call(t.changedTouches||t.touches,(t=>{this._changedPointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})}))):(n=(t.clientX-e.left)/e.scaleX,r=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:n,y:r},this._pointerPositions=[{x:n,y:r,id:i.Z._getFirstPointerId(t)}],this._changedPointerPositions=[{x:n,y:r,id:i.Z._getFirstPointerId(t)}])}_setPointerPosition(t){i.Z.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.RF({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.hh({pixelRatio:1,width:this.width(),height:this.height()}),s.So.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return i.Z.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach((function(t){t.batchDraw()})),this}}L.prototype.nodeType="Stage",(0,s.DA)(L),r.F.addGetterSetter(L,"container")},97172:(t,e,n)=>{"use strict";n.d(e,{k:()=>u,z:()=>d});var i=n(74051),r=n(45714),o=n(13881),s=n(68678),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},h=0,c=["fill","stroke","shadowColor"];class l{constructor(t,e,n,i,r,o,s){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=s,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()}fire(t){var e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class u{constructor(t){var e,n,o=this,c=t.node,f=c._id,p=t.easing||d.Linear,g=!!t.yoyo;e=void 0===t.duration?.3:0===t.duration?.001:t.duration,this.node=c,this._id=h++;var v=c.getLayer()||(c instanceof s.So.Stage?c.getLayers():null);for(n in v||i.Z.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.f((function(){o.tween.onEnterFrame()}),v),this.tween=new l(n,(function(t){o._tweenFunc(t)}),p,0,1,1e3*e,g),this._addListeners(),u.attrs[f]||(u.attrs[f]={}),u.attrs[f][this._id]||(u.attrs[f][this._id]={}),u.tweens[f]||(u.tweens[f]={}),t)void 0===a[n]&&this._addAttr(n,t[n]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){var n,r,o,s,a,h,l,d,f=this.node,p=f._id;if((o=u.tweens[p][t])&&delete u.attrs[p][o][t],n=f.getAttr(t),i.Z._isArray(e))if(r=[],a=Math.max(e.length,n.length),"points"===t&&e.length!==n.length&&(e.length>n.length?(l=n,n=i.Z._prepareArrayForTween(n,e,f.closed())):(h=e,e=i.Z._prepareArrayForTween(e,n,f.closed()))),0===t.indexOf("fill"))for(s=0;s<a;s++)if(s%2==0)r.push(e[s]-n[s]);else{var g=i.Z.colorToRGBA(n[s]);d=i.Z.colorToRGBA(e[s]),n[s]=g,r.push({r:d.r-g.r,g:d.g-g.g,b:d.b-g.b,a:d.a-g.a})}else for(s=0;s<a;s++)r.push(e[s]-n[s]);else-1!==c.indexOf(t)?(n=i.Z.colorToRGBA(n),r={r:(d=i.Z.colorToRGBA(e)).r-n.r,g:d.g-n.g,b:d.b-n.b,a:d.a-n.a}):r=e-n;u.attrs[p][this._id][t]={start:n,diff:r,end:e,trueEnd:h,trueStart:l},u.tweens[p][t]=this._id}_tweenFunc(t){var e,n,r,o,s,a,h,l,d=this.node,f=u.attrs[d._id][this._id];for(e in f){if(r=(n=f[e]).start,o=n.diff,l=n.end,i.Z._isArray(r))if(s=[],h=Math.max(r.length,l.length),0===e.indexOf("fill"))for(a=0;a<h;a++)a%2==0?s.push((r[a]||0)+o[a]*t):s.push("rgba("+Math.round(r[a].r+o[a].r*t)+","+Math.round(r[a].g+o[a].g*t)+","+Math.round(r[a].b+o[a].b*t)+","+(r[a].a+o[a].a*t)+")");else for(a=0;a<h;a++)s.push((r[a]||0)+o[a]*t);else s=-1!==c.indexOf(e)?"rgba("+Math.round(r.r+o.r*t)+","+Math.round(r.g+o.g*t)+","+Math.round(r.b+o.b*t)+","+(r.a+o.a*t)+")":r+o*t;d.setAttr(e,s)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var t=this.node,e=u.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var t=this.node,e=u.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(1e3*t),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var t,e=this.node._id,n=this._id,i=u.tweens[e];for(t in this.pause(),i)delete u.tweens[e][t];delete u.attrs[e][n]}}u.attrs={},u.tweens={},o.N.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new u(t).play()};const d={BackEaseIn(t,e,n,i){var r=1.70158;return n*(t/=i)*t*((r+1)*t-r)+e},BackEaseOut(t,e,n,i){var r=1.70158;return n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},BackEaseInOut(t,e,n,i){var r=1.70158;return(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},ElasticEaseIn(t,e,n,i,r,o){var s=0;return 0===t?e:1==(t/=i)?e+n:(o||(o=.3*i),!r||r<Math.abs(n)?(r=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/o)+e)},ElasticEaseOut(t,e,n,i,r,o){var s=0;return 0===t?e:1==(t/=i)?e+n:(o||(o=.3*i),!r||r<Math.abs(n)?(r=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin((t*i-s)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut(t,e,n,i,r,o){var s=0;return 0===t?e:2==(t/=i/2)?e+n:(o||(o=i*(.3*1.5)),!r||r<Math.abs(n)?(r=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/o)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut:(t,e,n,i)=>(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e,BounceEaseIn:(t,e,n,i)=>n-d.BounceEaseOut(i-t,0,n,i)+e,BounceEaseInOut:(t,e,n,i)=>t<i/2?.5*d.BounceEaseIn(2*t,0,n,i)+e:.5*d.BounceEaseOut(2*t-i,0,n,i)+.5*n+e,EaseIn:(t,e,n,i)=>n*(t/=i)*t+e,EaseOut:(t,e,n,i)=>-n*(t/=i)*(t-2)+e,EaseInOut:(t,e,n,i)=>(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e,StrongEaseIn:(t,e,n,i)=>n*(t/=i)*t*t*t*t+e,StrongEaseOut:(t,e,n,i)=>n*((t=t/i-1)*t*t*t*t+1)+e,StrongEaseInOut:(t,e,n,i)=>(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e,Linear:(t,e,n,i)=>n*t/i+e}},74051:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d,w:()=>r});var i=n(68678);class r{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[0]*e+this.m[2]*n,r=this.m[1]*e+this.m[3]*n,o=this.m[0]*-n+this.m[2]*e,s=this.m[1]*-n+this.m[3]*e;return this.m[0]=i,this.m[1]=r,this.m[2]=o,this.m[3]=s,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){var n=this.m[0]+this.m[2]*e,i=this.m[1]+this.m[3]*e,r=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=o,this}multiply(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],i=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],s=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=o,this.m[5]=s,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,i=-this.m[2]*t,r=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=o,this.m[5]=s,this}getMatrix(){return this.m}decompose(){var t=this.m[0],e=this.m[1],n=this.m[2],i=this.m[3],r=t*i-e*n;let o={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=e){var s=Math.sqrt(t*t+e*e);o.rotation=e>0?Math.acos(t/s):-Math.acos(t/s),o.scaleX=s,o.scaleY=r/s,o.skewX=(t*n+e*i)/r,o.skewY=0}else if(0!=n||0!=i){var a=Math.sqrt(n*n+i*i);o.rotation=Math.PI/2-(i>0?Math.acos(-n/a):-Math.acos(n/a)),o.scaleX=r/a,o.scaleY=a,o.skewX=0,o.skewY=(t*n+e*i)/r}return o.rotation=d._getRotation(o.rotation),o}}var o=Math.PI/180,s=180/Math.PI,a="Konva error: ",h={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},c=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,l=[];const u="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)},d={_isElement:t=>!(!t||1!=t.nodeType),_isFunction:t=>!!(t&&t.constructor&&t.call&&t.apply),_isPlainObject:t=>!!t&&t.constructor===Object,_isArray:t=>"[object Array]"===Object.prototype.toString.call(t),_isNumber:t=>"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t),_isString:t=>"[object String]"===Object.prototype.toString.call(t),_isBoolean:t=>"[object Boolean]"===Object.prototype.toString.call(t),isObject:t=>t instanceof Object,isValidSelector(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:t=>0===t||t>0?1:-1,requestAnimFrame(t){l.push(t),1===l.length&&u((function(){const t=l;l=[],t.forEach((function(t){t()}))}))},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(e){}return t},createImageElement:()=>document.createElement("img"),_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var n=d.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex:(t,e,n)=>((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1),_hexToRgb(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},getRGB(t){var e;return t in h?{r:(e=h[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=c.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:t=>(t=t||"black",d._namedColorToRBA(t)||d._hex3ColorToRGBA(t)||d._hex4ColorToRGBA(t)||d._hex6ColorToRGBA(t)||d._hex8ColorToRGBA(t)||d._rgbColorToRGBA(t)||d._rgbaColorToRGBA(t)||d._hslColorToRGBA(t)),_namedColorToRBA(t){var e=h[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(((t,e)=>"%"===t.slice(-1)?3===e?parseInt(t)/100:parseInt(t)/100*255:Number(t)));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if("#"===t[0]&&9===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if("#"===t[0]&&5===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),i=Number(n[0])/360,r=Number(n[1])/100,o=Number(n[2])/100;let s,a,h;if(0===r)return h=255*o,{r:Math.round(h),g:Math.round(h),b:Math.round(h),a:1};s=o<.5?o*(1+r):o+r-o*r;const c=2*o-s,l=[0,0,0];for(let t=0;t<3;t++)a=i+1/3*-(t-1),a<0&&a++,a>1&&a--,h=6*a<1?c+6*(s-c)*a:2*a<1?s:3*a<2?c+(s-c)*(2/3-a)*6:c,l[t]=255*h;return{r:Math.round(l[0]),g:Math.round(l[1]),b:Math.round(l[2]),a:1}}},haveIntersection:(t,e)=>!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y),cloneObject(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray:t=>t.slice(0),degToRad:t=>t*o,radToDeg:t=>t*s,_degToRad:t=>(d.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),d.degToRad(t)),_radToDeg:t=>(d.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),d.radToDeg(t)),_getRotation:t=>i.So.angleDeg?d.radToDeg(t):t,_capitalize:t=>t.charAt(0).toUpperCase()+t.slice(1),throw(t){throw new Error(a+t)},error(t){console.error(a+t)},warn(t){i.So.showWarnings&&console.warn("Konva warning: "+t)},each(t,e){for(var n in t)e(n,t[n])},_inRange:(t,e,n)=>e<=t&&t<n,_getProjectionToSegment(t,e,n,i,r,o){var s,a,h,c=(t-n)*(t-n)+(e-i)*(e-i);if(0==c)s=t,a=e,h=(r-n)*(r-n)+(o-i)*(o-i);else{var l=((r-t)*(n-t)+(o-e)*(i-e))/c;l<0?(s=t,a=e,h=(t-r)*(t-r)+(e-o)*(e-o)):l>1?(s=n,a=i,h=(n-r)*(n-r)+(i-o)*(i-o)):h=((s=t+l*(n-t))-r)*(s-r)+((a=e+l*(i-e))-o)*(a-o)}return[s,a,h]},_getProjectionToLine(t,e,n){var i=d.cloneObject(t),r=Number.MAX_VALUE;return e.forEach((function(o,s){if(n||s!==e.length-1){var a=e[(s+1)%e.length],h=d._getProjectionToSegment(o.x,o.y,a.x,a.y,t.x,t.y),c=h[0],l=h[1],u=h[2];u<r&&(i.x=c,i.y=l,r=u)}})),i},_prepareArrayForTween(t,e,n){var i,r=[],o=[];if(t.length>e.length){var s=e;e=t,t=s}for(i=0;i<t.length;i+=2)r.push({x:t[i],y:t[i+1]});for(i=0;i<e.length;i+=2)o.push({x:e[i],y:e[i+1]});var a=[];return o.forEach((function(t){var e=d._getProjectionToLine(t,r,n);a.push(e.x),a.push(e.y)})),a},_prepareToStringify(t){var e;for(var n in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(n)&&t[n]&&"object"==typeof t[n])if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||d._isElement(t[n])){if(!e.configurable)return null;delete t[n]}else if(null===d._prepareToStringify(t[n])){if(!e.configurable)return null;delete t[n]}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId:t=>t.touches?t.changedTouches[0].identifier:t.pointerId||999,releaseCanvas(...t){i.So.releaseCanvasOnDestroy&&t.forEach((t=>{t.width=0,t.height=0}))},drawRoundedRectPath(t,e,n,i){let r=0,o=0,s=0,a=0;"number"==typeof i?r=o=s=a=Math.min(i,e/2,n/2):(r=Math.min(i[0]||0,e/2,n/2),o=Math.min(i[1]||0,e/2,n/2),a=Math.min(i[2]||0,e/2,n/2),s=Math.min(i[3]||0,e/2,n/2)),t.moveTo(r,0),t.lineTo(e-o,0),t.arc(e-o,o,o,3*Math.PI/2,0,!1),t.lineTo(e,n-a),t.arc(e-a,n-a,a,0,Math.PI/2,!1),t.lineTo(s,n),t.arc(s,n-s,s,Math.PI/2,Math.PI,!1),t.lineTo(0,r),t.arc(r,r,r,Math.PI,3*Math.PI/2,!1)}}},40059:(t,e,n)=>{"use strict";n.d(e,{I0:()=>f,Jj:()=>h,Kg:()=>a,hi:()=>c,if:()=>u,q8:()=>d,sY:()=>l,uZ:()=>p,xj:()=>s});var i=n(68678),r=n(74051);function o(t){return r.Z._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||r.Z._isBoolean(t)?t:Object.prototype.toString.call(t)}function s(t){return t>255?255:t<0?0:Math.round(t)}function a(){if(i.So.isUnminified)return function(t,e){return r.Z._isNumber(t)||r.Z.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function h(t){if(i.So.isUnminified)return function(e,n){let i=r.Z._isNumber(e),s=r.Z._isArray(e)&&e.length==t;return i||s||r.Z.warn(o(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function c(){if(i.So.isUnminified)return function(t,e){return r.Z._isNumber(t)||"auto"===t||r.Z.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function l(){if(i.So.isUnminified)return function(t,e){return r.Z._isString(t)||r.Z.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function u(){if(i.So.isUnminified)return function(t,e){const n=r.Z._isString(t),i="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return n||i||r.Z.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function d(){if(i.So.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(r.Z._isArray(t)?t.forEach((function(t){r.Z._isNumber(t)||r.Z.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):r.Z.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function f(){if(i.So.isUnminified)return function(t,e){return!0===t||!1===t||r.Z.warn(o(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function p(t){if(i.So.isUnminified)return function(e,n){return null==e||r.Z.isObject(e)||r.Z.warn(o(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}},21237:(t,e,n)=>{"use strict";n.d(e,{default:()=>tt});var i=n(68678),r=n(74051),o=n(13881),s=n(27484),a=n(85846),h=n(81287);class c extends h.m{constructor(t){super(t),this.listening(!1),r.Z.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}c.prototype.nodeType="FastLayer",(0,i.DA)(c);var l=n(3856),u=n(89669),d=n(19926),f=n(45714),p=n(97172),g=n(54268),v=n(45677);const m=r.Z._assign(i.So,{Util:r.Z,Transform:r.w,Node:o.N,Container:s.W,Stage:a.H,stages:a.U,Layer:h.m,FastLayer:c,Group:l.Z,DD:u.DD,Shape:d.b,shapes:d.J,Animation:f.f,Tween:p.k,Easings:p.z,Context:g._y,Canvas:v.Xz});var y=n(95780),_=n(40059);class b extends d.b{_sceneFunc(t){var e=i.So.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,n),t.arc(0,0,this.innerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),n=this.clockwise(),r=i.So.getAngle(n?360-this.angle():this.angle()),o=Math.cos(Math.min(r,Math.PI)),s=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),a=Math.sin(Math.min(r,Math.PI/2)),h=o*(o>0?t:e),c=s*(s>0?t:e),l=a*(a>0?e:t);return{x:h,y:n?-1*l:c,width:1*e-h,height:l-c}}}b.prototype._centroid=!0,b.prototype.className="Arc",b.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i.DA)(b),y.F.addGetterSetter(b,"innerRadius",0,(0,_.Kg)()),y.F.addGetterSetter(b,"outerRadius",0,(0,_.Kg)()),y.F.addGetterSetter(b,"angle",0,(0,_.Kg)()),y.F.addGetterSetter(b,"clockwise",!1,(0,_.I0)());var S=n(82080),w=n(99986);class x extends S.x{_sceneFunc(t){super._sceneFunc(t);var e=2*Math.PI,n=this.points(),i=n,r=0!==this.tension()&&n.length>4;r&&(i=this.getTensionPoints());var o,s,a=this.pointerLength(),h=n.length;if(r){const t=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],n[h-2],n[h-1]],e=w.y.calcLength(i[i.length-4],i[i.length-3],"C",t),r=w.y.getPointOnQuadraticBezier(Math.min(1,1-a/e),t[0],t[1],t[2],t[3],t[4],t[5]);o=n[h-2]-r.x,s=n[h-1]-r.y}else o=n[h-2]-n[h-4],s=n[h-1]-n[h-3];var c=(Math.atan2(s,o)+e)%e,l=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(n[h-2],n[h-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-a,l/2),t.lineTo(-a,-l/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(n[0],n[1]),r?(o=(i[0]+i[2])/2-n[0],s=(i[1]+i[3])/2-n[1]):(o=n[2]-n[0],s=n[3]-n[1]),t.rotate((Math.atan2(-s,-o)+e)%e),t.moveTo(0,0),t.lineTo(-a,l/2),t.lineTo(-a,-l/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}}}x.prototype.className="Arrow",(0,i.DA)(x),y.F.addGetterSetter(x,"pointerLength",10,(0,_.Kg)()),y.F.addGetterSetter(x,"pointerWidth",10,(0,_.Kg)()),y.F.addGetterSetter(x,"pointerAtBeginning",!1),y.F.addGetterSetter(x,"pointerAtEnding",!0);var k=n(92122);class E extends d.b{_sceneFunc(t){var e=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}E.prototype.className="Ellipse",E.prototype._centroid=!0,E.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,i.DA)(E),y.F.addComponentsGetterSetter(E,"radius",["x","y"]),y.F.addGetterSetter(E,"radiusX",0,(0,_.Kg)()),y.F.addGetterSetter(E,"radiusY",0,(0,_.Kg)());var C=n(60391),A=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],O="up",R="right",T="down",P="left",D=A.length;class I extends l.Z{constructor(t){super(t),this.on("add.konva",(function(t){this._addListeners(t.child),this._sync()}))}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var e,n=this,i=function(){n._sync()};for(e=0;e<D;e++)t.on(A[e]+"Change.konva",i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t,e,n,i,r,o,s,a=this.getText(),h=this.getTag();if(a&&h){switch(t=a.width(),e=a.height(),n=h.pointerDirection(),i=h.pointerWidth(),s=h.pointerHeight(),r=0,o=0,n){case O:r=t/2,o=-1*s;break;case R:r=t+i,o=e/2;break;case T:r=t/2,o=e+s;break;case P:r=-1*i,o=e/2}h.setAttrs({x:-1*r,y:-1*o,width:t,height:e}),a.setAttrs({x:-1*r,y:-1*o})}}}I.prototype.className="Label",(0,i.DA)(I);class M extends d.b{_sceneFunc(t){var e=this.width(),n=this.height(),i=this.pointerDirection(),r=this.pointerWidth(),o=this.pointerHeight(),s=this.cornerRadius();let a=0,h=0,c=0,l=0;"number"==typeof s?a=h=c=l=Math.min(s,e/2,n/2):(a=Math.min(s[0]||0,e/2,n/2),h=Math.min(s[1]||0,e/2,n/2),l=Math.min(s[2]||0,e/2,n/2),c=Math.min(s[3]||0,e/2,n/2)),t.beginPath(),t.moveTo(a,0),i===O&&(t.lineTo((e-r)/2,0),t.lineTo(e/2,-1*o),t.lineTo((e+r)/2,0)),t.lineTo(e-h,0),t.arc(e-h,h,h,3*Math.PI/2,0,!1),i===R&&(t.lineTo(e,(n-o)/2),t.lineTo(e+r,n/2),t.lineTo(e,(n+o)/2)),t.lineTo(e,n-l),t.arc(e-l,n-l,l,0,Math.PI/2,!1),i===T&&(t.lineTo((e+r)/2,n),t.lineTo(e/2,n+o),t.lineTo((e-r)/2,n)),t.lineTo(c,n),t.arc(c,n-c,c,Math.PI/2,Math.PI,!1),i===P&&(t.lineTo(0,(n+o)/2),t.lineTo(-1*r,n/2),t.lineTo(0,(n-o)/2)),t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,e=0,n=this.pointerWidth(),i=this.pointerHeight(),r=this.pointerDirection(),o=this.width(),s=this.height();return r===O?(e-=i,s+=i):r===T?s+=i:r===P?(t-=1.5*n,o+=n):r===R&&(o+=1.5*n),{x:t,y:e,width:o,height:s}}}M.prototype.className="Tag",(0,i.DA)(M),y.F.addGetterSetter(M,"pointerDirection","none"),y.F.addGetterSetter(M,"pointerWidth",0,(0,_.Kg)()),y.F.addGetterSetter(M,"pointerHeight",0,(0,_.Kg)()),y.F.addGetterSetter(M,"cornerRadius",0,(0,_.Jj)(4));var G=n(79890),L=n(97380),F=2*Math.PI;class N extends d.b{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,F,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),F,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}N.prototype.className="Ring",N.prototype._centroid=!0,N.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i.DA)(N),y.F.addGetterSetter(N,"innerRadius",0,(0,_.Kg)()),y.F.addGetterSetter(N,"outerRadius",0,(0,_.Kg)());class Z extends d.b{constructor(t){super(t),this._updated=!0,this.anim=new f.f((()=>{var t=this._updated;return this._updated=!1,t})),this.on("animationChange.konva",(function(){this.frameIndex(0)})),this.on("frameIndexChange.konva",(function(){this._updated=!0})),this.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}))}_sceneFunc(t){var e=this.animation(),n=this.frameIndex(),i=4*n,r=this.animations()[e],o=this.frameOffsets(),s=r[i+0],a=r[i+1],h=r[i+2],c=r[i+3],l=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,c),t.closePath(),t.fillStrokeShape(this)),l)if(o){var u=o[e],d=2*n;t.drawImage(l,s,a,h,c,u[d+0],u[d+1],h,c)}else t.drawImage(l,s,a,h,c,0,0,h,c)}_hitFunc(t){var e=this.animation(),n=this.frameIndex(),i=4*n,r=this.animations()[e],o=this.frameOffsets(),s=r[i+2],a=r[i+3];if(t.beginPath(),o){var h=o[e],c=2*n;t.rect(h[c+0],h[c+1],s,a)}else t.rect(0,0,s,a);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),e=this.animation();t<this.animations()[e].length/4-1?this.frameIndex(t+1):this.frameIndex(0)}}Z.prototype.className="Sprite",(0,i.DA)(Z),y.F.addGetterSetter(Z,"animation"),y.F.addGetterSetter(Z,"animations"),y.F.addGetterSetter(Z,"frameOffsets"),y.F.addGetterSetter(Z,"image"),y.F.addGetterSetter(Z,"frameIndex",0,(0,_.Kg)()),y.F.addGetterSetter(Z,"frameRate",17,(0,_.Kg)()),y.F.backCompat(Z,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class j extends d.b{_sceneFunc(t){var e=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var r=1;r<2*i;r++){var o=r%2==0?n:e,s=o*Math.sin(r*Math.PI/i),a=-1*o*Math.cos(r*Math.PI/i);t.lineTo(s,a)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}j.prototype.className="Star",j.prototype._centroid=!0,j.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,i.DA)(j),y.F.addGetterSetter(j,"numPoints",5,(0,_.Kg)()),y.F.addGetterSetter(j,"innerRadius",0,(0,_.Kg)()),y.F.addGetterSetter(j,"outerRadius",0,(0,_.Kg)());var z=n(67233),B="normal";function U(t){t.fillText(this.partialText,0,0)}function K(t){t.strokeText(this.partialText,0,0)}class H extends d.b{constructor(t){super(t),this.dummyCanvas=r.Z.createCanvasElement(),this.dataArray=[],this.dataArray=w.y.parsePathData(this.attrs.data),this.on("dataChange.konva",(function(){this.dataArray=w.y.parsePathData(this.attrs.data),this._setTextData()})),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),n=this.fill(),i=this.fontSize(),r=this.glyphInfo;"underline"===e&&t.beginPath();for(var o=0;o<r.length;o++){t.save();var s=r[o].p0;t.translate(s.x,s.y),t.rotate(r[o].rotation),this.partialText=r[o].text,t.fillStrokeShape(this),"underline"===e&&(0===o&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=i/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var i=0;i<e.length;i++){var r=e[i].p1;t.lineTo(r.x,r.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return r.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return z.x.prototype.setText.call(this,t)}_getContextFont(){return z.x.prototype._getContextFont.call(this)}_getTextSize(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var n=e.measureText(t);return e.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,e=this._getTextSize(this.attrs.text),n=this.letterSpacing(),i=this.align(),r=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var s=0,a=0;a<t.dataArray.length;a++)t.dataArray[a].pathLength>0&&(s+=t.dataArray[a].pathLength);var h=0;"center"===i&&(h=Math.max(0,s/2-o/2)),"right"===i&&(h=Math.max(0,s-o));for(var c,l,u,d=(0,z.W)(this.text()),f=this.text().split(" ").length-1,p=-1,g=0,v=function(){g=0;for(var e=t.dataArray,n=p+1;n<e.length;n++){if(e[n].pathLength>0)return p=n,e[n];"M"===e[n].command&&(c={x:e[n].points[0],y:e[n].points[1]})}return{}},m=function(e){var r=t._getTextSize(e).width+n;" "===e&&"justify"===i&&(r+=(s-o)/f);var a=0,h=0;for(l=void 0;Math.abs(r-a)/r>.01&&h<20;){h++;for(var d=a;void 0===u;)(u=v())&&d+u.pathLength<r&&(d+=u.pathLength,u=void 0);if(0===Object.keys(u).length||void 0===c)return;var p=!1;switch(u.command){case"L":w.y.getLineLength(c.x,c.y,u.points[0],u.points[1])>r?l=w.y.getPointOnLine(r,c.x,c.y,u.points[0],u.points[1],c.x,c.y):u=void 0;break;case"A":var m=u.points[4],y=u.points[5],_=u.points[4]+y;0===g?g=m+1e-8:r>a?g+=Math.PI/180*y/Math.abs(y):g-=Math.PI/360*y/Math.abs(y),(y<0&&g<_||y>=0&&g>_)&&(g=_,p=!0),l=w.y.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,u.points[6]);break;case"C":0===g?g=r>u.pathLength?1e-8:r/u.pathLength:r>a?g+=(r-a)/u.pathLength/2:g=Math.max(g-(a-r)/u.pathLength/2,0),g>1&&(g=1,p=!0),l=w.y.getPointOnCubicBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);break;case"Q":0===g?g=r/u.pathLength:r>a?g+=(r-a)/u.pathLength:g-=(a-r)/u.pathLength,g>1&&(g=1,p=!0),l=w.y.getPointOnQuadraticBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3])}void 0!==l&&(a=w.y.getLineLength(c.x,c.y,l.x,l.y)),p&&(p=!1,u=void 0)}},y=h/(t._getTextSize("C").width+n)-1,_=0;_<y&&(m("C"),void 0!==c&&void 0!==l);_++)c=l;for(var b=0;b<d.length&&(m(d[b]),void 0!==c&&void 0!==l);b++){var S=w.y.getLineLength(c.x,c.y,l.x,l.y),x=0;if(r)try{x=r(d[b-1],d[b])*this.fontSize()}catch(C){x=0}c.x+=x,l.x+=x,this.textWidth+=x;var k=w.y.getPointOnLine(x+S/2,c.x,c.y,l.x,l.y),E=Math.atan2(l.y-c.y,l.x-c.x);this.glyphInfo.push({transposeX:k.x,transposeY:k.y,text:d[b],rotation:E,p0:c,p1:l}),c=l}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));for(var e,n,i=t[0]||0,r=t[0]||0,o=t[1]||0,s=t[1]||0,a=0;a<t.length/2;a++)e=t[2*a],n=t[2*a+1],i=Math.min(i,e),r=Math.max(r,e),o=Math.min(o,n),s=Math.max(s,n);var h=this.fontSize();return{x:i-h/2,y:o-h/2,width:r-i+h,height:s-o+h}}destroy(){return r.Z.releaseCanvas(this.dummyCanvas),super.destroy()}}H.prototype._fillFunc=U,H.prototype._strokeFunc=K,H.prototype._fillFuncHit=U,H.prototype._strokeFuncHit=K,H.prototype.className="TextPath",H.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i.DA)(H),y.F.addGetterSetter(H,"data"),y.F.addGetterSetter(H,"fontFamily","Arial"),y.F.addGetterSetter(H,"fontSize",12,(0,_.Kg)()),y.F.addGetterSetter(H,"fontStyle",B),y.F.addGetterSetter(H,"align","left"),y.F.addGetterSetter(H,"letterSpacing",0,(0,_.Kg)()),y.F.addGetterSetter(H,"textBaseline","middle"),y.F.addGetterSetter(H,"fontVariant",B),y.F.addGetterSetter(H,"text",""),y.F.addGetterSetter(H,"textDecoration",null),y.F.addGetterSetter(H,"kerningFunc",null);var W=n(20015);class V extends d.b{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,i.So.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}function X(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}V.prototype.className="Wedge",V.prototype._centroid=!0,V.prototype._attrsAffectingSize=["radius"],(0,i.DA)(V),y.F.addGetterSetter(V,"radius",0,(0,_.Kg)()),y.F.addGetterSetter(V,"angle",0,(0,_.Kg)()),y.F.addGetterSetter(V,"clockwise",!1),y.F.backCompat(V,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var q=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Y=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];y.F.addGetterSetter(o.N,"blurRadius",0,(0,_.Kg)(),y.F.afterSetFilter);y.F.addGetterSetter(o.N,"brightness",0,(0,_.Kg)(),y.F.afterSetFilter);y.F.addGetterSetter(o.N,"contrast",0,(0,_.Kg)(),y.F.afterSetFilter);function J(t,e,n,i,r){var o=n-e,s=r-i;return 0===o?i+s/2:0===s?i:s*((t-e)/o)+i}y.F.addGetterSetter(o.N,"embossStrength",.5,(0,_.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(o.N,"embossWhiteLevel",.5,(0,_.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(o.N,"embossDirection","top-left",null,y.F.afterSetFilter),y.F.addGetterSetter(o.N,"embossBlend",!1,null,y.F.afterSetFilter);y.F.addGetterSetter(o.N,"enhance",0,(0,_.Kg)(),y.F.afterSetFilter);y.F.addGetterSetter(o.N,"hue",0,(0,_.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(o.N,"saturation",0,(0,_.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(o.N,"luminance",0,(0,_.Kg)(),y.F.afterSetFilter);y.F.addGetterSetter(o.N,"hue",0,(0,_.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(o.N,"saturation",0,(0,_.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(o.N,"value",0,(0,_.Kg)(),y.F.afterSetFilter);function $(t,e,n){var i=4*(n*t.width+e),r=[];return r.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),r}function Q(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}y.F.addGetterSetter(o.N,"kaleidoscopePower",2,(0,_.Kg)(),y.F.afterSetFilter),y.F.addGetterSetter(o.N,"kaleidoscopeAngle",0,(0,_.Kg)(),y.F.afterSetFilter);y.F.addGetterSetter(o.N,"threshold",0,(0,_.Kg)(),y.F.afterSetFilter);y.F.addGetterSetter(o.N,"noise",.2,(0,_.Kg)(),y.F.afterSetFilter);y.F.addGetterSetter(o.N,"pixelSize",8,(0,_.Kg)(),y.F.afterSetFilter);y.F.addGetterSetter(o.N,"levels",.5,(0,_.Kg)(),y.F.afterSetFilter);y.F.addGetterSetter(o.N,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),y.F.addGetterSetter(o.N,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),y.F.addGetterSetter(o.N,"blue",0,_.xj,y.F.afterSetFilter);y.F.addGetterSetter(o.N,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),y.F.addGetterSetter(o.N,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),y.F.addGetterSetter(o.N,"blue",0,_.xj,y.F.afterSetFilter),y.F.addGetterSetter(o.N,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}));y.F.addGetterSetter(o.N,"threshold",.5,(0,_.Kg)(),y.F.afterSetFilter);const tt=m.Util._assign(m,{Arc:b,Arrow:x,Circle:k.C,Ellipse:E,Image:C.E,Label:I,Tag:M,Line:S.x,Path:w.y,Rect:G.U,RegularPolygon:L.h,Ring:N,Sprite:Z,Star:j,Text:z.x,TextPath:H,Transformer:W.$,Wedge:V,Filters:{Blur:function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var n,i,r,o,s,a,h,c,l,u,d,f,p,g,v,m,y,_,b,S,w,x,k,E,C=t.data,A=t.width,O=t.height,R=e+e+1,T=A-1,P=O-1,D=e+1,I=D*(D+1)/2,M=new X,G=null,L=M,F=null,N=null,Z=q[e],j=Y[e];for(r=1;r<R;r++)L=L.next=new X,r===D&&(G=L);for(L.next=M,h=a=0,i=0;i<O;i++){for(m=y=_=b=c=l=u=d=0,f=D*(S=C[a]),p=D*(w=C[a+1]),g=D*(x=C[a+2]),v=D*(k=C[a+3]),c+=I*S,l+=I*w,u+=I*x,d+=I*k,L=M,r=0;r<D;r++)L.r=S,L.g=w,L.b=x,L.a=k,L=L.next;for(r=1;r<D;r++)o=a+((T<r?T:r)<<2),c+=(L.r=S=C[o])*(E=D-r),l+=(L.g=w=C[o+1])*E,u+=(L.b=x=C[o+2])*E,d+=(L.a=k=C[o+3])*E,m+=S,y+=w,_+=x,b+=k,L=L.next;for(F=M,N=G,n=0;n<A;n++)C[a+3]=k=d*Z>>j,0!==k?(k=255/k,C[a]=(c*Z>>j)*k,C[a+1]=(l*Z>>j)*k,C[a+2]=(u*Z>>j)*k):C[a]=C[a+1]=C[a+2]=0,c-=f,l-=p,u-=g,d-=v,f-=F.r,p-=F.g,g-=F.b,v-=F.a,o=h+((o=n+e+1)<T?o:T)<<2,c+=m+=F.r=C[o],l+=y+=F.g=C[o+1],u+=_+=F.b=C[o+2],d+=b+=F.a=C[o+3],F=F.next,f+=S=N.r,p+=w=N.g,g+=x=N.b,v+=k=N.a,m-=S,y-=w,_-=x,b-=k,N=N.next,a+=4;h+=A}for(n=0;n<A;n++){for(y=_=b=m=l=u=d=c=0,f=D*(S=C[a=n<<2]),p=D*(w=C[a+1]),g=D*(x=C[a+2]),v=D*(k=C[a+3]),c+=I*S,l+=I*w,u+=I*x,d+=I*k,L=M,r=0;r<D;r++)L.r=S,L.g=w,L.b=x,L.a=k,L=L.next;for(s=A,r=1;r<=e;r++)a=s+n<<2,c+=(L.r=S=C[a])*(E=D-r),l+=(L.g=w=C[a+1])*E,u+=(L.b=x=C[a+2])*E,d+=(L.a=k=C[a+3])*E,m+=S,y+=w,_+=x,b+=k,L=L.next,r<P&&(s+=A);for(a=n,F=M,N=G,i=0;i<O;i++)C[3+(o=a<<2)]=k=d*Z>>j,k>0?(k=255/k,C[o]=(c*Z>>j)*k,C[o+1]=(l*Z>>j)*k,C[o+2]=(u*Z>>j)*k):C[o]=C[o+1]=C[o+2]=0,c-=f,l-=p,u-=g,d-=v,f-=F.r,p-=F.g,g-=F.b,v-=F.a,o=n+((o=i+D)<P?o:P)*A<<2,c+=m+=F.r=C[o],l+=y+=F.g=C[o+1],u+=_+=F.b=C[o+2],d+=b+=F.a=C[o+3],F=F.next,f+=S=N.r,p+=w=N.g,g+=x=N.b,v+=k=N.a,m-=S,y-=w,_-=x,b-=k,N=N.next,a+=A}}(t,e)},Brighten:function(t){var e,n=255*this.brightness(),i=t.data,r=i.length;for(e=0;e<r;e+=4)i[e]+=n,i[e+1]+=n,i[e+2]+=n},Contrast:function(t){var e,n=Math.pow((this.contrast()+100)/100,2),i=t.data,r=i.length,o=150,s=150,a=150;for(e=0;e<r;e+=4)o=i[e],s=i[e+1],a=i[e+2],o/=255,o-=.5,o*=n,o+=.5,s/=255,s-=.5,s*=n,s+=.5,a/=255,a-=.5,a*=n,a+=.5,o=(o*=255)<0?0:o>255?255:o,s=(s*=255)<0?0:s>255?255:s,a=(a*=255)<0?0:a>255?255:a,i[e]=o,i[e+1]=s,i[e+2]=a},Emboss:function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),i=this.embossDirection(),o=this.embossBlend(),s=0,a=0,h=t.data,c=t.width,l=t.height,u=4*c,d=l;switch(i){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:r.Z.error("Unknown emboss direction: "+i)}do{var f=(d-1)*u,p=s;d+p<1&&(p=0),d+p>l&&(p=0);var g=(d-1+p)*c*4,v=c;do{var m=f+4*(v-1),y=a;v+y<1&&(y=0),v+y>c&&(y=0);var _=g+4*(v-1+y),b=h[m]-h[_],S=h[m+1]-h[_+1],w=h[m+2]-h[_+2],x=b,k=x>0?x:-x;if((S>0?S:-S)>k&&(x=S),(w>0?w:-w)>k&&(x=w),x*=e,o){var E=h[m]+x,C=h[m+1]+x,A=h[m+2]+x;h[m]=E>255?255:E<0?0:E,h[m+1]=C>255?255:C<0?0:C,h[m+2]=A>255?255:A<0?0:A}else{var O=n-x;O<0?O=0:O>255&&(O=255),h[m]=h[m+1]=h[m+2]=O}}while(--v)}while(--d)},Enhance:function(t){var e,n,i,r,o=t.data,s=o.length,a=o[0],h=a,c=o[1],l=c,u=o[2],d=u,f=this.enhance();if(0!==f){for(r=0;r<s;r+=4)(e=o[r+0])<a?a=e:e>h&&(h=e),(n=o[r+1])<c?c=n:n>l&&(l=n),(i=o[r+2])<u?u=i:i>d&&(d=i);var p,g,v,m,y,_,b,S,w;for(h===a&&(h=255,a=0),l===c&&(l=255,c=0),d===u&&(d=255,u=0),f>0?(g=h+f*(255-h),v=a-f*(a-0),y=l+f*(255-l),_=c-f*(c-0),S=d+f*(255-d),w=u-f*(u-0)):(g=h+f*(h-(p=.5*(h+a))),v=a+f*(a-p),y=l+f*(l-(m=.5*(l+c))),_=c+f*(c-m),S=d+f*(d-(b=.5*(d+u))),w=u+f*(u-b)),r=0;r<s;r+=4)o[r+0]=J(o[r+0],a,h,v,g),o[r+1]=J(o[r+1],c,l,_,y),o[r+2]=J(o[r+2],u,d,w,S)}},Grayscale:function(t){var e,n,i=t.data,r=i.length;for(e=0;e<r;e+=4)n=.34*i[e]+.5*i[e+1]+.16*i[e+2],i[e]=n,i[e+1]=n,i[e+2]=n},HSL:function(t){var e,n,i,r,o,s=t.data,a=s.length,h=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,l=127*this.luminance(),u=1*h*Math.cos(c*Math.PI/180),d=1*h*Math.sin(c*Math.PI/180),f=.299+.701*u+.167*d,p=.587-.587*u+.33*d,g=.114-.114*u-.497*d,v=.299-.299*u-.328*d,m=.587+.413*u+.035*d,y=.114-.114*u+.293*d,_=.299-.3*u+1.25*d,b=.587-.586*u-1.05*d,S=.114+.886*u-.2*d;for(e=0;e<a;e+=4)n=s[e+0],i=s[e+1],r=s[e+2],o=s[e+3],s[e+0]=f*n+p*i+g*r+l,s[e+1]=v*n+m*i+y*r+l,s[e+2]=_*n+b*i+S*r+l,s[e+3]=o},HSV:function(t){var e,n,i,r,o,s=t.data,a=s.length,h=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,u=h*c*Math.cos(l*Math.PI/180),d=h*c*Math.sin(l*Math.PI/180),f=.299*h+.701*u+.167*d,p=.587*h-.587*u+.33*d,g=.114*h-.114*u-.497*d,v=.299*h-.299*u-.328*d,m=.587*h+.413*u+.035*d,y=.114*h-.114*u+.293*d,_=.299*h-.3*u+1.25*d,b=.587*h-.586*u-1.05*d,S=.114*h+.886*u-.2*d;for(e=0;e<a;e+=4)n=s[e+0],i=s[e+1],r=s[e+2],o=s[e+3],s[e+0]=f*n+p*i+g*r,s[e+1]=v*n+m*i+y*r,s[e+2]=_*n+b*i+S*r,s[e+3]=o},Invert:function(t){var e,n=t.data,i=n.length;for(e=0;e<i;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},Kaleidoscope:function(t){var e,n,i,o,s,a,h,c,l,u=t.width,d=t.height,f=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),g=Math.floor(u*(p%360)/360);if(!(f<1)){var v=r.Z.createCanvasElement();v.width=u,v.height=d;var m=v.getContext("2d").getImageData(0,0,u,d);r.Z.releaseCanvas(v),function(t,e,n){var i,r,o,s,a=t.data,h=e.data,c=t.width,l=t.height,u=n.polarCenterX||c/2,d=n.polarCenterY||l/2,f=0,p=0,g=0,v=0,m=Math.sqrt(u*u+d*d);r=c-u,o=l-d,m=(s=Math.sqrt(r*r+o*o))>m?s:m;var y,_,b,S,w=l,x=c,k=360/x*Math.PI/180;for(_=0;_<x;_+=1)for(b=Math.sin(_*k),S=Math.cos(_*k),y=0;y<w;y+=1)r=Math.floor(u+m*y/w*S),f=a[0+(i=4*((o=Math.floor(d+m*y/w*b))*c+r))],p=a[i+1],g=a[i+2],v=a[i+3],h[0+(i=4*(_+y*c))]=f,h[i+1]=p,h[i+2]=g,h[i+3]=v}(t,m,{polarCenterX:u/2,polarCenterY:d/2});for(var y=u/Math.pow(2,f);y<=8;)y*=2,f-=1;var _=y=Math.ceil(y),b=0,S=_,w=1;for(g+y>u&&(b=_,S=0,w=-1),n=0;n<d;n+=1)for(e=b;e!==S;e+=w)c=4*(u*n+Math.round(e+g)%u),o=m.data[c+0],s=m.data[c+1],a=m.data[c+2],h=m.data[c+3],l=4*(u*n+e),m.data[l+0]=o,m.data[l+1]=s,m.data[l+2]=a,m.data[l+3]=h;for(n=0;n<d;n+=1)for(_=Math.floor(y),i=0;i<f;i+=1){for(e=0;e<_+1;e+=1)c=4*(u*n+e),o=m.data[c+0],s=m.data[c+1],a=m.data[c+2],h=m.data[c+3],l=4*(u*n+2*_-e-1),m.data[l+0]=o,m.data[l+1]=s,m.data[l+2]=a,m.data[l+3]=h;_*=2}!function(t,e,n){var i,r,o,s,a,h,c=t.data,l=e.data,u=t.width,d=t.height,f=n.polarCenterX||u/2,p=n.polarCenterY||d/2,g=0,v=0,m=0,y=0,_=Math.sqrt(f*f+p*p);r=u-f,o=d-p,_=(h=Math.sqrt(r*r+o*o))>_?h:_;var b,S,w,x=d,k=u,E=n.polarRotation||0;for(r=0;r<u;r+=1)for(o=0;o<d;o+=1)s=r-f,a=o-p,b=Math.sqrt(s*s+a*a)*x/_,S=(S=(180*Math.atan2(a,s)/Math.PI+360+E)%360)*k/360,w=Math.floor(S),g=c[0+(i=4*(Math.floor(b)*u+w))],v=c[i+1],m=c[i+2],y=c[i+3],l[0+(i=4*(o*u+r))]=g,l[i+1]=v,l[i+2]=m,l[i+3]=y}(m,t,{polarRotation:0})}},Mask:function(t){var e=function(t,e){var n=$(t,0,0),i=$(t,t.width-1,0),r=$(t,0,t.height-1),o=$(t,t.width-1,t.height-1),s=e||10;if(Q(n,i)<s&&Q(i,o)<s&&Q(o,r)<s&&Q(r,n)<s){for(var a=function(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([i,n,o,r]),h=[],c=0;c<t.width*t.height;c++){var l=Q(a,[t.data[4*c],t.data[4*c+1],t.data[4*c+2]]);h[c]=l<s?0:255}return h}}(t,this.threshold());return e&&function(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}(t,e=function(t,e,n){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],r=Math.round(Math.sqrt(i.length)),o=Math.floor(r/2),s=[],a=0;a<n;a++)for(var h=0;h<e;h++){for(var c=a*e+h,l=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f=a+u-o,p=h+d-o;if(f>=0&&f<n&&p>=0&&p<e){var g=i[u*r+d];l+=t[f*e+p]*g}}s[c]=l}return s}(e=function(t,e,n){for(var i=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(i.length)),o=Math.floor(r/2),s=[],a=0;a<n;a++)for(var h=0;h<e;h++){for(var c=a*e+h,l=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f=a+u-o,p=h+d-o;if(f>=0&&f<n&&p>=0&&p<e){var g=i[u*r+d];l+=t[f*e+p]*g}}s[c]=l>=1020?255:0}return s}(e=function(t,e,n){for(var i=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(i.length)),o=Math.floor(r/2),s=[],a=0;a<n;a++)for(var h=0;h<e;h++){for(var c=a*e+h,l=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f=a+u-o,p=h+d-o;if(f>=0&&f<n&&p>=0&&p<e){var g=i[u*r+d];l+=t[f*e+p]*g}}s[c]=2040===l?255:0}return s}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},Noise:function(t){var e,n=255*this.noise(),i=t.data,r=i.length,o=n/2;for(e=0;e<r;e+=4)i[e+0]+=o-2*o*Math.random(),i[e+1]+=o-2*o*Math.random(),i[e+2]+=o-2*o*Math.random()},Pixelate:function(t){var e,n,i,o,s,a,h,c,l,u,d,f,p,g,v=Math.ceil(this.pixelSize()),m=t.width,y=t.height,_=Math.ceil(m/v),b=Math.ceil(y/v),S=t.data;if(v<=0)r.Z.error("pixelSize value can not be <= 0");else for(f=0;f<_;f+=1)for(p=0;p<b;p+=1){for(o=0,s=0,a=0,h=0,l=(c=f*v)+v,d=(u=p*v)+v,g=0,e=c;e<l;e+=1)if(!(e>=m))for(n=u;n<d;n+=1)n>=y||(o+=S[(i=4*(m*n+e))+0],s+=S[i+1],a+=S[i+2],h+=S[i+3],g+=1);for(o/=g,s/=g,a/=g,h/=g,e=c;e<l;e+=1)if(!(e>=m))for(n=u;n<d;n+=1)n>=y||(S[(i=4*(m*n+e))+0]=o,S[i+1]=s,S[i+2]=a,S[i+3]=h)}},Posterize:function(t){var e,n=Math.round(254*this.levels())+1,i=t.data,r=i.length,o=255/n;for(e=0;e<r;e+=1)i[e]=Math.floor(i[e]/o)*o},RGB:function(t){var e,n,i=t.data,r=i.length,o=this.red(),s=this.green(),a=this.blue();for(e=0;e<r;e+=4)n=(.34*i[e]+.5*i[e+1]+.16*i[e+2])/255,i[e]=n*o,i[e+1]=n*s,i[e+2]=n*a,i[e+3]=i[e+3]},RGBA:function(t){var e,n,i=t.data,r=i.length,o=this.red(),s=this.green(),a=this.blue(),h=this.alpha();for(e=0;e<r;e+=4)n=1-h,i[e]=o*h+i[e]*n,i[e+1]=s*h+i[e+1]*n,i[e+2]=a*h+i[e+2]*n},Sepia:function(t){var e,n,i,r,o=t.data,s=o.length;for(e=0;e<s;e+=4)n=o[e+0],i=o[e+1],r=o[e+2],o[e+0]=Math.min(255,.393*n+.769*i+.189*r),o[e+1]=Math.min(255,.349*n+.686*i+.168*r),o[e+2]=Math.min(255,.272*n+.534*i+.131*r)},Solarize:function(t){var e=t.data,n=t.width,i=4*n,r=t.height;do{var o=(r-1)*i,s=n;do{var a=o+4*(s-1),h=e[a],c=e[a+1],l=e[a+2];h>127&&(h=255-h),c>127&&(c=255-c),l>127&&(l=255-l),e[a]=h,e[a+1]=c,e[a+2]=l}while(--s)}while(--r)},Threshold:function(t){var e,n=255*this.threshold(),i=t.data,r=i.length;for(e=0;e<r;e+=1)i[e]=i[e]<n?0:255}}})},92122:(t,e,n)=>{"use strict";n.d(e,{C:()=>a});var i=n(95780),r=n(19926),o=n(40059),s=n(68678);class a extends r.b{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}a.prototype._centroid=!0,a.prototype.className="Circle",a.prototype._attrsAffectingSize=["radius"],(0,s.DA)(a),i.F.addGetterSetter(a,"radius",0,(0,o.Kg)())},60391:(t,e,n)=>{"use strict";n.d(e,{E:()=>h});var i=n(74051),r=n(95780),o=n(19926),s=n(68678),a=n(40059);class h extends o.b{constructor(t){super(t),this.on("imageChange.konva",(()=>{this._setImageLoad()})),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&4===t.readyState||t&&t.addEventListener&&t.addEventListener("load",(()=>{this._requestDraw()}))}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),n=this.getHeight(),r=this.cornerRadius(),o=this.attrs.image;let s;if(o){const t=this.attrs.cropWidth,i=this.attrs.cropHeight;s=t&&i?[o,this.cropX(),this.cropY(),t,i,0,0,e,n]:[o,0,0,e,n]}(this.hasFill()||this.hasStroke()||r)&&(t.beginPath(),r?i.Z.drawRoundedRectPath(t,e,n,r):t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)),o&&(r&&t.clip(),t.drawImage.apply(t,s))}_hitFunc(t){var e=this.width(),n=this.height(),r=this.cornerRadius();t.beginPath(),r?i.Z.drawRoundedRectPath(t,e,n,r):t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}getHeight(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}static fromURL(t,e,n=null){var r=i.Z.createImageElement();r.onload=function(){var t=new h({image:r});e(t)},r.onerror=n,r.crossOrigin="Anonymous",r.src=t}}h.prototype.className="Image",(0,s.DA)(h),r.F.addGetterSetter(h,"cornerRadius",0,(0,a.Jj)(4)),r.F.addGetterSetter(h,"image"),r.F.addComponentsGetterSetter(h,"crop",["x","y","width","height"]),r.F.addGetterSetter(h,"cropX",0,(0,a.Kg)()),r.F.addGetterSetter(h,"cropY",0,(0,a.Kg)()),r.F.addGetterSetter(h,"cropWidth",0,(0,a.Kg)()),r.F.addGetterSetter(h,"cropHeight",0,(0,a.Kg)())},82080:(t,e,n)=>{"use strict";n.d(e,{x:()=>c});var i=n(95780),r=n(19926),o=n(40059),s=n(68678);function a(t,e,n,i,r,o,s){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),h=Math.sqrt(Math.pow(r-n,2)+Math.pow(o-i,2)),c=s*a/(a+h),l=s*h/(a+h);return[n-c*(r-t),i-c*(o-e),n+l*(r-t),i+l*(o-e)]}function h(t,e){var n,i,r=t.length,o=[];for(n=2;n<r-2;n+=2)i=a(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),isNaN(i[0])||(o.push(i[0]),o.push(i[1]),o.push(t[n]),o.push(t[n+1]),o.push(i[2]),o.push(i[3]));return o}class c extends r.b{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")}))}_sceneFunc(t){var e,n,i,r=this.points(),o=r.length,s=this.tension(),a=this.closed(),h=this.bezier();if(o){if(t.beginPath(),t.moveTo(r[0],r[1]),0!==s&&o>4){for(n=(e=this.getTensionPoints()).length,i=a?0:4,a||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);i<n-2;)t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);a||t.quadraticCurveTo(e[n-2],e[n-1],r[o-2],r[o-1])}else if(h)for(i=2;i<o;)t.bezierCurveTo(r[i++],r[i++],r[i++],r[i++],r[i++],r[i++]);else for(i=2;i<o;i+=2)t.lineTo(r[i],r[i+1]);a?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():h(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),e=t.length,n=this.tension(),i=a(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),r=a(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),o=h(t,n);return[i[2],i[3]].concat(o).concat([r[0],r[1],t[e-2],t[e-1],r[2],r[3],i[0],i[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,n,i=(t=0!==this.tension()?[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.points())[0],r=t[0],o=t[1],s=t[1],a=0;a<t.length/2;a++)e=t[2*a],n=t[2*a+1],i=Math.min(i,e),r=Math.max(r,e),o=Math.min(o,n),s=Math.max(s,n);return{x:i,y:o,width:r-i,height:s-o}}}c.prototype.className="Line",c.prototype._attrsAffectingSize=["points","bezier","tension"],(0,s.DA)(c),i.F.addGetterSetter(c,"closed",!1),i.F.addGetterSetter(c,"bezier",!1),i.F.addGetterSetter(c,"tension",0,(0,o.Kg)()),i.F.addGetterSetter(c,"points",[],(0,o.q8)())},99986:(t,e,n)=>{"use strict";n.d(e,{y:()=>s});var i=n(95780),r=n(19926),o=n(68678);class s extends r.b{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this.dataArray=s.parsePathData(this.data()),this.pathLength=0;for(var e=0;e<this.dataArray.length;++e)this.pathLength+=this.dataArray[e].pathLength;this.on("dataChange.konva",(function(){this.dataArray=s.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength}))}_sceneFunc(t){var e=this.dataArray;t.beginPath();for(var n=!1,i=0;i<e.length;i++){var r=e[i].command,o=e[i].points;switch(r){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var s=o[0],a=o[1],h=o[2],c=o[3],l=o[4],u=o[5],d=o[6],f=o[7],p=h>c?h:c,g=h>c?1:h/c,v=h>c?c/h:1;t.translate(s,a),t.rotate(d),t.scale(g,v),t.arc(0,0,p,l,l+u,1-f),t.scale(1/g,1/v),t.rotate(-d),t.translate(-s,-a);break;case"z":n=!0,t.closePath()}}n||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach((function(e){if("A"===e.command){var n=e.points[4],i=e.points[5],r=e.points[4]+i,o=Math.PI/180;if(Math.abs(n-r)<o&&(o=Math.abs(n-r)),i<0)for(let i=n-o;i>r;i-=o){const n=s.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],i,0);t.push(n.x,n.y)}else for(let i=n+o;i<r;i+=o){const n=s.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],i,0);t.push(n.x,n.y)}}else if("C"===e.command)for(let a=0;a<=1;a+=.01){const n=s.getPointOnCubicBezier(a,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);t.push(n.x,n.y)}else t=t.concat(e.points)}));for(var e,n,i=t[0],r=t[0],o=t[1],a=t[1],h=0;h<t.length/2;h++)e=t[2*h],n=t[2*h+1],isNaN(e)||(i=Math.min(i,e),r=Math.max(r,e)),isNaN(n)||(o=Math.min(o,n),a=Math.max(a,n));return{x:i,y:o,width:r-i,height:a-o}}getLength(){return this.pathLength}getPointAtLength(t){var e,n=0,i=this.dataArray.length;if(!i)return null;for(;n<i&&t>this.dataArray[n].pathLength;)t-=this.dataArray[n].pathLength,++n;if(n===i)return{x:(e=this.dataArray[n-1].points.slice(-2))[0],y:e[1]};if(t<.01)return{x:(e=this.dataArray[n].points.slice(0,2))[0],y:e[1]};var r=this.dataArray[n],o=r.points;switch(r.command){case"L":return s.getPointOnLine(t,r.start.x,r.start.y,o[0],o[1]);case"C":return s.getPointOnCubicBezier(t/r.pathLength,r.start.x,r.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return s.getPointOnQuadraticBezier(t/r.pathLength,r.start.x,r.start.y,o[0],o[1],o[2],o[3]);case"A":var a=o[0],h=o[1],c=o[2],l=o[3],u=o[4],d=o[5],f=o[6];return u+=d*t/r.pathLength,s.getPointOnEllipticalArc(a,h,c,l,u,f)}return null}static getLineLength(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}static getPointOnLine(t,e,n,i,r,o,s){void 0===o&&(o=e),void 0===s&&(s=n);var a=(r-n)/(i-e+1e-8),h=Math.sqrt(t*t/(1+a*a));i<e&&(h*=-1);var c,l=a*h;if(i===e)c={x:o,y:s+l};else if((s-n)/(o-e+1e-8)===a)c={x:o+h,y:s+l};else{var u,d,f=this.getLineLength(e,n,i,r),p=(o-e)*(i-e)+(s-n)*(r-n);u=e+(p/=f*f)*(i-e),d=n+p*(r-n);var g=this.getLineLength(o,s,u,d),v=Math.sqrt(t*t-g*g);h=Math.sqrt(v*v/(1+a*a)),i<e&&(h*=-1),c={x:u+h,y:d+(l=a*h)}}return c}static getPointOnCubicBezier(t,e,n,i,r,o,s,a,h){function c(t){return t*t*t}function l(t){return 3*t*t*(1-t)}function u(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}return{x:a*c(t)+o*l(t)+i*u(t)+e*d(t),y:h*c(t)+s*l(t)+r*u(t)+n*d(t)}}static getPointOnQuadraticBezier(t,e,n,i,r,o,s){function a(t){return t*t}function h(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}return{x:o*a(t)+i*h(t)+e*c(t),y:s*a(t)+r*h(t)+n*c(t)}}static getPointOnEllipticalArc(t,e,n,i,r,o){var s=Math.cos(o),a=Math.sin(o),h=n*Math.cos(r),c=i*Math.sin(r);return{x:t+(h*s-c*a),y:e+(h*a+c*s)}}static parsePathData(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),"|"+n[i]);var r,o=e.split("|"),s=[],a=[],h=0,c=0,l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(i=1;i<o.length;i++){var u=o[i],d=u.charAt(0);for(u=u.slice(1),a.length=0;r=l.exec(u);)a.push(r[0]);for(var f=[],p=0,g=a.length;p<g;p++)if("00"!==a[p]){var v=parseFloat(a[p]);isNaN(v)?f.push(0):f.push(v)}else f.push(0,0);for(;f.length>0&&!isNaN(f[0]);){var m,y,_,b,S,w,x,k,E,C,A=null,O=[],R=h,T=c;switch(d){case"l":h+=f.shift(),c+=f.shift(),A="L",O.push(h,c);break;case"L":h=f.shift(),c=f.shift(),O.push(h,c);break;case"m":var P=f.shift(),D=f.shift();if(h+=P,c+=D,A="M",s.length>2&&"z"===s[s.length-1].command)for(var I=s.length-2;I>=0;I--)if("M"===s[I].command){h=s[I].points[0]+P,c=s[I].points[1]+D;break}O.push(h,c),d="l";break;case"M":h=f.shift(),c=f.shift(),A="M",O.push(h,c),d="L";break;case"h":h+=f.shift(),A="L",O.push(h,c);break;case"H":h=f.shift(),A="L",O.push(h,c);break;case"v":c+=f.shift(),A="L",O.push(h,c);break;case"V":c=f.shift(),A="L",O.push(h,c);break;case"C":O.push(f.shift(),f.shift(),f.shift(),f.shift()),h=f.shift(),c=f.shift(),O.push(h,c);break;case"c":O.push(h+f.shift(),c+f.shift(),h+f.shift(),c+f.shift()),h+=f.shift(),c+=f.shift(),A="C",O.push(h,c);break;case"S":y=h,_=c,"C"===(m=s[s.length-1]).command&&(y=h+(h-m.points[2]),_=c+(c-m.points[3])),O.push(y,_,f.shift(),f.shift()),h=f.shift(),c=f.shift(),A="C",O.push(h,c);break;case"s":y=h,_=c,"C"===(m=s[s.length-1]).command&&(y=h+(h-m.points[2]),_=c+(c-m.points[3])),O.push(y,_,h+f.shift(),c+f.shift()),h+=f.shift(),c+=f.shift(),A="C",O.push(h,c);break;case"Q":O.push(f.shift(),f.shift()),h=f.shift(),c=f.shift(),O.push(h,c);break;case"q":O.push(h+f.shift(),c+f.shift()),h+=f.shift(),c+=f.shift(),A="Q",O.push(h,c);break;case"T":y=h,_=c,"Q"===(m=s[s.length-1]).command&&(y=h+(h-m.points[0]),_=c+(c-m.points[1])),h=f.shift(),c=f.shift(),A="Q",O.push(y,_,h,c);break;case"t":y=h,_=c,"Q"===(m=s[s.length-1]).command&&(y=h+(h-m.points[0]),_=c+(c-m.points[1])),h+=f.shift(),c+=f.shift(),A="Q",O.push(y,_,h,c);break;case"A":b=f.shift(),S=f.shift(),w=f.shift(),x=f.shift(),k=f.shift(),E=h,C=c,h=f.shift(),c=f.shift(),A="A",O=this.convertEndpointToCenterParameterization(E,C,h,c,x,k,b,S,w);break;case"a":b=f.shift(),S=f.shift(),w=f.shift(),x=f.shift(),k=f.shift(),E=h,C=c,h+=f.shift(),c+=f.shift(),A="A",O=this.convertEndpointToCenterParameterization(E,C,h,c,x,k,b,S,w)}s.push({command:A||d,points:O,start:{x:R,y:T},pathLength:this.calcLength(R,T,A||d,O)})}"z"!==d&&"Z"!==d||s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(t,e,n,i){var r,o,a,h,c=s;switch(n){case"L":return c.getLineLength(t,e,i[0],i[1]);case"C":for(r=0,o=c.getPointOnCubicBezier(0,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),h=.01;h<=1;h+=.01)a=c.getPointOnCubicBezier(h,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return r;case"Q":for(r=0,o=c.getPointOnQuadraticBezier(0,t,e,i[0],i[1],i[2],i[3]),h=.01;h<=1;h+=.01)a=c.getPointOnQuadraticBezier(h,t,e,i[0],i[1],i[2],i[3]),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return r;case"A":r=0;var l=i[4],u=i[5],d=i[4]+u,f=Math.PI/180;if(Math.abs(l-d)<f&&(f=Math.abs(l-d)),o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),u<0)for(h=l-f;h>d;h-=f)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(h=l+f;h<d;h+=f)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),r+=c.getLineLength(o.x,o.y,a.x,a.y)}return 0}static convertEndpointToCenterParameterization(t,e,n,i,r,o,s,a,h){var c=h*(Math.PI/180),l=Math.cos(c)*(t-n)/2+Math.sin(c)*(e-i)/2,u=-1*Math.sin(c)*(t-n)/2+Math.cos(c)*(e-i)/2,d=l*l/(s*s)+u*u/(a*a);d>1&&(s*=Math.sqrt(d),a*=Math.sqrt(d));var f=Math.sqrt((s*s*(a*a)-s*s*(u*u)-a*a*(l*l))/(s*s*(u*u)+a*a*(l*l)));r===o&&(f*=-1),isNaN(f)&&(f=0);var p=f*s*u/a,g=f*-a*l/s,v=(t+n)/2+Math.cos(c)*p-Math.sin(c)*g,m=(e+i)/2+Math.sin(c)*p+Math.cos(c)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},b=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},S=b([1,0],[(l-p)/s,(u-g)/a]),w=[(l-p)/s,(u-g)/a],x=[(-1*l-p)/s,(-1*u-g)/a],k=b(w,x);return _(w,x)<=-1&&(k=Math.PI),_(w,x)>=1&&(k=0),0===o&&k>0&&(k-=2*Math.PI),1===o&&k<0&&(k+=2*Math.PI),[v,m,s,a,S,k,c,o]}}s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,o.DA)(s),i.F.addGetterSetter(s,"data")},79890:(t,e,n)=>{"use strict";n.d(e,{U:()=>h});var i=n(95780),r=n(19926),o=n(68678),s=n(74051),a=n(40059);class h extends r.b{_sceneFunc(t){var e=this.cornerRadius(),n=this.width(),i=this.height();t.beginPath(),e?s.Z.drawRoundedRectPath(t,n,i,e):t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)}}h.prototype.className="Rect",(0,o.DA)(h),i.F.addGetterSetter(h,"cornerRadius",0,(0,a.Jj)(4))},97380:(t,e,n)=>{"use strict";n.d(e,{h:()=>a});var i=n(95780),r=n(19926),o=n(40059),s=n(68678);class a extends r.b{_sceneFunc(t){const e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,n=[];for(var i=0;i<t;i++)n.push({x:e*Math.sin(2*i*Math.PI/t),y:-1*e*Math.cos(2*i*Math.PI/t)});return n}getSelfRect(){const t=this._getPoints();var e=t[0].x,n=t[0].y,i=t[0].x,r=t[0].y;return t.forEach((t=>{e=Math.min(e,t.x),n=Math.max(n,t.x),i=Math.min(i,t.y),r=Math.max(r,t.y)})),{x:e,y:i,width:n-e,height:r-i}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}a.prototype.className="RegularPolygon",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s.DA)(a),i.F.addGetterSetter(a,"radius",0,(0,o.Kg)()),i.F.addGetterSetter(a,"sides",0,(0,o.Kg)())},67233:(t,e,n)=>{"use strict";n.d(e,{W:()=>h,x:()=>b});var i=n(74051),r=n(95780),o=n(19926),s=n(40059),a=n(68678);function h(t){return Array.from(t)}var c,l="auto",u="justify",d="left",f="middle",p="normal",g=" ",v="none",m=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],y=m.length;function _(){return c||(c=i.Z.createCanvasElement().getContext("2d"))}class b extends o.b{constructor(t){super(function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(t)),this._partialTextX=0,this._partialTextY=0;for(var e=0;e<y;e++)this.on(m[e]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(t){var e=this.textArr,n=e.length;if(this.text()){var i,r=this.padding(),o=this.fontSize(),s=this.lineHeight()*o,a=this.verticalAlign(),c=0,l=this.align(),p=this.getWidth(),g=this.letterSpacing(),v=this.fill(),m=this.textDecoration(),y=-1!==m.indexOf("underline"),_=-1!==m.indexOf("line-through"),b=0,S=(b=s/2,0),w=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",f),t.setAttr("textAlign",d),a===f?c=(this.getHeight()-n*s-2*r)/2:"bottom"===a&&(c=this.getHeight()-n*s-2*r),t.translate(r,c+r),i=0;i<n;i++){S=0,w=0;var x,k,E,C=e[i],A=C.text,O=C.width,R=C.lastInParagraph;if(t.save(),"right"===l?S+=p-O-2*r:"center"===l&&(S+=(p-O-2*r)/2),y){t.save(),t.beginPath(),t.moveTo(S,b+w+Math.round(o/2)),k=0===(x=A.split(" ").length-1),E=l!==u||R?O:p-2*r,t.lineTo(S+Math.round(E),b+w+Math.round(o/2)),t.lineWidth=o/15;const e=this._getLinearGradient();t.strokeStyle=e||v,t.stroke(),t.restore()}if(_){t.save(),t.beginPath(),t.moveTo(S,b+w),k=0===(x=A.split(" ").length-1),E=l===u&&R&&!k?p-2*r:O,t.lineTo(S+Math.round(E),b+w),t.lineWidth=o/15;const e=this._getLinearGradient();t.strokeStyle=e||v,t.stroke(),t.restore()}if(0!==g||l===u){x=A.split(" ").length-1;for(var T=h(A),P=0;P<T.length;P++){var D=T[P];" "!==D||R||l!==u||(S+=(p-2*r-O)/x),this._partialTextX=S,this._partialTextY=b+w,this._partialText=D,t.fillStrokeShape(this),S+=this.measureSize(D).width+g}}else this._partialTextX=S,this._partialTextY=b+w,this._partialText=A,t.fillStrokeShape(this);t.restore(),n>1&&(b+=s)}}}_hitFunc(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}setText(t){var e=i.Z._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this}getWidth(){return this.attrs.width===l||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===l||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return i.Z.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,n=_(),i=this.fontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:i}}_getContextFont(){return this.fontStyle()+g+this.fontVariant()+g+(this.fontSize()+"px ")+this.fontFamily().split(",").map((t=>{const e=(t=t.trim()).indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!n&&(t=`"${t}"`),t})).join(", ")}_addTextLine(t){this.align()===u&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e,lastInParagraph:!1})}_getTextWidth(t){var e=this.letterSpacing(),n=t.length;return _().measureText(t).width+(n?e*(n-1):0)}_setTextData(){var t=this.text().split("\n"),e=+this.fontSize(),n=0,i=this.lineHeight()*e,r=this.attrs.width,o=this.attrs.height,s=r!==l&&void 0!==r,a=o!==l&&void 0!==o,h=this.padding(),c=r-2*h,u=o-2*h,d=0,f=this.wrap(),p="char"!==f&&f!==v,m=this.ellipsis();this.textArr=[],_().font=this._getContextFont();for(var y=m?this._getTextWidth("\u2026"):0,b=0,S=t.length;b<S;++b){var w=t[b],x=this._getTextWidth(w);if(s&&x>c)for(;w.length>0;){for(var k=0,E=w.length,C="",A=0;k<E;){var O=k+E>>>1,R=w.slice(0,O+1),T=this._getTextWidth(R)+y;T<=c?(k=O+1,C=R,A=T):E=O}if(!C)break;if(p){var P,D=w[C.length];(P=(D===g||"-"===D)&&A<=c?C.length:Math.max(C.lastIndexOf(g),C.lastIndexOf("-"))+1)>0&&(k=P,C=C.slice(0,k),A=this._getTextWidth(C))}if(C=C.trimRight(),this._addTextLine(C),n=Math.max(n,A),d+=i,this._shouldHandleEllipsis(d)){this._tryToAddEllipsisToLastLine();break}if((w=(w=w.slice(k)).trimLeft()).length>0&&(x=this._getTextWidth(w))<=c){this._addTextLine(w),d+=i,n=Math.max(n,x);break}}else this._addTextLine(w),d+=i,n=Math.max(n,x),this._shouldHandleEllipsis(d)&&b<S-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),a&&d+i>u)break}this.textHeight=e,this.textWidth=n}_shouldHandleEllipsis(t){var e=+this.fontSize(),n=this.lineHeight()*e,i=this.attrs.height,r=i!==l&&void 0!==i,o=i-2*this.padding();return!(this.wrap()!==v)||r&&t+n>o}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,e=t!==l&&void 0!==t,n=t-2*this.padding(),i=this.ellipsis(),r=this.textArr[this.textArr.length-1];if(r&&i){if(e)this._getTextWidth(r.text+"\u2026")<n||(r.text=r.text.slice(0,r.text.length-3));this.textArr.splice(this.textArr.length-1,1),this._addTextLine(r.text+"\u2026")}}getStrokeScaleEnabled(){return!0}}b.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},b.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},b.prototype.className="Text",b.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a.DA)(b),r.F.overWriteSetter(b,"width",(0,s.hi)()),r.F.overWriteSetter(b,"height",(0,s.hi)()),r.F.addGetterSetter(b,"fontFamily","Arial"),r.F.addGetterSetter(b,"fontSize",12,(0,s.Kg)()),r.F.addGetterSetter(b,"fontStyle",p),r.F.addGetterSetter(b,"fontVariant",p),r.F.addGetterSetter(b,"padding",0,(0,s.Kg)()),r.F.addGetterSetter(b,"align",d),r.F.addGetterSetter(b,"verticalAlign","top"),r.F.addGetterSetter(b,"lineHeight",1,(0,s.Kg)()),r.F.addGetterSetter(b,"wrap","word"),r.F.addGetterSetter(b,"ellipsis",!1,(0,s.I0)()),r.F.addGetterSetter(b,"letterSpacing",0,(0,s.Kg)()),r.F.addGetterSetter(b,"text","",(0,s.sY)()),r.F.addGetterSetter(b,"textDecoration","")},20015:(t,e,n)=>{"use strict";n.d(e,{$:()=>b});var i=n(74051),r=n(95780),o=n(13881),s=n(19926),a=n(79890),h=n(3856),c=n(68678),l=n(40059),u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map((t=>t+`.${u}`)).join(" "),f="nodesRect",p=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const v="ontouchstart"in c.So._global;var m=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function y(t,e,n){const i=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),r=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:i,y:r})}function _(t,e){const n=function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t);return y(t,e,n)}class b extends h.Z{constructor(t){super(t),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return i.Z.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(t=[]){return this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((t=>{const e=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()},n=t._attrsAffectingSize.map((t=>t+"Change."+this._getEventNamespace())).join(" ");t.on(n,e),t.on(p.map((t=>t+`.${this._getEventNamespace()}`)).join(" "),e),t.on(`absoluteTransformChange.${this._getEventNamespace()}`,e),this._proxyDrag(t)})),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,(n=>{e=t.getAbsolutePosition(),this.isDragging()||t===this.findOne(".back")||this.startDrag(n,!1)})),t.on(`dragmove.${this._getEventNamespace()}`,(n=>{if(!e)return;const i=t.getAbsolutePosition(),r=i.x-e.x,o=i.y-e.y;this.nodes().forEach((e=>{if(e===t)return;if(e.isDragging())return;const i=e.getAbsolutePosition();e.setAbsolutePosition({x:i.x+r,y:i.y+o}),e.startDrag(n)})),e=null}))}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach((t=>{t.off("."+this._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),n){var i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=t.getAbsoluteScale(n),o=t.getAbsolutePosition(n),s=i.x*r.x-t.offsetX()*r.x,a=i.y*r.y-t.offsetY()*r.y;const h=(c.So.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return y({x:o.x+s*Math.cos(h)+a*Math.sin(-h),y:o.y+a*Math.cos(h)+s*Math.sin(h),width:i.width*r.x,height:i.height*r.y,rotation:h},-c.So.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map((e=>{const n=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var i=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],r=e.getAbsoluteTransform();i.forEach((function(e){var n=r.point(e);t.push(n)}))}));const e=new i.w;var n,r,o,s;e.rotate(-c.So.getAngle(this.rotation())),t.forEach((function(t){var i=e.point(t);void 0===n&&(n=o=i.x,r=s=i.y),n=Math.min(n,i.x),r=Math.min(r,i.y),o=Math.max(o,i.x),s=Math.max(s,i.y)})),e.invert();const a=e.point({x:n,y:r});return{x:a.x,y:a.y,width:o-n,height:s-r,rotation:c.So.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),m.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")}_createAnchor(t){var e=new a.U({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:v?10:"auto"}),n=this;e.on("mousedown touchstart",(function(t){n._handleMouseDown(t)})),e.on("dragstart",(t=>{e.stopDrag(),t.cancelBubble=!0})),e.on("dragend",(t=>{t.cancelBubble=!0})),e.on("mouseenter",(()=>{var n=c.So.getAngle(this.rotation()),r=function(t,e){if("rotater"===t)return"crosshair";e+=i.Z.degToRad(g[t]||0);var n=(i.Z.radToDeg(e)%360+360)%360;return i.Z._inRange(n,337.5,360)||i.Z._inRange(n,0,22.5)?"ns-resize":i.Z._inRange(n,22.5,67.5)?"nesw-resize":i.Z._inRange(n,67.5,112.5)?"ew-resize":i.Z._inRange(n,112.5,157.5)?"nwse-resize":i.Z._inRange(n,157.5,202.5)?"ns-resize":i.Z._inRange(n,202.5,247.5)?"nesw-resize":i.Z._inRange(n,247.5,292.5)?"ew-resize":i.Z._inRange(n,292.5,337.5)?"nwse-resize":(i.Z.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(t,n);e.getStage().content&&(e.getStage().content.style.cursor=r),this._cursorChange=!0})),e.on("mouseout",(()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1})),this.add(e)}_createBack(){var t=new s.b({name:"back",width:0,height:0,draggable:!0,sceneFunc(t){var e=this.getParent(),n=e.padding();t.beginPath(),t.rect(-n,-n,this.width()+2*n,this.height()+2*n),t.moveTo(this.width()/2,-n),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*i.Z._sign(this.height())-n),t.fillStrokeShape(this)},hitFunc:(t,e)=>{if(this.shouldOverdrawWholeArea()){var n=this.padding();t.beginPath(),t.rect(-n,-n,e.width()+2*n,e.height()+2*n),t.fillStrokeShape(e)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",(t=>{t.cancelBubble=!0})),t.on("dragmove",(t=>{t.cancelBubble=!0})),t.on("dragend",(t=>{t.cancelBubble=!0})),this.on("dragmove",(t=>{this.update()}))}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,i=e.height,r=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));this.sin=Math.abs(i/r),this.cos=Math.abs(n/r),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var o=t.target.getAbsolutePosition(),s=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:s.x-o.x,y:s.y-o.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach((e=>{e._fire("transformstart",{evt:t.evt,target:e})}))}_handleMouseMove(t){var e,n,i,r=this.findOne("."+this._movingAnchorName),o=r.getStage();o.setPointersPositions(t);const s=o.getPointerPosition();let a={x:s.x-this._anchorDragOffset.x,y:s.y-this._anchorDragOffset.y};const h=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(a=this.anchorDragBoundFunc()(h,a,t)),r.setAbsolutePosition(a);const l=r.getAbsolutePosition();if(h.x!==l.x||h.y!==l.y)if("rotater"!==this._movingAnchorName){var u=this.keepRatio()||t.shiftKey,d=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(u){var f=d?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(f.x-r.x(),2)+Math.pow(f.y-r.y(),2));var p=this.findOne(".top-left").x()>f.x?-1:1,g=this.findOne(".top-left").y()>f.y?-1:1;e=i*this.cos*p,n=i*this.sin*g,this.findOne(".top-left").x(f.x-e),this.findOne(".top-left").y(f.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(r.y());else if("top-right"===this._movingAnchorName){if(u){f=d?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(r.x()-f.x,2)+Math.pow(f.y-r.y(),2));p=this.findOne(".top-right").x()<f.x?-1:1,g=this.findOne(".top-right").y()>f.y?-1:1;e=i*this.cos*p,n=i*this.sin*g,this.findOne(".top-right").x(f.x+e),this.findOne(".top-right").y(f.y-n)}var v=r.position();this.findOne(".top-left").y(v.y),this.findOne(".bottom-right").x(v.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(r.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(r.x());else if("bottom-left"===this._movingAnchorName){if(u){f=d?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(f.x-r.x(),2)+Math.pow(r.y()-f.y,2));p=f.x<r.x()?-1:1,g=r.y()<f.y?-1:1;e=i*this.cos*p,n=i*this.sin*g,r.x(f.x-e),r.y(f.y+n)}v=r.position(),this.findOne(".top-left").x(v.x),this.findOne(".bottom-right").y(v.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(r.y());else if("bottom-right"===this._movingAnchorName){if(u){f=d?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(r.x()-f.x,2)+Math.pow(r.y()-f.y,2));p=this.findOne(".bottom-right").x()<f.x?-1:1,g=this.findOne(".bottom-right").y()<f.y?-1:1;e=i*this.cos*p,n=i*this.sin*g,this.findOne(".bottom-right").x(f.x+e),this.findOne(".bottom-right").y(f.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(d=this.centeredScaling()||t.altKey){var m=this.findOne(".top-left"),y=this.findOne(".bottom-right"),b=m.x(),S=m.y(),w=this.getWidth()-y.x(),x=this.getHeight()-y.y();y.move({x:-b,y:-S}),m.move({x:w,y:x})}var k=this.findOne(".top-left").getAbsolutePosition();e=k.x,n=k.y;var E=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),C=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:E,height:C,rotation:c.So.getAngle(this.rotation())},t)}else{var A=this._getNodeRect();e=r.x()-A.width/2,n=-r.y()+A.height/2;let i=Math.atan2(-n,e)+Math.PI/2;A.height<0&&(i-=Math.PI);const o=c.So.getAngle(this.rotation())+i,s=c.So.getAngle(this.rotationSnapTolerance()),a=_(A,function(t,e,n){let i=e;for(let r=0;r<t.length;r++){const o=c.So.getAngle(t[r]),s=Math.abs(o-e)%(2*Math.PI);Math.min(s,2*Math.PI-s)<n&&(i=o)}return i}(this.rotationSnaps(),o,s)-A.rotation);this._fitNodesInto(a,t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach((e=>{e._fire("transformend",{evt:t,target:e})})),this._movingAnchorName=null}}_fitNodesInto(t,e){var n=this._getNodeRect();if(i.Z._inRange(t.width,2*-this.padding()-1,1))return void this.update();if(i.Z._inRange(t.height,2*-this.padding()-1,1))return void this.update();const r=this.flipEnabled();var o=new i.w;if(o.rotate(c.So.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const e=o.point({x:2*-this.padding(),y:0});if(t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,!r)return void this.update()}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const e=o.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding(),!r)return void this.update()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const e=o.point({x:0,y:2*-this.padding()});if(t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding(),!r)return void this.update()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const e=o.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding(),!r)return void this.update()}if(this.boundBoxFunc()){const e=this.boundBoxFunc()(n,t);e?t=e:i.Z.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const s=1e7,a=new i.w;a.translate(n.x,n.y),a.rotate(n.rotation),a.scale(n.width/s,n.height/s);const h=new i.w;h.translate(t.x,t.y),h.rotate(t.rotation),h.scale(t.width/s,t.height/s);const l=h.multiply(a.invert());this._nodes.forEach((t=>{var n;const r=t.getParent().getAbsoluteTransform(),o=t.getTransform().copy();o.translate(t.offsetX(),t.offsetY());const s=new i.w;s.multiply(r.copy().invert()).multiply(l).multiply(r).multiply(o);const a=s.decompose();t.setAttrs(a),this._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t}),null===(n=t.getLayer())||void 0===n||n.batchDraw()})),this.rotation(i.Z._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(i.Z._getRotation(e.rotation));var n=e.width,r=e.height,o=this.enabledAnchors(),s=this.resizeEnabled(),a=this.padding(),h=this.anchorSize();this.find("._anchor").forEach((t=>{t.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:h/2+a,offsetY:h/2+a,visible:s&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:h/2+a,visible:s&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:h/2-a,offsetY:h/2+a,visible:s&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:h/2+a,visible:s&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:r/2,offsetX:h/2-a,visible:s&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:h/2+a,offsetY:h/2-a,visible:s&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:r,offsetY:h/2-a,visible:s&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:r,offsetX:h/2-a,offsetY:h/2-a,visible:s&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*i.Z._sign(r)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),h.Z.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return o.N.prototype.toObject.call(this)}clone(t){return o.N.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}b.prototype.className="Transformer",(0,c.DA)(b),r.F.addGetterSetter(b,"enabledAnchors",m,(function(t){return t instanceof Array||i.Z.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===m.indexOf(t)&&i.Z.warn("Unknown anchor name: "+t+". Available names are: "+m.join(", "))})),t||[]})),r.F.addGetterSetter(b,"flipEnabled",!0,(0,l.I0)()),r.F.addGetterSetter(b,"resizeEnabled",!0),r.F.addGetterSetter(b,"anchorSize",10,(0,l.Kg)()),r.F.addGetterSetter(b,"rotateEnabled",!0),r.F.addGetterSetter(b,"rotationSnaps",[]),r.F.addGetterSetter(b,"rotateAnchorOffset",50,(0,l.Kg)()),r.F.addGetterSetter(b,"rotationSnapTolerance",5,(0,l.Kg)()),r.F.addGetterSetter(b,"borderEnabled",!0),r.F.addGetterSetter(b,"anchorStroke","rgb(0, 161, 255)"),r.F.addGetterSetter(b,"anchorStrokeWidth",1,(0,l.Kg)()),r.F.addGetterSetter(b,"anchorFill","white"),r.F.addGetterSetter(b,"anchorCornerRadius",0,(0,l.Kg)()),r.F.addGetterSetter(b,"borderStroke","rgb(0, 161, 255)"),r.F.addGetterSetter(b,"borderStrokeWidth",1,(0,l.Kg)()),r.F.addGetterSetter(b,"borderDash"),r.F.addGetterSetter(b,"keepRatio",!0),r.F.addGetterSetter(b,"centeredScaling",!1),r.F.addGetterSetter(b,"ignoreStroke",!1),r.F.addGetterSetter(b,"padding",0,(0,l.Kg)()),r.F.addGetterSetter(b,"node"),r.F.addGetterSetter(b,"nodes"),r.F.addGetterSetter(b,"boundBoxFunc"),r.F.addGetterSetter(b,"anchorDragBoundFunc"),r.F.addGetterSetter(b,"shouldOverdrawWholeArea",!1),r.F.addGetterSetter(b,"useSingleNodeRotation",!0),r.F.backCompat(b,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})},37175:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});const i=function(){this.__data__=[],this.size=0};var r=n(65136);const o=function(t,e){for(var n=t.length;n--;)if((0,r.Z)(t[n][0],e))return n;return-1};var s=Array.prototype.splice;const a=function(t){var e=this.__data__,n=o(e,t);return!(n<0)&&(n==e.length-1?e.pop():s.call(e,n,1),--this.size,!0)};const h=function(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]};const c=function(t){return o(this.__data__,t)>-1};const l=function(t,e){var n=this.__data__,i=o(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}u.prototype.clear=i,u.prototype.delete=a,u.prototype.get=h,u.prototype.has=c,u.prototype.set=l;const d=u},8445:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(91478),r=n(1189);const o=(0,i.Z)(r.Z,"Map")},31738:(t,e,n)=>{"use strict";n.d(e,{Z:()=>x});const i=(0,n(91478).Z)(Object,"create");const r=function(){this.__data__=i?i(null):{},this.size=0};const o=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var s=Object.prototype.hasOwnProperty;const a=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(e,t)?e[t]:void 0};var h=Object.prototype.hasOwnProperty;const c=function(t){var e=this.__data__;return i?void 0!==e[t]:h.call(e,t)};const l=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this};function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=c,u.prototype.set=l;const d=u;var f=n(37175),p=n(8445);const g=function(){this.size=0,this.__data__={hash:new d,map:new(p.Z||f.Z),string:new d}};const v=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const m=function(t,e){var n=t.__data__;return v(e)?n["string"==typeof e?"string":"hash"]:n.map};const y=function(t){var e=m(this,t).delete(t);return this.size-=e?1:0,e};const _=function(t){return m(this,t).get(t)};const b=function(t){return m(this,t).has(t)};const S=function(t,e){var n=m(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function w(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}w.prototype.clear=g,w.prototype.delete=y,w.prototype.get=_,w.prototype.has=b,w.prototype.set=S;const x=w},74917:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var i=n(37175);const r=function(){this.__data__=new i.Z,this.size=0};const o=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};const s=function(t){return this.__data__.get(t)};const a=function(t){return this.__data__.has(t)};var h=n(8445),c=n(31738);const l=function(t,e){var n=this.__data__;if(n instanceof i.Z){var r=n.__data__;if(!h.Z||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new c.Z(r)}return n.set(t,e),this.size=n.size,this};function u(t){var e=this.__data__=new i.Z(t);this.size=e.size}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=s,u.prototype.has=a,u.prototype.set=l;const d=u},64763:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(1189).Z.Symbol},5828:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=n(1189).Z.Uint8Array},74338:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});const i=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i};var r=n(68167),o=n(54618),s=n(95960),a=n(17022),h=n(32721),c=Object.prototype.hasOwnProperty;const l=function(t,e){var n=(0,o.Z)(t),l=!n&&(0,r.Z)(t),u=!n&&!l&&(0,s.Z)(t),d=!n&&!l&&!u&&(0,h.Z)(t),f=n||l||u||d,p=f?i(t.length,String):[],g=p.length;for(var v in t)!e&&!c.call(t,v)||f&&("length"==v||u&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||(0,a.Z)(v,g))||p.push(v);return p}},34073:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},38210:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},82736:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(31061),r=n(65136),o=Object.prototype.hasOwnProperty;const s=function(t,e,n){var s=t[e];o.call(t,e)&&(0,r.Z)(s,n)&&(void 0!==n||e in t)||(0,i.Z)(t,e,n)}},31061:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(90379);const r=function(t,e,n){"__proto__"==e&&i.Z?(0,i.Z)(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},37721:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(63504),r=n(337);const o=function(t,e){for(var n=0,o=(e=(0,i.Z)(e,t)).length;null!=t&&n<o;)t=t[(0,r.Z)(e[n++])];return n&&n==o?t:void 0}},25660:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(38210),r=n(54618);const o=function(t,e,n){var o=e(t);return(0,r.Z)(t)?o:(0,i.Z)(o,n(t))}},14276:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var i=n(64763),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=i.Z?i.Z.toStringTag:void 0;const h=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(h){}var r=s.call(t);return i&&(e?t[a]=n:delete t[a]),r};var c=Object.prototype.toString;const l=function(t){return c.call(t)};var u=i.Z?i.Z.toStringTag:void 0;const d=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":u&&u in Object(t)?h(t):l(t)}},83904:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(80578);const r=(0,n(31268).Z)(Object.keys,Object);var o=Object.prototype.hasOwnProperty;const s=function(t){if(!(0,i.Z)(t))return r(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},51211:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t){return function(e){return t(e)}}},63504:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var i=n(54618),r=n(31674),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;const a=function(t,e){if((0,i.Z)(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!(0,r.Z)(t))||(s.test(t)||!o.test(t)||null!=e&&t in Object(e))};var h=n(86245);var c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g;const u=function(t){var e=(0,h.Z)(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(c,(function(t,n,i,r){e.push(i?r.replace(l,"$1"):n||t)})),e}));var d=n(64763),f=n(34073),p=d.Z?d.Z.prototype:void 0,g=p?p.toString:void 0;const v=function t(e){if("string"==typeof e)return e;if((0,i.Z)(e))return(0,f.Z)(e,t)+"";if((0,r.Z)(e))return g?g.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};const m=function(t){return null==t?"":v(t)};const y=function(t,e){return(0,i.Z)(t)?t:a(t,e)?[t]:u(m(t))}},44607:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(5828);const r=function(t){var e=new t.constructor(t.byteLength);return new i.Z(e).set(new i.Z(t)),e}},48556:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var i=n(1189),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=r&&"object"==typeof module&&module&&!module.nodeType&&module,s=o&&o.exports===r?i.Z.Buffer:void 0,a=s?s.allocUnsafe:void 0;const h=function(t,e){if(e)return t.slice();var n=t.length,i=a?a(n):new t.constructor(n);return t.copy(i),i}},12546:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(44607);const r=function(t,e){var n=e?(0,i.Z)(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},40078:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},55348:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(82736),r=n(31061);const o=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,h=e.length;++a<h;){var c=e[a],l=o?o(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),s?(0,r.Z)(n,c,l):(0,i.Z)(n,c,l)}return n}},90379:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(91478);const r=function(){try{var t=(0,i.Z)(Object,"defineProperty");return t({},"",{}),t}catch(e){}}()},69968:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var i=n(38210),r=n(64763),o=n(68167),s=n(54618),a=r.Z?r.Z.isConcatSpreadable:void 0;const h=function(t){return(0,s.Z)(t)||(0,o.Z)(t)||!!(a&&t&&t[a])};const c=function t(e,n,r,o,s){var a=-1,c=e.length;for(r||(r=h),s||(s=[]);++a<c;){var l=e[a];n>0&&r(l)?n>1?t(l,n-1,r,o,s):(0,i.Z)(s,l):o||(s[s.length]=l)}return s};const l=function(t){return(null==t?0:t.length)?c(t,1):[]};var u=n(70802),d=n(41023);const f=function(t){return(0,d.Z)((0,u.Z)(t,void 0,l),t+"")}},53977:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i="object"==typeof global&&global&&global.Object===Object&&global},36957:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(25660),r=n(26916),o=n(21377);const s=function(t){return(0,i.Z)(t,o.Z,r.Z)}},91478:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var i=n(48712);const r=n(1189).Z["__core-js_shared__"];var o,s=(o=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";const a=function(t){return!!s&&s in t};var h=n(7445),c=n(8309),l=/^\[object .+?Constructor\]$/,u=Function.prototype,d=Object.prototype,f=u.toString,p=d.hasOwnProperty,g=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const v=function(t){return!(!(0,h.Z)(t)||a(t))&&((0,i.Z)(t)?g:l).test((0,c.Z)(t))};const m=function(t,e){return null==t?void 0:t[e]};const y=function(t,e){var n=m(t,e);return v(n)?n:void 0}},8039:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=(0,n(31268).Z)(Object.getPrototypeOf,Object)},26916:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const i=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o};var r=n(98283),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;const a=s?function(t){return null==t?[]:(t=Object(t),i(s(t),(function(e){return o.call(t,e)})))}:r.Z},80206:(t,e,n)=>{"use strict";n.d(e,{Z:()=>x});var i=n(91478),r=n(1189);const o=(0,i.Z)(r.Z,"DataView");var s=n(8445);const a=(0,i.Z)(r.Z,"Promise");const h=(0,i.Z)(r.Z,"Set");const c=(0,i.Z)(r.Z,"WeakMap");var l=n(14276),u=n(8309),d="[object Map]",f="[object Promise]",p="[object Set]",g="[object WeakMap]",v="[object DataView]",m=(0,u.Z)(o),y=(0,u.Z)(s.Z),_=(0,u.Z)(a),b=(0,u.Z)(h),S=(0,u.Z)(c),w=l.Z;(o&&w(new o(new ArrayBuffer(1)))!=v||s.Z&&w(new s.Z)!=d||a&&w(a.resolve())!=f||h&&w(new h)!=p||c&&w(new c)!=g)&&(w=function(t){var e=(0,l.Z)(t),n="[object Object]"==e?t.constructor:void 0,i=n?(0,u.Z)(n):"";if(i)switch(i){case m:return v;case y:return d;case _:return f;case b:return p;case S:return g}return e});const x=w},88081:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var i=n(7445),r=Object.create;const o=function(){function t(){}return function(e){if(!(0,i.Z)(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var s=n(8039),a=n(80578);const h=function(t){return"function"!=typeof t.constructor||(0,a.Z)(t)?{}:o((0,s.Z)(t))}},17022:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=/^(?:0|[1-9]\d*)$/;const r=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}},80578:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=Object.prototype;const r=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},65547:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(53977),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=r&&"object"==typeof module&&module&&!module.nodeType&&module,s=o&&o.exports===r&&i.Z.process;const a=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}()},31268:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t,e){return function(n){return t(e(n))}}},70802:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const i=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var r=Math.max;const o=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=r(o.length-e,0),h=Array(a);++s<a;)h[s]=o[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=o[s];return c[e]=n(h),i(t,this,c)}}},1189:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(53977),r="object"==typeof self&&self&&self.Object===Object&&self;const o=i.Z||r||Function("return this")()},41023:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});const i=function(t){return function(){return t}};var r=n(90379),o=n(80058);const s=r.Z?function(t,e){return(0,r.Z)(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:o.Z;var a=Date.now;const h=function(t){var e=0,n=0;return function(){var i=a(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(s)},337:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(31674);const r=function(t){if("string"==typeof t||(0,i.Z)(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},8309:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=Function.prototype.toString;const r=function(t){if(null!=t){try{return i.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},65136:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t,e){return t===e||t!=t&&e!=e}},80058:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t){return t}},68167:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(14276),r=n(11474);const o=function(t){return(0,r.Z)(t)&&"[object Arguments]"==(0,i.Z)(t)};var s=Object.prototype,a=s.hasOwnProperty,h=s.propertyIsEnumerable;const c=o(function(){return arguments}())?o:function(t){return(0,r.Z)(t)&&a.call(t,"callee")&&!h.call(t,"callee")}},54618:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=Array.isArray},63396:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(48712),r=n(36526);const o=function(t){return null!=t&&(0,r.Z)(t.length)&&!(0,i.Z)(t)}},95960:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var i=n(1189);const r=function(){return!1};var o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof module&&module&&!module.nodeType&&module,a=s&&s.exports===o?i.Z.Buffer:void 0;const h=(a?a.isBuffer:void 0)||r},21518:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var i=n(83904),r=n(80206),o=n(68167),s=n(54618),a=n(63396),h=n(95960),c=n(80578),l=n(32721),u=Object.prototype.hasOwnProperty;const d=function(t){if(null==t)return!0;if((0,a.Z)(t)&&((0,s.Z)(t)||"string"==typeof t||"function"==typeof t.splice||(0,h.Z)(t)||(0,l.Z)(t)||(0,o.Z)(t)))return!t.length;var e=(0,r.Z)(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if((0,c.Z)(t))return!(0,i.Z)(t).length;for(var n in t)if(u.call(t,n))return!1;return!0}},58201:(t,e,n)=>{"use strict";n.d(e,{Z:()=>M});var i=n(74917),r=n(31738);const o=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};const s=function(t){return this.__data__.has(t)};function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r.Z;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=s;const h=a;const c=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1};const l=function(t,e){return t.has(e)};const u=function(t,e,n,i,r,o){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var d=o.get(t),f=o.get(e);if(d&&f)return d==e&&f==t;var p=-1,g=!0,v=2&n?new h:void 0;for(o.set(t,e),o.set(e,t);++p<a;){var m=t[p],y=e[p];if(i)var _=s?i(y,m,p,e,t,o):i(m,y,p,t,e,o);if(void 0!==_){if(_)continue;g=!1;break}if(v){if(!c(e,(function(t,e){if(!l(v,e)&&(m===t||r(m,t,n,i,o)))return v.push(e)}))){g=!1;break}}else if(m!==y&&!r(m,y,n,i,o)){g=!1;break}}return o.delete(t),o.delete(e),g};var d=n(64763),f=n(5828),p=n(65136);const g=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n};const v=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var m=d.Z?d.Z.prototype:void 0,y=m?m.valueOf:void 0;const _=function(t,e,n,i,r,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new f.Z(t),new f.Z(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,p.Z)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=g;case"[object Set]":var h=1&i;if(a||(a=v),t.size!=e.size&&!h)return!1;var c=s.get(t);if(c)return c==e;i|=2,s.set(t,e);var l=u(a(t),a(e),i,r,o,s);return s.delete(t),l;case"[object Symbol]":if(y)return y.call(t)==y.call(e)}return!1};var b=n(36957),S=Object.prototype.hasOwnProperty;const w=function(t,e,n,i,r,o){var s=1&n,a=(0,b.Z)(t),h=a.length;if(h!=(0,b.Z)(e).length&&!s)return!1;for(var c=h;c--;){var l=a[c];if(!(s?l in e:S.call(e,l)))return!1}var u=o.get(t),d=o.get(e);if(u&&d)return u==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=s;++c<h;){var g=t[l=a[c]],v=e[l];if(i)var m=s?i(v,g,l,e,t,o):i(g,v,l,t,e,o);if(!(void 0===m?g===v||r(g,v,n,i,o):m)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var y=t.constructor,_=e.constructor;y==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(f=!1)}return o.delete(t),o.delete(e),f};var x=n(80206),k=n(54618),E=n(95960),C=n(32721),A="[object Arguments]",O="[object Array]",R="[object Object]",T=Object.prototype.hasOwnProperty;const P=function(t,e,n,r,o,s){var a=(0,k.Z)(t),h=(0,k.Z)(e),c=a?O:(0,x.Z)(t),l=h?O:(0,x.Z)(e),d=(c=c==A?R:c)==R,f=(l=l==A?R:l)==R,p=c==l;if(p&&(0,E.Z)(t)){if(!(0,E.Z)(e))return!1;a=!0,d=!1}if(p&&!d)return s||(s=new i.Z),a||(0,C.Z)(t)?u(t,e,n,r,o,s):_(t,e,c,n,r,o,s);if(!(1&n)){var g=d&&T.call(t,"__wrapped__"),v=f&&T.call(e,"__wrapped__");if(g||v){var m=g?t.value():t,y=v?e.value():e;return s||(s=new i.Z),o(m,y,n,r,s)}}return!!p&&(s||(s=new i.Z),w(t,e,n,r,o,s))};var D=n(11474);const I=function t(e,n,i,r,o){return e===n||(null==e||null==n||!(0,D.Z)(e)&&!(0,D.Z)(n)?e!=e&&n!=n:P(e,n,i,r,t,o))};const M=function(t,e){return I(t,e)}},48712:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(14276),r=n(7445);const o=function(t){if(!(0,r.Z)(t))return!1;var e=(0,i.Z)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},36526:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},7445:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},11474:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(t){return null!=t&&"object"==typeof t}},11125:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(14276),r=n(8039),o=n(11474),s=Function.prototype,a=Object.prototype,h=s.toString,c=a.hasOwnProperty,l=h.call(Object);const u=function(t){if(!(0,o.Z)(t)||"[object Object]"!=(0,i.Z)(t))return!1;var e=(0,r.Z)(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&h.call(n)==l}},31674:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(14276),r=n(11474);const o=function(t){return"symbol"==typeof t||(0,r.Z)(t)&&"[object Symbol]"==(0,i.Z)(t)}},32721:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(14276),r=n(36526),o=n(11474),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;const a=function(t){return(0,o.Z)(t)&&(0,r.Z)(t.length)&&!!s[(0,i.Z)(t)]};var h=n(51211),c=n(65547),l=c.Z&&c.Z.isTypedArray;const u=l?(0,h.Z)(l):a},21377:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(74338),r=n(83904),o=n(63396);const s=function(t){return(0,o.Z)(t)?(0,i.Z)(t):(0,r.Z)(t)}},9268:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(74338),r=n(7445),o=n(80578);const s=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e};var a=Object.prototype.hasOwnProperty;const h=function(t){if(!(0,r.Z)(t))return s(t);var e=(0,o.Z)(t),n=[];for(var i in t)("constructor"!=i||!e&&a.call(t,i))&&n.push(i);return n};var c=n(63396);const l=function(t){return(0,c.Z)(t)?(0,i.Z)(t,!0):h(t)}},86245:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(31738);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(r.Cache||i.Z),n}r.Cache=i.Z;const o=r},47470:(t,e,n)=>{"use strict";n.d(e,{Z:()=>M});var i=n(74917),r=n(31061),o=n(65136);const s=function(t,e,n){(void 0!==n&&!(0,o.Z)(t[e],n)||void 0===n&&!(e in t))&&(0,r.Z)(t,e,n)};const a=function(t){return function(e,n,i){for(var r=-1,o=Object(e),s=i(e),a=s.length;a--;){var h=s[t?a:++r];if(!1===n(o[h],h,o))break}return e}}();var h=n(48556),c=n(12546),l=n(40078),u=n(88081),d=n(68167),f=n(54618),p=n(63396),g=n(11474);const v=function(t){return(0,g.Z)(t)&&(0,p.Z)(t)};var m=n(95960),y=n(48712),_=n(7445),b=n(11125),S=n(32721);const w=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var x=n(55348),k=n(9268);const E=function(t){return(0,x.Z)(t,(0,k.Z)(t))};const C=function(t,e,n,i,r,o,a){var p=w(t,n),g=w(e,n),x=a.get(g);if(x)s(t,n,x);else{var k=o?o(p,g,n+"",t,e,a):void 0,C=void 0===k;if(C){var A=(0,f.Z)(g),O=!A&&(0,m.Z)(g),R=!A&&!O&&(0,S.Z)(g);k=g,A||O||R?(0,f.Z)(p)?k=p:v(p)?k=(0,l.Z)(p):O?(C=!1,k=(0,h.Z)(g,!0)):R?(C=!1,k=(0,c.Z)(g,!0)):k=[]:(0,b.Z)(g)||(0,d.Z)(g)?(k=p,(0,d.Z)(p)?k=E(p):(0,_.Z)(p)&&!(0,y.Z)(p)||(k=(0,u.Z)(g))):C=!1}C&&(a.set(g,k),r(k,g,i,o,a),a.delete(g)),s(t,n,k)}};const A=function t(e,n,r,o,h){e!==n&&a(n,(function(a,c){if(h||(h=new i.Z),(0,_.Z)(a))C(e,n,c,r,t,o,h);else{var l=o?o(w(e,c),a,c+"",e,n,h):void 0;void 0===l&&(l=a),s(e,c,l)}}),k.Z)};var O=n(80058),R=n(70802),T=n(41023);const P=function(t,e){return(0,T.Z)((0,R.Z)(t,e,O.Z),t+"")};var D=n(17022);const I=function(t,e,n){if(!(0,_.Z)(n))return!1;var i=typeof e;return!!("number"==i?(0,p.Z)(n)&&(0,D.Z)(e,n.length):"string"==i&&e in n)&&(0,o.Z)(n[e],t)};const M=function(t){return P((function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,s&&I(n[0],n[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,o)}return e}))}((function(t,e,n){A(t,e,n)}))},31839:(t,e,n)=>{"use strict";n.d(e,{Z:()=>ut});var i=n(34073),r=n(74917);const o=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t};var s=n(82736),a=n(55348),h=n(21377);const c=function(t,e){return t&&(0,a.Z)(e,(0,h.Z)(e),t)};var l=n(9268);const u=function(t,e){return t&&(0,a.Z)(e,(0,l.Z)(e),t)};var d=n(48556),f=n(40078),p=n(26916);const g=function(t,e){return(0,a.Z)(t,(0,p.Z)(t),e)};var v=n(38210),m=n(8039),y=n(98283);const _=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)(0,v.Z)(e,(0,p.Z)(t)),t=(0,m.Z)(t);return e}:y.Z;const b=function(t,e){return(0,a.Z)(t,_(t),e)};var S=n(36957),w=n(25660);const x=function(t){return(0,w.Z)(t,l.Z,_)};var k=n(80206),E=Object.prototype.hasOwnProperty;const C=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&E.call(t,"index")&&(n.index=t.index,n.input=t.input),n};var A=n(44607);const O=function(t,e){var n=e?(0,A.Z)(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)};var R=/\w*$/;const T=function(t){var e=new t.constructor(t.source,R.exec(t));return e.lastIndex=t.lastIndex,e};var P=n(64763),D=P.Z?P.Z.prototype:void 0,I=D?D.valueOf:void 0;const M=function(t){return I?Object(I.call(t)):{}};var G=n(12546);const L=function(t,e,n){var i=t.constructor;switch(e){case"[object ArrayBuffer]":return(0,A.Z)(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return O(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(0,G.Z)(t,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return T(t);case"[object Symbol]":return M(t)}};var F=n(88081),N=n(54618),Z=n(95960),j=n(11474);const z=function(t){return(0,j.Z)(t)&&"[object Map]"==(0,k.Z)(t)};var B=n(51211),U=n(65547),K=U.Z&&U.Z.isMap;const H=K?(0,B.Z)(K):z;var W=n(7445);const V=function(t){return(0,j.Z)(t)&&"[object Set]"==(0,k.Z)(t)};var X=U.Z&&U.Z.isSet;const q=X?(0,B.Z)(X):V;var Y="[object Arguments]",J="[object Function]",$="[object Object]",Q={};Q[Y]=Q["[object Array]"]=Q["[object ArrayBuffer]"]=Q["[object DataView]"]=Q["[object Boolean]"]=Q["[object Date]"]=Q["[object Float32Array]"]=Q["[object Float64Array]"]=Q["[object Int8Array]"]=Q["[object Int16Array]"]=Q["[object Int32Array]"]=Q["[object Map]"]=Q["[object Number]"]=Q[$]=Q["[object RegExp]"]=Q["[object Set]"]=Q["[object String]"]=Q["[object Symbol]"]=Q["[object Uint8Array]"]=Q["[object Uint8ClampedArray]"]=Q["[object Uint16Array]"]=Q["[object Uint32Array]"]=!0,Q["[object Error]"]=Q[J]=Q["[object WeakMap]"]=!1;const tt=function t(e,n,i,a,p,v){var m,y=1&n,_=2&n,w=4&n;if(i&&(m=p?i(e,a,p,v):i(e)),void 0!==m)return m;if(!(0,W.Z)(e))return e;var E=(0,N.Z)(e);if(E){if(m=C(e),!y)return(0,f.Z)(e,m)}else{var A=(0,k.Z)(e),O=A==J||"[object GeneratorFunction]"==A;if((0,Z.Z)(e))return(0,d.Z)(e,y);if(A==$||A==Y||O&&!p){if(m=_||O?{}:(0,F.Z)(e),!y)return _?b(e,u(m,e)):g(e,c(m,e))}else{if(!Q[A])return p?e:{};m=L(e,A,y)}}v||(v=new r.Z);var R=v.get(e);if(R)return R;v.set(e,m),q(e)?e.forEach((function(r){m.add(t(r,n,i,r,e,v))})):H(e)&&e.forEach((function(r,o){m.set(o,t(r,n,i,o,e,v))}));var T=w?_?x:S.Z:_?l.Z:h.Z,P=E?void 0:T(e);return o(P||e,(function(r,o){P&&(r=e[o=r]),(0,s.Z)(m,o,t(r,n,i,o,e,v))})),m};var et=n(63504);const nt=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var it=n(37721);const rt=function(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o};const ot=function(t,e){return e.length<2?t:(0,it.Z)(t,rt(e,0,-1))};var st=n(337);const at=function(t,e){return e=(0,et.Z)(e,t),null==(t=ot(t,e))||delete t[(0,st.Z)(nt(e))]};var ht=n(11125);const ct=function(t){return(0,ht.Z)(t)?void 0:t};var lt=n(69968);const ut=(0,lt.Z)((function(t,e){var n={};if(null==t)return n;var r=!1;e=(0,i.Z)(e,(function(e){return e=(0,et.Z)(e,t),r||(r=e.length>1),e})),(0,a.Z)(t,x(t),n),r&&(n=tt(n,7,ct));for(var o=e.length;o--;)at(n,e[o]);return n}))},1944:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var i=n(37721),r=n(82736),o=n(63504),s=n(17022),a=n(7445),h=n(337);const c=function(t,e,n,i){if(!(0,a.Z)(t))return t;for(var c=-1,l=(e=(0,o.Z)(e,t)).length,u=l-1,d=t;null!=d&&++c<l;){var f=(0,h.Z)(e[c]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(c!=u){var g=d[f];void 0===(p=i?i(g,f,d):void 0)&&(p=(0,a.Z)(g)?g:(0,s.Z)(e[c+1])?[]:{})}(0,r.Z)(d,f,p),d=d[f]}return t};const l=function(t,e,n){for(var r=-1,s=e.length,a={};++r<s;){var h=e[r],l=(0,i.Z)(t,h);n(l,h)&&c(a,(0,o.Z)(h,t),l)}return a};const u=function(t,e){return null!=t&&e in Object(t)};var d=n(68167),f=n(54618),p=n(36526);const g=function(t,e,n){for(var i=-1,r=(e=(0,o.Z)(e,t)).length,a=!1;++i<r;){var c=(0,h.Z)(e[i]);if(!(a=null!=t&&n(t,c)))break;t=t[c]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&(0,p.Z)(r)&&(0,s.Z)(c,r)&&((0,f.Z)(t)||(0,d.Z)(t))};const v=function(t,e){return null!=t&&g(t,e,u)};const m=function(t,e){return l(t,e,(function(e,n){return v(t,n)}))};const y=(0,n(69968).Z)((function(t,e){return null==t?{}:m(t,e)}))},98283:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i=function(){return[]}}}]);